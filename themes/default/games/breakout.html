<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breakout | Yuxu Ge</title>
    <style>
        :root { --black: #111; --off-white: #f4f4f4; --vermilion: #C41E3A; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--off-white); }
        a { color: var(--vermilion); text-decoration: none; }
        a:hover { opacity: 0.75; }
        .layout { min-height: 100vh; }
        .sidebar { position: fixed; top: 0; left: 0; width: 320px; height: 100vh; background: var(--black); color: var(--off-white); padding: 3rem 2rem; display: flex; flex-direction: column; justify-content: space-between; }
        .sidebar-top { display: flex; flex-direction: column; align-items: center; text-align: center; }
        .avatar { display: block; width: 120px; height: 120px; border-radius: 50%; border: 3px solid var(--vermilion); margin-bottom: 1.5rem; overflow: hidden; }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
        .sidebar h1 { font-size: 1.8rem; font-weight: 700; color: var(--off-white); }
        .title-role { font-size: 0.9rem; color: #888; margin-top: 0.25rem; }
        .contact-block { margin-top: 2.5rem; width: 100%; }
        .social-links { display: flex; flex-direction: column; align-items: center; gap: 0.75rem; }
        .social-links a { display: flex; align-items: center; gap: 0.75rem; width: 160px; color: var(--off-white); opacity: 0.7; padding: 0.5rem 0.75rem; border-radius: 4px; font-size: 0.9rem; }
        .social-links a:hover { color: var(--vermilion); opacity: 1; }
        .social-links svg { width: 20px; height: 20px; }
        .social-links .orcid-link { font-size: 0.68rem; gap: 0.5rem; white-space: nowrap; }
        .sidebar-footer { text-align: center; font-size: 0.75rem; color: #555; }
        .content { margin-left: 320px; padding: 2rem 3rem; min-height: 100vh; display: flex; flex-direction: column; align-items: center; background: linear-gradient(180deg, #1a1a2e 0%, #0f0f1a 100%); }
        .back-link { display: inline-flex; font-size: 0.85rem; margin-bottom: 1rem; color: #aaa; align-self: flex-start; }
        .back-link:hover { color: #fff; }
        .game-header { width: 100%; max-width: 480px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; color: white; }
        .game-title { font-size: 2rem; color: #ff6b6b; }
        .score-box { background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 6px; font-weight: 700; }
        canvas { display: block; border-radius: 8px; }
        .controls { margin-top: 1rem; display: flex; gap: 0.5rem; }
        button { padding: 0.75rem 1.5rem; font-size: 1rem; background: linear-gradient(135deg, #ff6b6b, #ee5a5a); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; }
        button:hover { opacity: 0.9; }
        .message { margin-top: 1rem; font-size: 1.25rem; font-weight: 600; color: white; }
        .instructions { margin-top: 1.5rem; color: #aaa; font-size: 0.9rem; text-align: center; }
        @media (max-width: 900px) {
            .sidebar { position: relative; width: 100%; height: auto; padding: 2rem 1.5rem 1rem; }
            .social-links { flex-direction: row; flex-wrap: wrap; justify-content: center; }
            .social-links a { width: auto; padding: 0.5rem; font-size: 0; gap: 0; }
            .social-links svg { width: 24px; height: 24px; }
            .content { margin-left: 0; padding: 1.5rem 1rem; }
            canvas { max-width: 100%; height: auto; }
        }
    </style>
</head>
<body>
    <div class="layout">
        <aside class="sidebar" id="sidebar-content"></aside>
        <script src="/components/sidebar.js"></script>
        <main class="content">
            <a href="/games/" class="back-link">‚Üê Back to Games</a>
            <div class="game-header">
                <h1 class="game-title">Breakout</h1>
                <div class="score-box">Score: <span id="score">0</span></div>
                <div class="score-box">Lives: <span id="lives">3</span></div>
            </div>
            <canvas id="game" width="480" height="400"></canvas>
            <div class="controls">
                <button onclick="startGame()">New Game</button>
            </div>
            <div class="message" id="message"></div>
            <div class="instructions">
                <strong>Controls:</strong> Move mouse or arrow keys to control paddle.<br>
                Break all the bricks to win!
            </div>
        </main>
    </div>
    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        const paddleW = 80, paddleH = 12, ballR = 8;
        const brickRows = 5, brickCols = 8, brickW = 54, brickH = 20, brickPad = 4, brickTop = 40;
        const colors = ['#ff6b6b', '#feca57', '#48dbfb', '#1dd1a1', '#ff9ff3'];
        let paddleX, ballX, ballY, ballDX, ballDY, score, lives, bricks, gameRunning, animationId;

        function initBricks() {
            bricks = [];
            for (let r = 0; r < brickRows; r++) {
                bricks[r] = [];
                for (let c = 0; c < brickCols; c++) {
                    bricks[r][c] = { x: c * (brickW + brickPad) + 10, y: r * (brickH + brickPad) + brickTop, status: 1 };
                }
            }
        }

        function startGame() {
            cancelAnimationFrame(animationId);
            paddleX = (canvas.width - paddleW) / 2;
            ballX = canvas.width / 2;
            ballY = canvas.height - 50;
            ballDX = 3 * (Math.random() > 0.5 ? 1 : -1);
            ballDY = -4;
            score = 0;
            lives = 3;
            gameRunning = true;
            initBricks();
            document.getElementById('score').textContent = '0';
            document.getElementById('lives').textContent = '3';
            document.getElementById('message').textContent = '';
            loop();
        }

        function draw() {
            ctx.fillStyle = '#0f0f1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            // Bricks
            for (let r = 0; r < brickRows; r++) {
                for (let c = 0; c < brickCols; c++) {
                    if (bricks[r][c].status === 1) {
                        ctx.fillStyle = colors[r % colors.length];
                        ctx.fillRect(bricks[r][c].x, bricks[r][c].y, brickW, brickH);
                        ctx.fillStyle = 'rgba(255,255,255,0.3)';
                        ctx.fillRect(bricks[r][c].x, bricks[r][c].y, brickW, 4);
                    }
                }
            }
            // Paddle
            ctx.fillStyle = '#fff';
            ctx.fillRect(paddleX, canvas.height - paddleH - 10, paddleW, paddleH);
            // Ball
            ctx.beginPath();
            ctx.arc(ballX, ballY, ballR, 0, Math.PI * 2);
            ctx.fillStyle = '#fff';
            ctx.fill();
            ctx.closePath();
        }

        function update() {
            ballX += ballDX;
            ballY += ballDY;
            // Wall collision
            if (ballX + ballR > canvas.width || ballX - ballR < 0) ballDX = -ballDX;
            if (ballY - ballR < 0) ballDY = -ballDY;
            // Paddle collision
            if (ballY + ballR > canvas.height - paddleH - 10 && ballX > paddleX && ballX < paddleX + paddleW) {
                ballDY = -Math.abs(ballDY);
                ballDX = ((ballX - (paddleX + paddleW / 2)) / (paddleW / 2)) * 4;
            }
            // Bottom
            if (ballY + ballR > canvas.height) {
                lives--;
                document.getElementById('lives').textContent = lives;
                if (lives <= 0) {
                    gameRunning = false;
                    document.getElementById('message').textContent = 'Game Over!';
                    return;
                }
                ballX = canvas.width / 2;
                ballY = canvas.height - 50;
                ballDX = 3 * (Math.random() > 0.5 ? 1 : -1);
                ballDY = -4;
            }
            // Brick collision
            for (let r = 0; r < brickRows; r++) {
                for (let c = 0; c < brickCols; c++) {
                    const b = bricks[r][c];
                    if (b.status === 1 && ballX > b.x && ballX < b.x + brickW && ballY - ballR < b.y + brickH && ballY + ballR > b.y) {
                        ballDY = -ballDY;
                        b.status = 0;
                        score += 10;
                        document.getElementById('score').textContent = score;
                    }
                }
            }
            // Win check
            if (bricks.flat().every(b => b.status === 0)) {
                gameRunning = false;
                document.getElementById('message').textContent = 'You Win!';
            }
        }

        function loop() {
            if (!gameRunning) return;
            update();
            draw();
            animationId = requestAnimationFrame(loop);
        }

        canvas.addEventListener('mousemove', e => {
            const rect = canvas.getBoundingClientRect();
            paddleX = Math.max(0, Math.min(canvas.width - paddleW, e.clientX - rect.left - paddleW / 2));
        });

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowLeft') paddleX = Math.max(0, paddleX - 20);
            if (e.key === 'ArrowRight') paddleX = Math.min(canvas.width - paddleW, paddleX + 20);
        });

        startGame();
    </script>
</body>
</html>
