<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nighthawksé¡¹ç›®æ­ç§˜ï¼šæ„å»ºä¸‹ä¸€ä»£AIæ™ºèƒ½ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ | Yuxu Ge</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <style>
        :root {
            --black: #111;
            --dark-grey: #444;
            --off-white: #f4f4f4;
            --vermilion: #C41E3A;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--black);
            background-color: var(--off-white);
        }

        a { color: var(--vermilion); text-decoration: none; }
        a:hover { opacity: 0.75; }

        .layout { min-height: 100vh; }

        /* Sidebar */
        .sidebar {
            position: fixed; top: 0; left: 0;
            width: 320px; height: 100vh;
            background: var(--black); color: var(--off-white);
            padding: 3rem 2rem;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .sidebar-top { display: flex; flex-direction: column; align-items: center; text-align: center; }
        .avatar { display: block; width: 120px; height: 120px; border-radius: 50%; border: 3px solid var(--vermilion); margin-bottom: 1.5rem; overflow: hidden; transition: transform 0.2s ease; }
        .avatar:hover { opacity: 1; transform: scale(1.05); }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
        .name-block { margin-bottom: 0.5rem; }
        h1 { font-size: 1.8rem; font-weight: 700; letter-spacing: 1px; color: var(--off-white); }
        .title-role { font-size: 0.9rem; color: #888; margin-top: 0.25rem; font-weight: 400; }
        .contact-block { margin-top: 2.5rem; width: 100%; }
        .social-links { display: flex; flex-direction: column; align-items: center; gap: 0.75rem; }
        .social-links a { display: flex; align-items: center; gap: 0.75rem; width: 160px; color: var(--off-white); opacity: 0.7; padding: 0.5rem 0.75rem; border-radius: 4px; font-size: 0.9rem; transition: all 0.2s; }
        .social-links a:hover { color: var(--vermilion); opacity: 1; background: rgba(255,255,255,0.05); }
        .social-links svg { width: 20px; height: 20px; flex-shrink: 0; }
        .social-links .orcid-link { font-size: 0.68rem; gap: 0.5rem; white-space: nowrap; }
        .sidebar-footer { text-align: center; font-size: 0.75rem; color: #555; }

        /* Content */
        .content { margin-left: 320px; padding: 3rem 4rem; max-width: 900px; }
        .back-link { display: inline-block; font-size: 0.85rem; margin-bottom: 2rem; color: var(--dark-grey); }
        .back-link:hover { color: var(--vermilion); }

        /* Article */
        article h1 { font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem; line-height: 1.3; color: var(--black); }
        article h2 { font-size: 1.4rem; font-weight: 600; margin: 2rem 0 1rem; color: var(--black); }
        article h3 { font-size: 1.1rem; font-weight: 600; margin: 1.5rem 0 0.75rem; color: var(--black); }
        article p { margin-bottom: 1rem; color: var(--dark-grey); }
        article ul, article ol { margin: 1rem 0 1rem 1.5rem; color: var(--dark-grey); }
        article li { margin-bottom: 0.5rem; }
        article strong { color: var(--black); }
        article code { font-family: "SF Mono", Monaco, monospace; font-size: 0.9em; background: #e8e8e8; padding: 0.15em 0.4em; border-radius: 3px; }
        article pre { margin: 1rem 0; border-radius: 6px; overflow-x: auto; background: #2d2d2d; padding: 1rem; }
        article pre code { background: none; padding: 0; font-size: 0.75em; white-space: pre !important; counter-reset: line; display: block; color: #ccc; }
        article pre code .line { counter-increment: line; }
        article pre code .line::before { content: counter(line); display: inline-block; width: 2.5em; margin-right: 1em; text-align: right; color: #666; user-select: none; }
        .code-toolbar { display: flex; justify-content: flex-start; padding: 0.35rem 0.5rem; background: #3a3a3a; border-radius: 6px 6px 0 0; }
        .code-toolbar + pre { margin-top: 0; border-radius: 0 0 6px 6px; }
        .copy-btn { padding: 0.2rem 0.5rem; font-size: 0.7rem; background: #555; color: #fff; border: none; border-radius: 3px; cursor: pointer; transition: all 0.2s; }
        .copy-btn:hover, .copy-btn:active { background: #777; }
        .copy-btn.copied { background: #2a2; }
        article blockquote { border-left: 3px solid var(--vermilion); padding-left: 1rem; margin: 1rem 0; color: #666; font-style: italic; }
        article hr { border: none; border-top: 1px solid #ddd; margin: 2rem 0; }
        article table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem; }
        article th, article td { border: 1px solid #ddd; padding: 0.5rem 0.75rem; text-align: left; }
        article th { background: #e8e8e8; font-weight: 600; }
        article img { max-width: 100%; height: auto; display: block; margin: 1.5rem 0; border-radius: 6px; }

        .loading { text-align: center; padding: 3rem; color: #888; }
        .error { color: var(--vermilion); }

        /* KaTeX math styles */
        .katex-display { overflow-x: auto; overflow-y: hidden; padding: 0.5rem 0; }
        .katex { font-size: 1.1em; }

        /* Responsive */
        @media (max-width: 900px) {
            .sidebar { position: relative; width: 100%; height: auto; padding: 2rem 1.5rem 1rem; }
            .social-links { flex-direction: row; flex-wrap: wrap; justify-content: center; }
            .social-links a, .social-links .orcid-link { width: auto; padding: 0.5rem; font-size: 0; gap: 0; }
            .social-links svg { width: 24px; height: 24px; }
            .social-links .hide-mobile { display: none; }
            .sidebar-footer { margin-top: 1rem; }
            .content { margin-left: 0; padding: 2rem 1rem; }
        }
        @media (max-width: 480px) {
            .sidebar { padding: 1.5rem 1rem 1rem; }
            .avatar { width: 80px; height: 80px; }
            h1 { font-size: 1.4rem; }
            article h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

<div class="layout">
    <aside class="sidebar" id="sidebar-content"></aside>
    <script src="/components/sidebar.js"></script>

    <main class="content">
        <a href="/blog/" class="back-link">â† Back to Blog</a>
        <article>
<hr>
<h2>date: 2024-01-01
tags: [ai, ai, python, fastapi, system design, devops, openai]
legacy: true</h2>
<h1>Nighthawksé¡¹ç›®æ­ç§˜ï¼šæ„å»ºä¸‹ä¸€ä»£AIæ™ºèƒ½ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ</h1>
<ul>
<li><strong>ğŸ¤– AIé©±åŠ¨çš„è°ƒåº¦</strong>ï¼šé›†æˆOpenAI GPTå’ŒGraphitiçŸ¥è¯†å›¾è°±ï¼Œå®ç°ä»è‡ªç„¶è¯­è¨€åˆ°Cronè¡¨è¾¾å¼çš„æ™ºèƒ½è½¬æ¢ã€‚</li>
<li><strong>ğŸ§  ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ‰§è¡Œ</strong>ï¼šä»»åŠ¡æ‰§è¡Œä¸å†æ˜¯å­¤ç«‹çš„ï¼Œç³»ç»Ÿèƒ½å¤Ÿè®°å¿†å†å²æ‰§è¡Œæ¨¡å¼ï¼Œå¹¶æ ¹æ®ä¸Šä¸‹æ–‡è¿›è¡Œä¼˜åŒ–ã€‚</li>
<li><strong>ğŸ—ï¸ ä¼ä¸šçº§æ¶æ„</strong>ï¼šåŸºäºFastAPIæ„å»ºï¼Œé‡‡ç”¨å¾®æœåŠ¡è®¾è®¡ï¼Œæ”¯æŒDockerå’ŒKubernetesè¿›è¡Œé«˜å¯ç”¨ã€å¯æ‰©å±•çš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚</li>
<li><strong>ğŸ“Š å…¨é¢å¯è§‚æµ‹æ€§</strong>ï¼šæ·±åº¦é›†æˆPrometheuså’ŒGrafanaï¼Œæä¾›ä»åº”ç”¨åˆ°ç³»ç»Ÿçš„å…¨æ–¹ä½ç›‘æ§ã€‚</li>
<li><strong>ğŸ”’ å¤šå±‚å®‰å…¨é˜²æŠ¤</strong>ï¼šæä¾›JWTã€APIå¯†é’¥ã€è§’è‰²æƒé™æ§åˆ¶ç­‰å…¨é¢çš„å®‰å…¨æœºåˆ¶ã€‚</li>
</ul>
<h2>ç³»ç»Ÿæ¶æ„æ·±åº¦å‰–æ</h2>
<p>Nighthawksçš„æ¶æ„è®¾è®¡éµå¾ªé«˜å¯ç”¨ã€å¯æ‰©å±•ã€å®‰å…¨å¯é çš„åŸåˆ™ã€‚ä¸‹é¢æ˜¯å…¶åˆ†å±‚æ¶æ„çš„æ¦‚è§ˆã€‚</p>
<pre><code><span class="line"></span>
<span class="line">+--------------------------------+</span>
<span class="line">|      ç”¨æˆ·ç•Œé¢ä¸æ¥å…¥å±‚          |</span>
<span class="line">|  +-----------+   +-----------+ |</span>
<span class="line">|  | Webç•Œé¢   |-->| RESTful API | |</span>
<span class="line">|  +-----------+   +-----------+ |</span>
<span class="line">+--------------------------------+</span>
<span class="line">                 |</span>
<span class="line">                 v</span>
<span class="line">+--------------------------------+</span>
<span class="line">|      åº”ç”¨æœåŠ¡å±‚ (FastAPI)      |</span>
<span class="line">|  +-----------+                 |</span>
<span class="line">|  |  ä¸»åº”ç”¨   |-----------------+</span>
<span class="line">|  +-----------+                 |</span>
<span class="line">|   | |   |   |                  |</span>
<span class="line">|   v v   v   v                  |</span>
<span class="line">| [è®¤è¯][è°ƒåº¦å™¨][NLP][æŒ‡æ ‡]      |</span>
<span class="line">+--------------------------------+</span>
<span class="line">    |      |      |      |</span>
<span class="line">    |      |      |      +------>[Prometheus]-->[Grafana]</span>
<span class="line">    |      |      |</span>
<span class="line">    |      |      +------------->[AIæ™ºèƒ½å±‚: OpenAI, Graphiti]</span>
<span class="line">    |      |</span>
<span class="line">    |      +--------------------->[AI Agent]</span>
<span class="line">    |      +--------------------->[æ‰§è¡Œæ—¥å¿—]</span>
<span class="line">    |</span>
<span class="line">    +---------------------------->[æ•°æ®å­˜å‚¨: PostgreSQL, Redis]</span>
<span class="line"></span></code></pre>

<h3>å…³é”®æ¨¡å—è§£æ</h3>
<ol>
<li><p><strong>è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å— (NLP)</strong>
è¿™æ˜¯ç³»ç»Ÿçš„â€œå¤§è„‘â€ã€‚å½“ç”¨æˆ·è¾“å…¥ &quot;æ¯å‘¨äº”ä¸‹åˆ5ç‚¹ç”Ÿæˆå¹¶å‘é€é”€å”®æŠ¥å‘Š&quot; æ—¶ï¼Œè¯¥æ¨¡å—ä¼šè°ƒç”¨OpenAI GPTæ¨¡å‹ï¼Œä¸ä»…è§£æå‡ºCronè¡¨è¾¾å¼ <code>0 17 * * 5</code>ï¼Œè¿˜ä¼šæå–å‡ºæ ¸å¿ƒä»»åŠ¡ <code>ç”Ÿæˆå¹¶å‘é€é”€å”®æŠ¥å‘Š</code> ä½œä¸ºAI Agentçš„æ‰§è¡ŒæŒ‡ä»¤ã€‚æˆ‘ä»¬é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„Prompt Engineeringï¼Œä½¿å…¶è§£æå‡†ç¡®ç‡è¾¾åˆ°äº†95%ä»¥ä¸Šã€‚</p>
</li>
<li><p><strong>AI Agentä¸çŸ¥è¯†å›¾è°±</strong>
æ¯ä¸ªä»»åŠ¡éƒ½ç”±ä¸€ä¸ªç‹¬ç«‹çš„AI Agentè´Ÿè´£æ‰§è¡Œã€‚è¿™ä¸ªAgentåœ¨æ‰§è¡Œå‰ä¼šæŸ¥è¯¢<strong>GraphitiçŸ¥è¯†å›¾è°±</strong>ï¼Œè·å–ä¸è¯¥ä»»åŠ¡ç›¸å…³çš„å†å²ä¿¡æ¯ã€ç”¨æˆ·åå¥½æˆ–ä¸Šä¸‹æ–‡æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¹‹å‰çš„æŠ¥å‘Šå› æ•°æ®æºå»¶è¿Ÿè€Œå¤±è´¥ï¼ŒAgentå¯èƒ½ä¼šè‡ªåŠ¨å­¦ä¹ åˆ°åœ¨æ‰§è¡Œå‰å…ˆæ£€æŸ¥æ•°æ®æºçŠ¶æ€ã€‚è¿™ç§æœºåˆ¶ä½¿å¾—Nighthawkså…·å¤‡äº†æŒç»­å­¦ä¹ å’Œè¿›åŒ–çš„èƒ½åŠ›ã€‚</p>
</li>
<li><p><strong>ä»»åŠ¡è°ƒåº¦å™¨ (APScheduler)</strong>
æˆ‘ä»¬é€‰æ‹©APSchedulerä½œä¸ºåº•å±‚çš„æ‰§è¡Œå¼•æ“ï¼Œå®ƒæä¾›äº†ç¨³å®šå¯é çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦èƒ½åŠ›ã€‚AIå±‚è´Ÿè´£â€œå†³å®šåšä»€ä¹ˆå’Œä»€ä¹ˆæ—¶å€™åšâ€ï¼Œè€Œè°ƒåº¦å™¨åˆ™è´Ÿè´£â€œå‡†æ—¶æ‰§è¡Œâ€ã€‚</p>
</li>
<li><p><strong>æ•°æ®æ¨¡å‹ (SQLModel)</strong>
æˆ‘ä»¬ä½¿ç”¨SQLModelæ¥å®šä¹‰æ•°æ®ç»“æ„ï¼Œå®ƒç»“åˆäº†Pydanticå’ŒSQLAlchemyçš„ä¼˜ç‚¹ï¼Œæä¾›äº†ç±»å‹å®‰å…¨çš„ORMæ“ä½œï¼Œæå¤§åœ°æå‡äº†å¼€å‘æ•ˆç‡å’Œä»£ç å¥å£®æ€§ã€‚</p>
</li>
</ol>
<h2>æŠ€æœ¯æ ˆäº®ç‚¹</h2>
<table>
<thead>
<tr>
<th>å±‚çº§</th>
<th>æŠ€æœ¯é€‰å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Webæ¡†æ¶</strong></td>
<td>FastAPI</td>
<td>æä¾›äº†æ— ä¸ä¼¦æ¯”çš„æ€§èƒ½å’Œå¼‚æ­¥æ”¯æŒï¼Œæ˜¯æ„å»ºé«˜æ€§èƒ½APIçš„ç†æƒ³é€‰æ‹©ã€‚</td>
</tr>
<tr>
<td><strong>AIå¼•æ“</strong></td>
<td>OpenAI GPT + Graphiti</td>
<td>GPTè´Ÿè´£ç†è§£æ„å›¾ï¼ŒGraphitiè´Ÿè´£æ²‰æ·€çŸ¥è¯†ï¼ŒäºŒè€…ç»“åˆæ„æˆäº†å¼ºå¤§çš„æ™ºèƒ½æ ¸å¿ƒã€‚</td>
</tr>
<tr>
<td><strong>ä»»åŠ¡è°ƒåº¦</strong></td>
<td>APScheduler</td>
<td>æˆç†Ÿã€ç¨³å®šï¼Œæ”¯æŒå¤šç§è§¦å‘å™¨å’Œåˆ†å¸ƒå¼éƒ¨ç½²ã€‚</td>
</tr>
<tr>
<td><strong>å®¹å™¨åŒ–</strong></td>
<td>Docker + Kubernetes</td>
<td>å®ç°äº†æ ‡å‡†åŒ–çš„éƒ¨ç½²å’Œç®¡ç†ï¼Œé€šè¿‡HPAå¯ä»¥è½»æ¾å®ç°è‡ªåŠ¨æ°´å¹³æ‰©å±•ã€‚</td>
</tr>
<tr>
<td><strong>ç›‘æ§</strong></td>
<td>Prometheus + Grafana</td>
<td>æä¾›äº†å¼ºå¤§çš„å¯è§‚æµ‹æ€§ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå®æ—¶æ´å¯Ÿç³»ç»ŸçŠ¶æ€å’Œæ€§èƒ½ç“¶é¢ˆã€‚</td>
</tr>
</tbody></table>
<h2>ä»æƒ³æ³•åˆ°ç°å®ï¼šä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œçœ‹çœ‹Nighthawksæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p><strong>1. ç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼š</strong></p>
<pre><code class="language-bash"><span class="line">curl -X POST http://localhost:9527/api/v1/nlp/parse \</span>
<span class="line">  -d &#39;{&quot;text&quot;: &quot;æ¯ä¸ªå·¥ä½œæ—¥çš„æ—©ä¸Š9ç‚¹ï¼Œæ£€æŸ¥æœåŠ¡å™¨å¥åº·çŠ¶å†µå¹¶å‘é€é‚®ä»¶é€šçŸ¥&quot;}&#39;</span></code></pre>
<p><strong>2. Nighthawksçš„AIè¿›è¡Œè§£æï¼š</strong></p>
<p>ç³»ç»Ÿè¿”å›ç»“æ„åŒ–çš„ä»»åŠ¡å®šä¹‰ï¼š</p>
<pre><code class="language-json"><span class="line">{</span>
<span class="line">  &quot;success&quot;: true,</span>
<span class="line">  &quot;task_name&quot;: &quot;æœåŠ¡å™¨å¥åº·æ£€æŸ¥&quot;,</span>
<span class="line">  &quot;cron_expression&quot;: &quot;0 9 * * 1-5&quot;,</span>
<span class="line">  &quot;agent_prompt&quot;: &quot;æ£€æŸ¥æœåŠ¡å™¨å¥åº·çŠ¶å†µï¼Œå¹¶å°†ç»“æœé€šè¿‡é‚®ä»¶å‘é€ç»™ç®¡ç†å‘˜ã€‚&quot;,</span>
<span class="line">  &quot;confidence&quot;: 0.98</span>
<span class="line">}</span></code></pre>
<p><strong>3. åˆ›å»ºå¹¶è°ƒåº¦ä»»åŠ¡ï¼š</strong></p>
<p>ç”¨æˆ·ç¡®è®¤åï¼Œè¯¥ä»»åŠ¡è¢«æŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼Œå¹¶ç”±APSchedulerè¿›è¡Œè°ƒåº¦ã€‚</p>
<p><strong>4. ä»»åŠ¡æ‰§è¡Œï¼š</strong></p>
<p>åœ¨æ¯ä¸ªå·¥ä½œæ—¥çš„æ—©ä¸Š9ç‚¹ï¼Œè°ƒåº¦å™¨è§¦å‘å¯¹åº”çš„AI Agentã€‚Agenté¦–å…ˆæŸ¥è¯¢çŸ¥è¯†å›¾è°±ï¼Œå¯èƒ½ä¼šå‘ç°â€œä¸Šå‘¨çš„æœåŠ¡å™¨Båœ¨9ç‚¹æ—¶CPUå ç”¨ç‡å¾ˆé«˜â€ï¼Œäºæ˜¯å®ƒä¼šä¼˜å…ˆæ£€æŸ¥æœåŠ¡å™¨Bã€‚æ‰§è¡Œå®Œå¥åº·æ£€æŸ¥åï¼Œå®ƒä¼šç”ŸæˆæŠ¥å‘Šå¹¶é€šè¿‡é‚®ä»¶å‘é€ã€‚æ‰€æœ‰æ‰§è¡Œçš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬Tokenæ¶ˆè€—ã€æ‰§è¡Œæ—¶é•¿ç­‰ï¼Œéƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ç”¨äºæœªæ¥çš„ä¼˜åŒ–ã€‚</p>
<h2>ç»“è¯­</h2>
<p>Nighthawksé¡¹ç›®ä¸ä»…ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯ä¸Šçš„æ¢ç´¢ï¼Œæ›´æ˜¯æˆ‘ä»¬å¯¹äºæœªæ¥è‡ªåŠ¨åŒ–å·¥ä½œæ¨¡å¼çš„ä¸€æ¬¡æ€è€ƒã€‚å®ƒè¯æ˜äº†é€šè¿‡å°†å¤§å‹è¯­è¨€æ¨¡å‹ã€çŸ¥è¯†å›¾è°±ä¸ä¼ ç»Ÿè½¯ä»¶å·¥ç¨‹ç›¸ç»“åˆï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ›é€ å‡ºè¿œæ¯”ä»¥å¾€æ›´æ™ºèƒ½ã€æ›´äººæ€§åŒ–çš„å·¥å…·ã€‚</p>
<p>æˆ‘ä»¬ç›¸ä¿¡ï¼Œæœªæ¥çš„è½¯ä»¶å°†ä¸å†ä»…ä»…æ˜¯å†°å†·çš„æŒ‡ä»¤æ‰§è¡Œè€…ï¼Œè€Œæ˜¯èƒ½å¤Ÿç†è§£ã€å­¦ä¹ å¹¶ä¸äººç±»é«˜æ•ˆåä½œçš„æ™ºèƒ½ä¼™ä¼´ã€‚Nighthawksæ­£æ˜¯æœç€è¿™ä¸ªæ–¹å‘è¿ˆå‡ºçš„åšå®ä¸€æ­¥ã€‚</p>

    </article>
    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/prismjs@1/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script>
<script>
Prism.highlightAll();
document.querySelectorAll('article pre').forEach(pre => {
    const code = pre.querySelector('code');
    if (!code) return;
    const toolbar = document.createElement('div');
    toolbar.className = 'code-toolbar';
    const btn = document.createElement('button');
    btn.className = 'copy-btn';
    btn.textContent = 'Copy';
    btn.onclick = () => {
        navigator.clipboard.writeText(code.textContent).then(() => {
            btn.textContent = 'Copied!';
            btn.classList.add('copied');
            setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
        });
    };
    toolbar.appendChild(btn);
    pre.parentNode.insertBefore(toolbar, pre);
});
</script>
</body>
</html>