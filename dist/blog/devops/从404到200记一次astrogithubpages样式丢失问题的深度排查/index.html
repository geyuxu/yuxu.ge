<!DOCTYPE html><html lang="zh"> <head><!-- Global Metadata --><meta charset="utf-8"><!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">--><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"><link rel="shortcut icon" href="/favicon.png" type="image/png"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Ge Yuxu • AI &#38; Engineering" href="https://geyuxu.com/rss.xml"><meta name="generator" content="Astro v5.5.6"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://geyuxu.com/blog/devops/%E4%BB%8E404%E5%88%B0200%E8%AE%B0%E4%B8%80%E6%AC%A1astrogithubpages%E6%A0%B7%E5%BC%8F%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98%E7%9A%84%E6%B7%B1%E5%BA%A6%E6%8E%92%E6%9F%A5/"><!-- Primary Meta Tags --><title>从 404 到 200：记一次 Astro + GitHub Pages 样式丢失问题的深度排查</title><meta name="title" content="从 404 到 200：记一次 Astro + GitHub Pages 样式丢失问题的深度排查"><meta name="description"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://geyuxu.com/blog/devops/%E4%BB%8E404%E5%88%B0200%E8%AE%B0%E4%B8%80%E6%AC%A1astrogithubpages%E6%A0%B7%E5%BC%8F%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98%E7%9A%84%E6%B7%B1%E5%BA%A6%E6%8E%92%E6%9F%A5/"><meta property="og:title" content="从 404 到 200：记一次 Astro + GitHub Pages 样式丢失问题的深度排查"><meta property="og:description"><meta property="og:image" content="https://geyuxu.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://geyuxu.com/blog/devops/%E4%BB%8E404%E5%88%B0200%E8%AE%B0%E4%B8%80%E6%AC%A1astrogithubpages%E6%A0%B7%E5%BC%8F%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98%E7%9A%84%E6%B7%B1%E5%BA%A6%E6%8E%92%E6%9F%A5/"><meta property="twitter:title" content="从 404 到 200：记一次 Astro + GitHub Pages 样式丢失问题的深度排查"><meta property="twitter:description"><meta property="twitter:image" content="https://geyuxu.com/blog-placeholder-1.jpg"><script src="/js/jquery-3.7.1.min.js"></script><script src="/js/copy-code-button.js" defer></script><!-- Dify Chatbot Configuration --><script>
 window.difyChatbotConfig = {
  token: 'VgrjCAto93bjE0MW',
  systemVariables: {
    // user_id: 'YOU CAN DEFINE USER ID HERE',
    // conversation_id: 'YOU CAN DEFINE CONVERSATION ID HERE, IT MUST BE A VALID UUID',
  },
  userVariables: {
    // avatar_url: 'YOU CAN DEFINE USER AVATAR URL HERE',
    // name: 'YOU CAN DEFINE USER NAME HERE',
  },
 }
</script><!-- Dify Chatbot Script --><script src="https://udify.app/embed.min.js" id="VgrjCAto93bjE0MW" defer>
</script><!-- Dify Chatbot Custom Styles --><script is:global>
	window.addEventListener('DOMContentLoaded', () => {
		$('.toc ol').css({
		'list-style': 'none',   // 隐藏 1. 2. 3.
		'margin': 0,
		'padding-left': 0,       // 可按需调整
		});
		$('.toc ol > li').css({
		'list-style': 'none',   // 隐藏 1. 2. 3.
		'padding-left': 10
		});
        $('.sidebar').append($('.toc'));
      });
	</script><link rel="stylesheet" href="/_astro/assets-slug_.BFPovWfH.css">
<style>a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}header[data-astro-cid-3ef6ksr2]{margin:0;padding:0 1em;background:#fff;box-shadow:0 2px 8px rgba(var(--black),5%)}h2[data-astro-cid-3ef6ksr2]{margin:0;font-size:1em}h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2],h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none}nav[data-astro-cid-3ef6ksr2]{display:flex;align-items:center;justify-content:space-between}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{padding:1em .5em;color:var(--black);border-bottom:4px solid transparent;text-decoration:none}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none;border-bottom-color:var(--accent)}.social-links[data-astro-cid-3ef6ksr2],.social-links[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{display:flex}@media (max-width: 720px){.social-links[data-astro-cid-3ef6ksr2]{display:none}}footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}
.statement[data-astro-cid-uffxixac]{font-size:10px;color:gray}@media (max-width: 640px){.statement[data-astro-cid-uffxixac]{font-size:6px;color:gray}}
</style></head> <body> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <!--<h2><a href="/">{SITE_TITLE}</a></h2>--> <h2 data-astro-cid-3ef6ksr2><a style="padding-left:0;color:blue;" href="/" data-astro-cid-3ef6ksr2>Ge Yuxu<br data-astro-cid-3ef6ksr2>AI & Engineering</a></h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Home </a>  <a href="/blog/1" class="active" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Blog </a>  <a href="/series" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Series </a>  <a href="/projects" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Projects </a>  </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://github.com/geyuxu" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Ge Yuxu's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="https://www.linkedin.com/in/geyuxu/" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Ge Yuxu's LinkedIn profile</span> <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" data-astro-cid-3ef6ksr2> <path fill="currentColor" d="M20.447 20.452H17.2v-5.569c0-1.328-.025-3.039-1.852-3.039-1.853 0-2.136 1.447-2.136 2.942v5.666h-3.248V9h3.122v1.561h.045c.435-.823 1.498-1.688 3.083-1.688 3.295 0 3.903 2.17 3.903 4.989v6.59zM5.337 7.433a1.882 1.882 0 110-3.764 1.882 1.882 0 010 3.764zm1.626 13.019H3.708V9h3.255v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.226.792 24 1.771 24h20.451C23.2 24 24 23.226 24 22.271V1.729C24 .774 23.2 0 22.222 0z" data-astro-cid-3ef6ksr2></path> </svg> </a> <a href="mailto:ngzerone@hotmail.com" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Send email to Ge Yuxu</span> <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" data-astro-cid-3ef6ksr2> <path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" data-astro-cid-3ef6ksr2></path> </svg> </a> </div> </nav> <!-- Microsoft Clarity --> <script type="text/javascript">
		(function(c,l,a,r,i,t,y){
			c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
			t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
			y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
		})(window, document, "clarity", "script", "rc2w96osp6");
	</script> </header>  <main class="page"> <!-- 左侧栏 --> <aside class="sidebar"> <div class="meta"> <b>从 404 到 200：记一次 Astro + GitHub Pages 样式丢失问题的深度排查</b> <p><time datetime="2025-07-24T21:35:00.000Z"> 2025/07/25 05:35:00 </time></p>   </div> <hr> <br> </aside> <!-- 右侧正文区域（flex 居中） --> <div class="content-wrapper"> <article class="prose">  <nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#摘要">摘要</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#一问题浮现消失的-css">一、问题浮现：消失的 CSS</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#二漫漫排查路错误的假设">二、漫漫排查路：错误的假设</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#假设-1jekyll-捣乱">假设 1：Jekyll 捣乱？</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#假设-2目录访问问题">假设 2：目录访问问题？</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#三柳暗花明定位真正原因">三、柳暗花明：定位真正原因</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#四终极解决方案自定义-astro-构建产物命名">四、终极解决方案：自定义 Astro 构建产物命名</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#配置方案">配置方案</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#代码解释">代码解释</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#验证结果">验证结果</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#五总结与反思">五、总结与反思</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#关键经验">关键经验</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#debug-技巧">Debug 技巧</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#适用场景">适用场景</a></li></ol></li></ol></nav><h2 id="摘要"><a aria-hidden="true" tabindex="-1" href="#摘要"><span class="icon icon-link"></span></a>摘要</h2>
<p>在将我的新 Astro 博客部署到 GitHub Pages 后，我遇到了一个棘手的问题：网站内容可以正常显示，但所有 CSS 样式都无法加载，浏览器控制台里充满了 404 错误。本文记录了我从最初的错误猜想到最终定位并解决问题的完整过程，希望能帮助遇到类似问题的开发者们。</p>
<h2 id="一问题浮现消失的-css"><a aria-hidden="true" tabindex="-1" href="#一问题浮现消失的-css"><span class="icon icon-link"></span></a>一、问题浮现：消失的 CSS</h2>
<p>万事俱备，只欠东风。我用最新的 Astro 框架搭建了个人博客，本地开发一切正常，<code>npm run build</code> 构建也顺利完成。当我兴致勃勃地将 <code>dist</code> 目录下的产物推送到 GitHub Pages 后，现实给了我一记重拳：</p>
<p>网站首页可以访问，但页面是”裸奔”的——没有任何样式。</p>
<p>打开浏览器开发者工具，<code>Console</code> 和 <code>Network</code> 面板清晰地揭示了问题所在：所有的 CSS 文件请求都返回了 <code>404 Not Found</code>。</p>
<p>这些 CSS 文件的路径看起来像这样：</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>https://geyuxu.com/_astro/_slug_.BvCO7WHQ.css</span></span></code></pre>
<p>问题很明确：服务器无法找到 Astro 构建出来的 CSS 文件。但为什么呢？</p>
<h2 id="二漫漫排查路错误的假设"><a aria-hidden="true" tabindex="-1" href="#二漫漫排查路错误的假设"><span class="icon icon-link"></span></a>二、漫漫排查路：错误的假设</h2>
<p>我的排查过程遵循了典型的从易到难、从普遍到特殊的思路，但也因此走了一些弯路。</p>
<h3 id="假设-1jekyll-捣乱"><a aria-hidden="true" tabindex="-1" href="#假设-1jekyll-捣乱"><span class="icon icon-link"></span></a>假设 1：Jekyll 捣乱？</h3>
<p>GitHub Pages 默认使用 Jekyll 来构建网站。Jekyll 有一个众所周知的约定：它会忽略所有以下划线 (<code>_</code>) 开头的目录和文件，因为它们被认为是特殊的，比如 <code>_posts</code>、<code>_includes</code> 等。</p>
<p>Astro 构建产物中的 CSS 目录恰好是 <code>_astro</code>。这看起来就是罪魁祸首！</p>
<p><strong>解决方案尝试</strong>：在仓库的根目录添加一个空的 <code>.nojekyll</code> 文件。这个文件的作用是告诉 GitHub Pages：“请不要用 Jekyll 处理我的网站，我这是一个纯静态站点。”</p>
<p><strong>结果</strong>：清理缓存，重新部署，问题依旧。<code>_astro</code> 目录下的 CSS 文件仍然是 404。</p>
<p>这个结果让我很困惑。<code>.nojekyll</code> 应该已经禁用了 Jekyll，为什么以下划线开头的资源还是无法访问？</p>
<h3 id="假设-2目录访问问题"><a aria-hidden="true" tabindex="-1" href="#假设-2目录访问问题"><span class="icon icon-link"></span></a>假设 2：目录访问问题？</h3>
<p>我开始怀疑是不是 <code>_astro</code> 目录本身因为某些服务器配置而无法被直接访问。或许它缺少一个 <code>index.html</code> 文件？</p>
<p><strong>解决方案尝试</strong>：在 <code>dist/_astro/</code> 目录下手动创建一个空的 <code>index.html</code> 文件，然后重新部署。</p>
<p><strong>结果</strong>：毫无悬念，失败了。这本就是一个不切实际的猜测，因为我们是请求具体的文件，而不是访问目录。</p>
<h2 id="三柳暗花明定位真正原因"><a aria-hidden="true" tabindex="-1" href="#三柳暗花明定位真正原因"><span class="icon icon-link"></span></a>三、柳暗花明：定位真正原因</h2>
<p>在排除了最常见的 Jekyll 问题后，我开始重新审视那个神秘的 404。<code>.nojekyll</code> 文件确实禁用了 Jekyll 的构建过程，但它并不能覆盖 GitHub Pages 服务器的所有规则。</p>
<p>经过一番搜索和验证，我终于发现了问题的关键：</p>
<blockquote>
<p><strong>GitHub Pages (或其底层的 Web 服务器) 有一条更深层的规则：它会阻止所有对以下划线 (<code>_</code>) 开头的文件的直接访问，这似乎是一个安全或约定策略，独立于 Jekyll 的行为。</strong></p>
</blockquote>
<p>Astro 生成的 CSS 文件名，例如 <code>_slug_.BvCO7WHQ.css</code>，恰好也以下划线开头！这才是 <code>.nojekyll</code> 文件无效的根本原因。我们不仅要处理 <code>_astro</code> 目录，还要处理文件名本身。</p>
<h2 id="四终极解决方案自定义-astro-构建产物命名"><a aria-hidden="true" tabindex="-1" href="#四终极解决方案自定义-astro-构建产物命名"><span class="icon icon-link"></span></a>四、终极解决方案：自定义 Astro 构建产物命名</h2>
<p>既然无法改变 GitHub Pages 的规则，那我们就只能改变我们自己的产物。我们需要让 Astro 在构建时，不要生成以下划线开头的文件名。</p>
<p>幸运的是，Astro 底层使用 Vite 作为其构建工具，并向我们开放了 Vite 的配置接口。我们可以通过修改 <code>astro.config.mjs</code> 文件来定制构建行为。</p>
<h3 id="配置方案"><a aria-hidden="true" tabindex="-1" href="#配置方案"><span class="icon icon-link"></span></a>配置方案</h3>
<p>具体的配置项是 <code>vite.build.rollupOptions.output.assetFileNames</code>。它可以让我们完全控制资源文件（如 CSS、图片等）的输出路径和名称。</p>
<p>打开项目根目录下的 <code>astro.config.mjs</code> 文件，添加 <code>vite</code> 配置项：</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// astro.config.mjs</span></span>
<span class="line"><span style="color:#D73A49">import</span><span style="color:#24292E"> { defineConfig } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> 'astro/config'</span><span style="color:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">export</span><span style="color:#D73A49"> default</span><span style="color:#6F42C1"> defineConfig</span><span style="color:#24292E">({</span></span>
<span class="line"><span style="color:#24292E">  site: </span><span style="color:#032F62">'https://geyuxu.com'</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#6A737D">  // ... 其他配置</span></span>
<span class="line"><span style="color:#24292E">  vite: {</span></span>
<span class="line"><span style="color:#24292E">    build: {</span></span>
<span class="line"><span style="color:#24292E">      rollupOptions: {</span></span>
<span class="line"><span style="color:#24292E">        output: {</span></span>
<span class="line"><span style="color:#6A737D">          // 修改资产文件命名规则，避免下划线开头</span></span>
<span class="line"><span style="color:#6F42C1">          assetFileNames</span><span style="color:#24292E">: (</span><span style="color:#E36209">assetInfo</span><span style="color:#24292E">) </span><span style="color:#D73A49">=></span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#005CC5"> info</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> assetInfo.name.</span><span style="color:#6F42C1">split</span><span style="color:#24292E">(</span><span style="color:#032F62">'.'</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#005CC5"> ext</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> info[info.</span><span style="color:#005CC5">length</span><span style="color:#D73A49"> -</span><span style="color:#005CC5"> 1</span><span style="color:#24292E">];</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#005CC5"> name</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> info.</span><span style="color:#6F42C1">slice</span><span style="color:#24292E">(</span><span style="color:#005CC5">0</span><span style="color:#24292E">, </span><span style="color:#D73A49">-</span><span style="color:#005CC5">1</span><span style="color:#24292E">).</span><span style="color:#6F42C1">join</span><span style="color:#24292E">(</span><span style="color:#032F62">'.'</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#6A737D">            // 如果文件名以下划线开头，替换为 'assets-'</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#005CC5"> finalName</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> name.</span><span style="color:#6F42C1">startsWith</span><span style="color:#24292E">(</span><span style="color:#032F62">'_'</span><span style="color:#24292E">) </span><span style="color:#D73A49">?</span><span style="color:#24292E"> name.</span><span style="color:#6F42C1">replace</span><span style="color:#24292E">(</span><span style="color:#032F62">/</span><span style="color:#D73A49">^</span><span style="color:#032F62">_/</span><span style="color:#24292E">, </span><span style="color:#032F62">'assets-'</span><span style="color:#24292E">) </span><span style="color:#D73A49">:</span><span style="color:#24292E"> name;</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#032F62"> `_astro/${</span><span style="color:#24292E">finalName</span><span style="color:#032F62">}.[hash].${</span><span style="color:#24292E">ext</span><span style="color:#032F62">}`</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">          }</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">      }</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">  },</span></span>
<span class="line"><span style="color:#6A737D">  // ... 其他配置如 markdown 等</span></span>
<span class="line"><span style="color:#24292E">});</span></span></code></pre>
<h3 id="代码解释"><a aria-hidden="true" tabindex="-1" href="#代码解释"><span class="icon icon-link"></span></a>代码解释</h3>
<ul>
<li><code>assetFileNames</code> 接受一个函数，该函数为每个资源文件调用</li>
<li><code>assetInfo.name</code> 包含了 Vite 建议的原始文件名，例如 <code>_slug_.BvCO7WHQ.css</code></li>
<li>我们检查 <code>assetInfo.name</code> 是否以 <code>_</code> 开头</li>
<li>如果是，我们使用 <code>replace(/^_/, 'assets-')</code> 将开头的下划线替换为 <code>assets-</code></li>
<li>最终生成的文件名变成了 <code>assets-slug_.BvCO7WHQ.css</code></li>
</ul>
<h3 id="验证结果"><a aria-hidden="true" tabindex="-1" href="#验证结果"><span class="icon icon-link"></span></a>验证结果</h3>
<p>在应用了以上配置后，重新运行 <code>npm run build</code>，然后将 <code>dist</code> 目录部署到 GitHub Pages：</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6F42C1">npm</span><span style="color:#032F62"> run</span><span style="color:#032F62"> build</span></span>
<span class="line"><span style="color:#6F42C1">npm</span><span style="color:#032F62"> run</span><span style="color:#032F62"> deploy</span></span></code></pre>
<p><strong>结果</strong>：成功！CSS 文件现在以 <code>assets-slug_.BvCO7WHQ.css</code> 这样的路径加载，HTTP 状态码从 404 变成了 200。网站样式完美呈现。</p>
<p>我们可以通过以下命令验证：</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6F42C1">curl</span><span style="color:#005CC5"> -I</span><span style="color:#032F62"> https://geyuxu.com/_astro/assets-slug_.BvCO7WHQ.css</span></span></code></pre>
<p>返回：</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>HTTP/2 200 </span></span>
<span class="line"><span>content-type: text/css; charset=utf-8</span></span></code></pre>
<h2 id="五总结与反思"><a aria-hidden="true" tabindex="-1" href="#五总结与反思"><span class="icon icon-link"></span></a>五、总结与反思</h2>
<p>这次调试经历虽然曲折，但收获颇丰：</p>
<h3 id="关键经验"><a aria-hidden="true" tabindex="-1" href="#关键经验"><span class="icon icon-link"></span></a>关键经验</h3>
<ol>
<li>
<p><strong>深入理解平台限制</strong>：不能想当然地认为 <code>.nojekyll</code> 能解决所有问题。需要了解托管平台（GitHub Pages）自身的底层规则，而不仅仅是其表面工具（Jekyll）的规则。</p>
</li>
<li>
<p><strong>从根源解决问题</strong>：与其尝试用各种”补丁”去适应部署环境，不如直接控制构建过程，生成符合环境要求的产物。这是一种更干净、更可维护的解决方案。</p>
</li>
<li>
<p><strong>善用工具的配置能力</strong>：现代前端框架（如 Astro）和构建工具（如 Vite）通常都提供了强大的配置选项。深入阅读文档、了解这些配置项，是解决复杂问题的金钥匙。</p>
</li>
<li>
<p><strong>下划线是特殊字符</strong>：在 Web 开发中，以下划线开头的文件/目录通常有特殊含义（如 Jekyll, Node.js 的私有模块等）。在命名和部署时要特别留意，避免与平台规则冲突。</p>
</li>
</ol>
<h3 id="debug-技巧"><a aria-hidden="true" tabindex="-1" href="#debug-技巧"><span class="icon icon-link"></span></a>Debug 技巧</h3>
<ul>
<li><strong>系统性排查</strong>：从最常见的原因开始，逐步深入</li>
<li><strong>验证假设</strong>：每个解决方案都要实际测试，不能想当然</li>
<li><strong>关注细节</strong>：文件名、路径、HTTP 状态码等细节往往包含关键信息</li>
<li><strong>查阅文档</strong>：当常见解决方案失效时，深入研究工具的配置选项</li>
</ul>
<h3 id="适用场景"><a aria-hidden="true" tabindex="-1" href="#适用场景"><span class="icon icon-link"></span></a>适用场景</h3>
<p>这个解决方案适用于所有遇到类似问题的 Astro + GitHub Pages 部署场景，也可以扩展到其他使用 Vite 构建工具的框架（如 Vue、React 等）在 GitHub Pages 上的部署问题。</p>
<p>希望我的经验能为你节省一些调试时间。Happy coding!</p> <html lang="en" data-astro-cid-uffxixac> <head><!-- Global Metadata --><meta charset="utf-8"><!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">--><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"><link rel="shortcut icon" href="/favicon.png" type="image/png"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Ge Yuxu • AI &#38; Engineering" href="https://geyuxu.com/rss.xml"><meta name="generator" content="Astro v5.5.6"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://geyuxu.com/blog/devops/%E4%BB%8E404%E5%88%B0200%E8%AE%B0%E4%B8%80%E6%AC%A1astrogithubpages%E6%A0%B7%E5%BC%8F%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98%E7%9A%84%E6%B7%B1%E5%BA%A6%E6%8E%92%E6%9F%A5/"><!-- Primary Meta Tags --><title>Ge Yuxu • AI &amp; Engineering</title><meta name="title" content="Ge Yuxu • AI &#38; Engineering"><meta name="description" content="Welcome to my blog!"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://geyuxu.com/blog/devops/%E4%BB%8E404%E5%88%B0200%E8%AE%B0%E4%B8%80%E6%AC%A1astrogithubpages%E6%A0%B7%E5%BC%8F%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98%E7%9A%84%E6%B7%B1%E5%BA%A6%E6%8E%92%E6%9F%A5/"><meta property="og:title" content="Ge Yuxu • AI &#38; Engineering"><meta property="og:description" content="Welcome to my blog!"><meta property="og:image" content="https://geyuxu.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://geyuxu.com/blog/devops/%E4%BB%8E404%E5%88%B0200%E8%AE%B0%E4%B8%80%E6%AC%A1astrogithubpages%E6%A0%B7%E5%BC%8F%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98%E7%9A%84%E6%B7%B1%E5%BA%A6%E6%8E%92%E6%9F%A5/"><meta property="twitter:title" content="Ge Yuxu • AI &#38; Engineering"><meta property="twitter:description" content="Welcome to my blog!"><meta property="twitter:image" content="https://geyuxu.com/blog-placeholder-1.jpg"><script src="/js/jquery-3.7.1.min.js"></script><script src="/js/copy-code-button.js" defer></script><!-- Dify Chatbot Configuration --><script>
 window.difyChatbotConfig = {
  token: 'VgrjCAto93bjE0MW',
  systemVariables: {
    // user_id: 'YOU CAN DEFINE USER ID HERE',
    // conversation_id: 'YOU CAN DEFINE CONVERSATION ID HERE, IT MUST BE A VALID UUID',
  },
  userVariables: {
    // avatar_url: 'YOU CAN DEFINE USER AVATAR URL HERE',
    // name: 'YOU CAN DEFINE USER NAME HERE',
  },
 }
</script><!-- Dify Chatbot Script --><script src="https://udify.app/embed.min.js" id="VgrjCAto93bjE0MW" defer>
</script><!-- Dify Chatbot Custom Styles --></head> <body data-astro-cid-uffxixac>  <div class="statement" data-astro-cid-uffxixac> <blockquote data-astro-cid-uffxixac> <p data-astro-cid-uffxixac><strong data-astro-cid-uffxixac>脱敏说明</strong>：本文所有出现的表名、字段名、接口地址、变量名、IP地址及示例数据等均非真实，仅用于阐述技术思路与实现步骤，示例代码亦非公司真实代码。示例方案亦非公司真实完整方案，仅为本人记忆总结，用于技术学习探讨。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;文中所示任何标识符并不对应实际生产环境中的名称或编号。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;示例&nbsp;SQL、脚本、代码及数据等均为演示用途，不含真实业务数据，也不具备直接运行或复现的完整上下文。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;读者若需在实际项目中参考本文方案，请结合自身业务场景及数据安全规范，使用符合内部命名和权限控制的配置。</p> <p data-astro-cid-uffxixac><strong data-astro-cid-uffxixac>Data Desensitization Notice</strong>: All table names, field names, API endpoints, variable names, IP addresses, and sample data appearing in this article are fictitious and intended solely to illustrate technical concepts and implementation steps. The sample code is not actual company code. The proposed solutions are not complete or actual company solutions but are summarized from the author's memory for technical learning and discussion.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;Any identifiers shown in the text do not correspond to names or numbers in any actual production environment.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;Sample SQL, scripts, code, and data are for demonstration purposes only, do not contain real business data, and lack the full context required for direct execution or reproduction.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;Readers who wish to reference the solutions in this article for actual projects should adapt them to their own business scenarios and data security standards, using configurations that comply with internal naming and access control policies.</p> <p data-astro-cid-uffxixac><strong data-astro-cid-uffxixac>版权声明</strong>：本文版权归原作者所有，未经作者事先书面许可，任何单位或个人不得以任何方式复制、转载、摘编或用于商业用途。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;若需非商业性引用或转载本文内容，请务必注明出处并保持内容完整。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;对因商业使用、篡改或不当引用本文内容所产生的法律纠纷，作者保留追究法律责任的权利。</p> <p data-astro-cid-uffxixac><strong data-astro-cid-uffxixac>Copyright Notice</strong>: The copyright of this article belongs to the original author. Without prior written permission from the author, no entity or individual may copy, reproduce, excerpt, or use it for commercial purposes in any way.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;For non-commercial citation or reproduction of this content, attribution must be given, and the integrity of the content must be maintained.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;The author reserves the right to pursue legal action against any legal disputes arising from the commercial use, alteration, or improper citation of this article's content.</p> <p data-astro-cid-uffxixac><em data-astro-cid-uffxixac>Copyright&nbsp;©&nbsp;1989–Present&nbsp;Ge&nbsp;Yuxu.&nbsp;All&nbsp;Rights&nbsp;Reserved.</em></p> </blockquote> </div></body></html>  </article> </div> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 All rights reserved.
</footer>  </body></html>