<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NumPy åŸºç¡€ä¸å®æˆ˜å…¥é—¨ | Yuxu Ge</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <style>
        :root {
            --black: #111;
            --dark-grey: #444;
            --off-white: #f4f4f4;
            --vermilion: #C41E3A;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--black);
            background-color: var(--off-white);
        }

        a {
            color: var(--vermilion);
            text-decoration: none;
        }

        a:hover {
            opacity: 0.75;
        }

        .layout {
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 320px;
            height: 100vh;
            background: var(--black);
            color: var(--off-white);
            padding: 3rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .sidebar-top {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .avatar {
            display: block;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid var(--vermilion);
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: transform 0.2s ease;
        }

        .avatar:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .name-block {
            margin-bottom: 0.5rem;
        }

        h1 {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--off-white);
        }

        .title-role {
            font-size: 0.9rem;
            color: #888;
            margin-top: 0.25rem;
            font-weight: 400;
        }

        .contact-block {
            margin-top: 2.5rem;
            width: 100%;
        }

        .social-links {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            width: 160px;
            color: var(--off-white);
            opacity: 0.7;
            padding: 0.5rem 0.75rem;
            border-radius: 4px;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .social-links a:hover {
            color: var(--vermilion);
            opacity: 1;
            background: rgba(255, 255, 255, 0.05);
        }

        .social-links svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .social-links .orcid-link {
            font-size: 0.68rem;
            gap: 0.5rem;
            white-space: nowrap;
        }

        .sidebar-footer {
            text-align: center;
            font-size: 0.75rem;
            color: #555;
        }

        /* Content */
        .content {
            margin-left: 320px;
            padding: 3rem 4rem;
            max-width: calc(100vw - 320px - 8rem);
        }

        .back-link {
            display: inline-block;
            font-size: 0.85rem;
            margin-bottom: 2rem;
            color: var(--dark-grey);
        }

        .back-link:hover {
            color: var(--vermilion);
        }

        /* Article */
        article h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            line-height: 1.3;
            color: var(--black);
        }

        article h2 {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 2rem 0 1rem;
            color: var(--black);
        }

        article h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 1.5rem 0 0.75rem;
            color: var(--black);
        }

        article p {
            margin-bottom: 1rem;
            color: var(--dark-grey);
        }

        article ul,
        article ol {
            margin: 1rem 0 1rem 1.5rem;
            color: var(--dark-grey);
        }

        article li {
            margin-bottom: 0.5rem;
        }

        article strong {
            color: var(--black);
        }

        article code {
            font-family: "SF Mono", Monaco, monospace;
            font-size: 0.9em;
            background: #e8e8e8;
            padding: 0.15em 0.4em;
            border-radius: 3px;
        }

        article pre {
            margin: 1rem 0;
            border-radius: 6px;
            overflow-x: auto;
            background: #2d2d2d;
            padding: 1rem;
        }

        article pre code {
            background: none;
            padding: 0;
            font-size: 0.75em;
            white-space: pre !important;
            counter-reset: line;
            display: block;
            color: #ccc;
        }

        article pre code .line {
            counter-increment: line;
        }

        article pre code .line::before {
            content: counter(line);
            display: inline-block;
            width: 2.5em;
            margin-right: 1em;
            text-align: right;
            color: #666;
            user-select: none;
        }

        .code-toolbar {
            display: flex;
            justify-content: flex-start;
            padding: 0.35rem 0.5rem;
            background: #3a3a3a;
            border-radius: 6px 6px 0 0;
        }

        .code-toolbar+pre {
            margin-top: 0;
            border-radius: 0 0 6px 6px;
        }

        .copy-btn {
            padding: 0.2rem 0.5rem;
            font-size: 0.7rem;
            background: #555;
            color: #fff;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover,
        .copy-btn:active {
            background: #777;
        }

        .copy-btn.copied {
            background: #2a2;
        }

        article blockquote {
            border-left: 3px solid var(--vermilion);
            padding-left: 1rem;
            margin: 1rem 0;
            color: #666;
            font-style: italic;
        }

        article hr {
            border: none;
            border-top: 1px solid #ddd;
            margin: 2rem 0;
        }

        article table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        article th,
        article td {
            border: 1px solid #ddd;
            padding: 0.5rem 0.75rem;
            text-align: left;
        }

        article th {
            background: #e8e8e8;
            font-weight: 600;
        }

        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 1.5rem 0;
            border-radius: 6px;
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: #888;
        }

        .error {
            color: var(--vermilion);
        }

        /* Language Selector */
        .lang-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding: 0.75rem 1rem;
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.85rem;
        }

        .lang-selector-label {
            color: #666;
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .lang-selector-label svg {
            width: 16px;
            height: 16px;
        }

        .lang-select {
            padding: 0.4rem 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            font-size: 0.85rem;
            cursor: pointer;
            min-width: 140px;
        }

        .lang-select:focus {
            outline: none;
            border-color: var(--vermilion);
        }

        .lang-status {
            font-size: 0.8rem;
            color: #888;
            margin-left: auto;
        }

        .lang-status.translating {
            color: var(--vermilion);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .lang-status.translating::before {
            content: '';
            width: 14px;
            height: 14px;
            border: 2px solid #f0f0f0;
            border-top-color: var(--vermilion);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .lang-status.cached {
            color: #4CAF50;
        }

        .lang-original-btn {
            padding: 0.35rem 0.6rem;
            font-size: 0.75rem;
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            color: #666;
            transition: all 0.2s;
        }

        .lang-original-btn:hover {
            background: #e0e0e0;
            color: #333;
        }

        @media (max-width: 600px) {
            .lang-selector {
                flex-wrap: wrap;
            }
            .lang-status {
                width: 100%;
                margin-left: 0;
                margin-top: 0.5rem;
            }
        }

        /* KaTeX math styles */
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            padding: 0.5rem 0;
        }

        .katex {
            font-size: 1.1em;
        }

        /* Jupyter Notebook Styles */
        .notebook-container {
            margin-top: 1rem;
        }

        .notebook-download {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            margin-bottom: 1.5rem;
            background: var(--black);
            color: var(--off-white);
            border-radius: 4px;
            font-size: 0.85rem;
            transition: opacity 0.2s;
        }

        .notebook-download:hover {
            opacity: 0.8;
            color: var(--off-white);
        }

        .notebook-download svg {
            width: 16px;
            height: 16px;
        }

        .nb-cell {
            margin-bottom: 1.5rem;
        }

        .nb-cell-code .nb-source {
            background: #2d2d2d;
            border-radius: 6px;
            overflow-x: auto;
        }

        .nb-cell-code .nb-source pre {
            margin: 0;
            padding: 1rem;
            color: #ccc;
            font-family: "SF Mono", Monaco, monospace;
            font-size: 0.85em;
        }

        .nb-cell-code .nb-source code {
            background: none;
            padding: 0;
        }

        .nb-output {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 0.75rem;
            margin-top: 0.5rem;
        }

        .nb-output pre {
            margin: 0;
            padding: 0;
            background: transparent;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: "SF Mono", Monaco, monospace;
            font-size: 0.85em;
            color: #222;
        }

        .nb-output img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0.5rem 0;
        }

        .nb-output table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .nb-output th,
        .nb-output td {
            border: 1px solid #ddd;
            padding: 0.5rem;
            text-align: left;
        }

        .nb-output th {
            background: #e8e8e8;
            font-weight: 600;
        }

        .nb-cell-markdown {
            padding: 0;
        }

        .nb-cell-markdown h1:first-child {
            margin-top: 0;
        }

        /* Document Download Button */
        .doc-download {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            margin-bottom: 1.5rem;
            background: var(--black);
            color: var(--off-white);
            border-radius: 4px;
            font-size: 0.85rem;
            transition: opacity 0.2s;
        }

        .doc-download:hover {
            opacity: 0.8;
            color: var(--off-white);
        }

        .doc-download svg {
            width: 16px;
            height: 16px;
        }

        /* PDF Viewer */
        .pdf-container {
            margin-top: 1rem;
        }

        .pdf-viewer {
            width: 100%;
            height: 80vh;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #f5f5f5;
        }

        /* Text File Display */
        .text-container {
            margin-top: 1rem;
        }

        .text-content {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 1.5rem;
            font-family: "SF Mono", Monaco, monospace;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--dark-grey);
            max-height: 80vh;
            overflow-y: auto;
        }

        /* Word Document Display */
        .word-container {
            margin-top: 1rem;
        }

        .word-content {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 2rem;
            line-height: 1.8;
            color: var(--dark-grey);
        }

        .word-content p {
            margin-bottom: 1rem;
        }

        .word-content h1,
        .word-content h2,
        .word-content h3 {
            color: var(--black);
            margin: 1.5rem 0 1rem;
        }

        .word-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .word-content th,
        .word-content td {
            border: 1px solid #ddd;
            padding: 0.5rem;
        }

        .word-content img {
            max-width: 100%;
            height: auto;
        }

        /* Excel Display */
        .excel-container {
            margin-top: 1rem;
        }

        .excel-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .excel-tab {
            padding: 0.5rem 1rem;
            background: #e8e8e8;
            border: none;
            border-radius: 4px 4px 0 0;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .excel-tab.active {
            background: #4CAF50;
            color: white;
        }

        .excel-content {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            overflow-x: auto;
            max-height: 70vh;
            overflow-y: auto;
        }

        .excel-content table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .excel-content th,
        .excel-content td {
            border: 1px solid #ddd;
            padding: 0.4rem 0.6rem;
            text-align: left;
            white-space: nowrap;
        }

        .excel-content th {
            background: #f5f5f5;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .excel-content tr:nth-child(even) {
            background: #fafafa;
        }

        /* PowerPoint Display */
        .ppt-container {
            margin-top: 1rem;
        }

        .ppt-viewer {
            width: 100%;
            height: 80vh;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #f5f5f5;
        }

        /* CSV Display (uses excel styles) */
        .csv-container {
            margin-top: 1rem;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
                padding: 2rem 1.5rem 1rem;
            }

            .social-links {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }

            .social-links a,
            .social-links .orcid-link {
                width: auto;
                padding: 0.5rem;
                font-size: 0;
                gap: 0;
            }

            .social-links svg {
                width: 24px;
                height: 24px;
            }

            .social-links .hide-mobile {
                display: none;
            }

            .sidebar-footer {
                margin-top: 1rem;
            }

            .content {
                margin-left: 0;
                padding: 2rem 1rem;
            }
        }

        @media (max-width: 480px) {
            .sidebar {
                padding: 1.5rem 1rem 1rem;
            }

            .avatar {
                width: 80px;
                height: 80px;
            }

            h1 {
                font-size: 1.4rem;
            }

            article h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>

    <div class="layout">
        <aside class="sidebar" id="sidebar-content"></aside>
        <script src="/components/sidebar.js?v=20260128"></script>

        <main class="content">
            <a href="/blog/" class="back-link">â† Back to Blog</a>

            <!-- Language Selector -->
            <div class="lang-selector" id="lang-selector" style="display: none;">
                <span class="lang-selector-label">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
                    </svg>
                    Language
                </span>
                <select class="lang-select" id="lang-select">
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                    <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                    <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
                    <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                    <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                </select>
                <button class="lang-original-btn" id="lang-original-btn" style="display: none;">Show Original</button>
                <span class="lang-status" id="lang-status"></span>
            </div>

            <article>
<hr>
<h2>date: 2024-01-30
tags: [numpy, python, data]
legacy: true</h2>
<h1>NumPy åŸºç¡€ä¸å®æˆ˜å…¥é—¨</h1>
<blockquote><code>import numpy as np# ä»åˆ—è¡¨åˆ›å»ºä¸€ç»´æ•°ç»„</code><br>
<code>a = np.array([1, 2, 3, 4, 5])       # [1 2 3 4 5] -&gt; 1è¡Œ5åˆ—çš„ä¸€ç»´æ•°ç»„</code><br>
<code>b = np.array((6, 7, 8, 9, 10))     # [ 6  7  8  9 10] -&gt; 1è¡Œ5åˆ—ï¼Œç”±å…ƒç»„åˆ›å»º</code><br>
<code>print(a.dtype, b.shape)            # int64 (5,) æ•°æ®ç±»å‹å’Œå½¢çŠ¶</code></blockquote><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»åˆ—è¡¨å’Œå…ƒç»„åˆ›å»ºäº†ä¸€ç»´æ•°ç»„ a å’Œ bã€‚NumPy è‡ªåŠ¨å°†å…ƒç´ è½¬æ¢ä¸ºåŒä¸€ç§ç±»å‹ï¼ˆè¿™é‡Œéƒ½æ˜¯æ•´æ•°å‹ int64ï¼‰ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨ä¸ºè¿ç»­å†…å­˜ã€‚a.dtype è¡¨ç¤ºæ•°ç»„çš„å…ƒç´ ç±»å‹ï¼Œb.shape åˆ™æ˜¯æ•°ç»„çš„å½¢çŠ¶ã€‚è¾“å‡ºç»“æœè¡¨æ˜ä¸¤ä¸ªæ•°ç»„éƒ½æ˜¯é•¿åº¦ä¸º5çš„ä¸€ç»´æ•°ç»„ï¼Œå…ƒç´ ç±»å‹ä¸º64ä½æ•´æ•°ã€‚</p>
<h3>2. ä½¿ç”¨ NumPy å†…å»ºå‡½æ•°åˆ›å»ºæ•°ç»„</h3>
<p>NumPy æä¾›äº†å¤šç§å†…å»ºå‡½æ•°æ¥æ–¹ä¾¿åœ°åˆ›å»ºç‰¹å®šå†…å®¹çš„æ•°ç»„ï¼š</p>
<blockquote><code># ä½¿ç”¨ np.arange åˆ›å»ºè¿ç»­æ•´æ•°åºåˆ—</code><br>
<code>c = np.arange(1, 6)                 # [1 2 3 4 5] -&gt; 1è¡Œ5åˆ—ï¼Œç±»ä¼¼ range()ï¼Œç”Ÿæˆ1åˆ°5çš„æ•´æ•°</code><br>
<code>d = np.arange(1.0, 6.0)             # [1. 2. 3. 4. 5.] -&gt; 1è¡Œ5åˆ—ï¼Œèµ·æ­¢ä¸ºæµ®ç‚¹æ•°ï¼Œåˆ™å…ƒç´ ä¸º float64</code><br>
<code>print(c, c.dtype)                   # [1 2 3 4 5] int64</code><br>
<code>print(d, d.dtype)                   # [1. 2. 3. 4. 5.] float64 # åˆ›å»ºå…¨é›¶æˆ–å…¨ä¸€æ•°ç»„</code><br>
<code>e = np.zeros(5)                     # [0. 0. 0. 0. 0.] -&gt; é•¿åº¦5çš„å…¨0æ•°ç»„ï¼Œé»˜è®¤dtype=float64</code><br>
<code>f = np.ones(5, dtype=np.int32)      # [1 1 1 1 1] -&gt; é•¿åº¦5çš„å…¨1æ•°ç»„ï¼Œå…ƒç´ ç±»å‹int32</code><br>
<code>g = np.ones_like(e)                 # [1. 1. 1. 1. 1.] -&gt; åˆ›å»ºä¸€ä¸ªå½¢çŠ¶å’Œeç›¸åŒçš„å…¨1æ•°ç»„ï¼Œdtypeè·Ÿeç›¸åŒ(float64)</code><br>
<code># ... (9 more lines)</code></blockquote>
<p><em>Full code available in the <a href="https://github.com/geyuxu">GitHub repository</a>.</em></p><p>ä»¥ä¸Šæ¼”ç¤ºäº†å‡ ç§å¸¸è§çš„æ•°ç»„åˆ›å»ºæ–¹å¼ï¼š</p>
<ul>
<li>è¿ç»­æ•°ç»„ï¼šnp.arange(start, end, step) ç±»ä¼¼äº Python å†…ç½®çš„ range()ï¼Œå¯ä»¥ç”Ÿæˆç­‰å·®åºåˆ—ã€‚æ³¨æ„å¦‚æœä¸æŒ‡å®š dtypeï¼Œæ•´æ•°æ­¥é•¿ä¸‹é»˜è®¤ç”Ÿæˆ int64ï¼Œè€Œæœ‰æµ®ç‚¹æ•°å‚ä¸æ—¶åˆ™ç”Ÿæˆ float64 ç±»å‹ã€‚</li>
<li>ç‰¹æ®Šæ•°ç»„ï¼šnp.zeros(shape) å’Œ np.ones(shape) åˆ†åˆ«ç”Ÿæˆç»™å®šå½¢çŠ¶çš„å…¨0æˆ–å…¨1æ•°ç»„ã€‚é€šè¿‡å‚æ•° dtype å¯ä»¥æŒ‡å®šæ•°æ®ç±»å‹ã€‚np.ones_like(e) å’Œ np.zeros_like(e) åˆ™æ˜¯åŸºäºç°æœ‰æ•°ç»„å½¢çŠ¶åˆ›å»ºå…¨1æˆ–å…¨0çš„æ–°æ•°ç»„ã€‚</li>
<li>ç­‰å·®æ•°åˆ—ï¼šnp.linspace(start, end, num) ç”¨äºåœ¨æŒ‡å®šèŒƒå›´ç”ŸæˆæŒ‡å®šä¸ªæ•°çš„ç­‰é—´éš”ç‚¹ï¼Œå¸¸ç”¨äºç”Ÿæˆè¿ç»­å‡½æ•°çš„è‡ªå˜é‡æ•°ç»„ã€‚ä¸Šä¾‹ä¸­ h ä»1åˆ°10ç”Ÿæˆ4ä¸ªå€¼ï¼Œè€Œ x å’Œ y ç¤ºèŒƒäº†åˆ©ç”¨ np.arange å’Œ np.linspace å„ç”Ÿæˆ200ä¸ªä» -3.14 åˆ° 3.14 çš„ç­‰å·®ç‚¹ã€‚</li>
<li>éšæœºæ•°ç»„ï¼šnp.random.randn(m, n) ç›´æ¥ç”Ÿæˆå½¢çŠ¶ä¸º mÃ—n çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒéšæœºæ•°ç»„ï¼ˆå‡å€¼0ã€æ ‡å‡†å·®1ï¼‰ã€‚ç±»ä¼¼åœ°ï¼ŒNumPy è¿˜æœ‰ np.random.randã€np.random.randint ç­‰å‡½æ•°ç”¨äºç”Ÿæˆå‡åŒ€åˆ†å¸ƒéšæœºæ•°æˆ–æ•´æ•°éšæœºæ•°æ•°ç»„ã€‚</li>
</ul>
<h2>ä¸‰ã€NumPy æ•°ç»„çš„è¿ç®—</h2>
<p>NumPy æ•°ç»„æ”¯æŒå‘é‡åŒ–çš„å…ƒç´ è¿ç®—ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œç®—æœ¯æˆ–æ¯”è¾ƒæ“ä½œï¼Œè€Œæ— éœ€ç¼–å†™å¾ªç¯ï¼ŒNumPyä¼šå°†æ“ä½œåº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå……åˆ†åˆ©ç”¨åº•å±‚çš„ä¼˜åŒ–ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œç„¶åå¯¹å®ƒè¿›è¡ŒåŠ æ³•å’Œæ¯”è¾ƒè¿ç®—ï¼š</p>
<blockquote><code>ary = np.array([range(4), range(4, 8)])   # åˆ›å»ºä¸€ä¸ª2x4çš„äºŒç»´æ•°ç»„</code><br>
<code>print(ary)</code><br>
<code># [[0 1 2 3]</code><br>
<code>#  [4 5 6 7]]</code><br>
<code>print(ary + 1)                            # æ¯ä¸ªå…ƒç´ åŠ 1</code><br>
<code># [[1 2 3 4]</code><br>
<code>#  [5 6 7 8]]</code><br>
<code>print(ary &gt; 3)                            # ä¸æ ‡é‡æ¯”è¾ƒï¼Œè¿”å›å¸ƒå°”çŸ©é˜µ</code><br>
<code># [[False False False False]</code><br>
<code>#  [ True  True  True  True]]</code></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œary + 1 å°†æ•°ç»„ä¸­æ¯ä¸ªæ•°éƒ½åŠ ä¸Šäº†1ï¼Œå¾—åˆ°çš„æ–°æ•°ç»„ä»æ˜¯ç›¸åŒå½¢çŠ¶ã€‚åŒæ—¶ï¼Œary &gt; 3 ä¼šå¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒåˆ¤æ–­ï¼Œè¿”å›ä¸€ä¸ªåŒæ ·å½¢çŠ¶çš„å¸ƒå°”æ•°ç»„ï¼Œè¡¨ç¤ºå¯¹åº”ä½ç½®ä¸Šå…ƒç´ æ˜¯å¦å¤§äº3ã€‚è¿™ç§é€å…ƒç´ çš„è¿ç®—æ–¹å¼è®©ä»£ç æ—¢ç®€æ´åˆé«˜æ•ˆã€‚åœ¨ NumPy ä¸­ï¼Œæ ‡é‡å’Œæ•°ç»„ä¹‹é—´çš„è¿ç®—ä¼šè‡ªåŠ¨å¹¿æ’­(broadcasting)ï¼šæ ‡é‡è§†ä½œä¸æ•°ç»„å½¢çŠ¶å…¼å®¹ï¼Œç®—æœ¯è¿ç®—æ—¶ç›¸å½“äºæ‰©å±•æ ‡é‡ä¸ºåŒå½¢çŠ¶çš„æ•°ç»„å†é€å…ƒç´ è®¡ç®—ã€‚é™¤äº†ä¸æ ‡é‡å¤–ï¼Œå¦‚æœä¸¤ä¸ªæ•°ç»„çš„å½¢çŠ¶æ»¡è¶³ä¸€å®šè§„åˆ™ï¼ˆå¦‚å…¶ä¸­ä¸€æ–¹ç»´åº¦ä¸º1æˆ–å½¼æ­¤ç»´æ•°ç›¸åŒï¼‰ï¼ŒNumPy ä¹Ÿèƒ½è¿›è¡Œå¹¿æ’­è¿ç®—ï¼Œè¿™æ˜¯é«˜çº§è¯é¢˜ï¼Œè¿™é‡Œä¸å±•å¼€ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒNumPy çš„ç®—æœ¯å’Œæ¯”è¾ƒè¿ç®—ç»“æœéƒ½æ˜¯æ–°çš„æ•°ç»„ï¼Œä¸ä¼šä¿®æ”¹åŸæ•°ç»„çš„å€¼ã€‚å¦‚æœè¦å¯¹åŸæ•°ç»„è¿›è¡ŒåŸåœ°ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦é…åˆåˆ‡ç‰‡æˆ–ç´¢å¼•ï¼ˆç¨åä»‹ç»ï¼‰ã€‚</p>
<h2>å››ã€ndarray çš„åŸºæœ¬å±æ€§</h2>
<p>NumPy ndarray å¯¹è±¡åŒ…å«ä¸€äº›æè¿°æ•°ç»„æ€§è´¨çš„é‡è¦å±æ€§ï¼Œä¾‹å¦‚å½¢çŠ¶ã€ç»´åº¦ã€æ•°æ®ç±»å‹ç­‰ç­‰ã€‚äº†è§£å’Œä½¿ç”¨è¿™äº›å±æ€§å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æŒæ¡æ•°ç»„çš„ç»“æ„å’Œç‰¹æ€§ã€‚</p>
<p>ä»¥ä¸‹ä»£ç åˆ›å»ºäº†ä¸€ä¸ª 2x4 çš„æ•°ç»„ï¼Œæ¼”ç¤ºäº† ndarray çš„å¸¸è§å±æ€§ï¼š</p>
<blockquote><code>arr = np.arange(8, dtype=np.float32).reshape(2, 4)</code><br>
<code>print(arr.shape)    # (2, 4) -&gt; æ•°ç»„å½¢çŠ¶ä¸º2è¡Œ4åˆ—</code><br>
<code>print(arr.ndim)     # 2 -&gt; æ•°ç»„ç»´åº¦æ•°ï¼ˆç§©ï¼‰ï¼ŒäºŒç»´æ•°ç»„</code><br>
<code>print(arr.size)     # 8 -&gt; æ•°ç»„å…ƒç´ æ€»ä¸ªæ•°</code><br>
<code>print(len(arr))     # 2 -&gt; len è¿”å›æ•°ç»„ç¬¬ä¸€ç»´é•¿åº¦ï¼Œè¿™é‡Œæ˜¯2</code><br>
<code>print(arr.dtype)    # float32 -&gt; æ•°ç»„å…ƒç´ çš„æ•°æ®ç±»å‹</code><br>
<code>print(arr.itemsize) # 4 -&gt; æ¯ä¸ªå…ƒç´ å ç”¨å­—èŠ‚æ•°(float32æ¯ä¸ª4å­—èŠ‚)</code><br>
<code>print(arr.nbytes)   # 32 -&gt; æ•°ç»„æ€»å­—èŠ‚å¤§å°(size * itemsize = 8*4)</code></blockquote><p>æˆ‘ä»¬åˆ›å»ºäº† arr åŒ…å«0åˆ°7çš„ 8ä¸ªå…ƒç´ ï¼Œå¹¶reshapeæˆ2x4å½¢çŠ¶ã€‚è¾“å‡ºä¸­ï¼š</p>
<ul>
<li>shapeï¼šæ•°ç»„çš„å½¢çŠ¶ï¼Œç”¨ä¸€ä¸ªå…ƒç»„è¡¨ç¤ºå„ç»´åº¦å¤§å°ï¼Œè¿™é‡Œæ˜¯ (2, 4)ï¼Œè¡¨ç¤º2è¡Œ4åˆ—ã€‚</li>
<li>ndimï¼šæ•°ç»„çš„ç»´åº¦æ•°ï¼Œè¿™é‡Œæ˜¯2ï¼Œè¡¨ç¤º arr æ˜¯äºŒç»´æ•°ç»„ã€‚</li>
<li>sizeï¼šæ•°ç»„å…ƒç´ çš„æ€»æ•°é‡ï¼Œè¿™é‡Œæ˜¯8ã€‚</li>
<li>len(arr)ï¼šç­‰ä»·äº arr.shape[0]ï¼Œå³æ•°ç»„ç¬¬ä¸€ç»´çš„é•¿åº¦ï¼Œæ­¤ä¾‹ä¸­ä¸º2ã€‚</li>
<li>dtypeï¼šæ•°ç»„å…ƒç´ çš„æ•°æ®ç±»å‹ï¼Œæœ¬ä¾‹ä¸­ np.float32ï¼ˆ32ä½æµ®ç‚¹ï¼‰ã€‚</li>
<li>itemsizeï¼šæ¯ä¸ªå…ƒç´ å ç”¨çš„å­—èŠ‚æ•°ï¼Œfloat32 æ¯ä¸ªå…ƒç´ 4å­—èŠ‚ã€‚</li>
<li>nbytesï¼šæ•°ç»„å ç”¨çš„æ€»å­—èŠ‚æ•°ï¼Œç­‰äº size * itemsizeï¼Œè¿™é‡Œæ˜¯32å­—èŠ‚ã€‚
é€šè¿‡è¿™äº›å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è·çŸ¥æ•°ç»„çš„ç»“æ„å’Œå­˜å‚¨ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå½“æ£€æŸ¥æ•°æ®è¯»å…¥æ˜¯å¦æ­£ç¡®ï¼Œæˆ–è°ƒä¼˜å­˜å‚¨å’Œæ€§èƒ½æ—¶ï¼Œè¿™äº›å±æ€§éƒ½éå¸¸æœ‰ç”¨ã€‚</li>
</ul>
<h2>äº”ã€æ•°ç»„çš„ç´¢å¼•å’Œåˆ‡ç‰‡</h2>
<p>NumPy æ•°ç»„çš„ç´¢å¼•ï¼ˆindexingï¼‰å’Œåˆ‡ç‰‡ï¼ˆslicingï¼‰æ“ä½œä¸ Python åˆ—è¡¨ç±»ä¼¼ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å€¼å¾—æ³¨æ„çš„åŒºåˆ«å’Œç‰¹æ€§ã€‚</p>
<h3>1. åŸºæœ¬ç´¢å¼•</h3>
<p>ä¸€ç»´æ•°ç»„å¯ä»¥ç”¨ä¸åˆ—è¡¨ç›¸åŒçš„è¯­æ³•é€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´ ï¼Œä¾‹å¦‚ arr[i] è·å–ç¬¬ i ä¸ªå…ƒç´ ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰ã€‚å¤šç»´æ•°ç»„åˆ™å¯ä»¥ç”¨é€—å·åˆ†éš”çš„ç´¢å¼•æ¥è®¿é—®ç‰¹å®šä½ç½®ï¼Œä¾‹å¦‚ arr2d[i, j] è¡¨ç¤ºè·å–äºŒç»´æ•°ç»„ç¬¬ i è¡Œã€ç¬¬ j åˆ—çš„å…ƒç´ ã€‚ä¹Ÿå¯ä»¥é€å±‚ç´¢å¼•ï¼šarr2d[i][j] ç­‰ä»·äº arr2d[i, j]ã€‚</p>
<h3>2. åˆ‡ç‰‡è·å–å­æ•°ç»„</h3>
<p>å¯¹ ndarray ä½¿ç”¨åˆ‡ç‰‡è¯­æ³•ï¼ˆå¦‚ arr[start:stop:step]ï¼‰å¯ä»¥è·å–æ•°ç»„çš„æŸä¸€éƒ¨åˆ†å­æ•°ç»„ã€‚ä¸åˆ—è¡¨ä¸åŒçš„æ˜¯ï¼Œå¯¹å¤šç»´æ•°ç»„å¯ä»¥å¯¹æ¯ä¸€ç»´åˆ†åˆ«è¿›è¡Œåˆ‡ç‰‡ï¼Œä¾‹å¦‚ arr2d[0:2, 1:3] å¯ä»¥åŒæ—¶åœ¨è¡Œå’Œåˆ—ä¸¤ä¸ªç»´åº¦ä¸Šåˆ‡ç‰‡ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼Œæ•°ç»„åˆ‡ç‰‡è¿”å›çš„æ˜¯åŸæ•°ç»„çš„è§†å›¾ï¼ˆviewï¼‰ï¼Œå¹¶ä¸æ‹·è´æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¿®æ”¹åˆ‡ç‰‡ç»“æœä¼šå½±å“åˆ°åŸæ•°ç»„å¯¹åº”çš„éƒ¨åˆ†ã€‚è¿™ä¸€ç‚¹ä¸ Python åˆ—è¡¨çš„åˆ‡ç‰‡ä¸åŒï¼ˆåˆ—è¡¨åˆ‡ç‰‡ä¼šç”Ÿæˆæ–°çš„åˆ—è¡¨ï¼‰ã€‚å¦‚æœéœ€è¦è·å¾—ä¸€ä»½ç‹¬ç«‹çš„æ‹·è´ï¼Œå¯ä»¥ä½¿ç”¨ np.copy() æˆ–è°ƒç”¨æ•°ç»„çš„ .copy() æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢é€šè¿‡ä¾‹å­è¯´æ˜ç´¢å¼•å’Œåˆ‡ç‰‡çš„å·®å¼‚ï¼š</p>
<blockquote><code>arr = np.arange(1, 9).reshape(2, 4)</code><br>
<code>print(arr[1], arr[1].shape)    # è®¿é—®ç¬¬2è¡Œï¼ˆç´¢å¼•1ï¼‰ï¼Œè¿”å›1ç»´æ•°ç»„ï¼Œshape=(4,)</code><br>
<code>print(arr[1:2], arr[1:2].shape)  # åˆ‡ç‰‡ç¬¬2è¡Œï¼Œè¿”å›ä¿ç•™è¡Œç»´åº¦çš„2ç»´æ•°ç»„ï¼Œshape=(1, 4)# åˆ‡ç‰‡æ˜¯è§†å›¾ï¼Œä¿®æ”¹å®ƒä¼šå½±å“åŸæ•°ç»„</code><br>
<code>sub_arr = arr[0, 1:3]          # å–å‡ºç¬¬1è¡Œï¼ˆç´¢å¼•0ï¼‰çš„ç¬¬2-3åˆ—å­æ•°ç»„</code><br>
<code>sub_arr[0] = 99                # ä¿®æ”¹å­æ•°ç»„çš„ç¬¬1ä¸ªå…ƒç´ </code><br>
<code>print(arr[0])                  # åŸæ•°ç»„ç¬¬1è¡Œç›¸åº”å…ƒç´ ä¹Ÿå˜ä¸º99</code><br>
<code># [ 1 99 99 4]</code></blockquote><p>ä¸Šä¾‹ä¸­ï¼Œarr[1] ç›´æ¥ç´¢å¼•ç¬¬äºŒè¡Œï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼ˆé•¿åº¦4ï¼‰ï¼›è€Œ arr[1:2] ä½¿ç”¨åˆ‡ç‰‡æˆªå–ç¬¬äºŒè¡Œï¼Œå¾—åˆ°çš„ä»æ˜¯äºŒç»´æ•°ç»„ï¼Œåªæ˜¯è¡Œæ•°ä¸º1ã€‚å•ç´¢å¼•ä¼šé™ä½ç»´åº¦ï¼Œè€Œåˆ‡ç‰‡ä¼šä¿ç•™åŸæœ‰ç»´åº¦ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å°† arr[0, 1:3]ï¼ˆç¬¬1è¡Œä¸­ç¬¬2å’Œç¬¬3åˆ—ï¼‰èµ‹ç»™ sub_arr åï¼Œä¿®æ”¹äº† sub_arr ä¸­çš„å…ƒç´ ï¼Œç»“æœåŸæ•°ç»„ arr ä¸­å¯¹åº”ä½ç½®çš„å€¼ä¹Ÿæ”¹å˜äº†ã€‚è¿™è¯æ˜åˆ‡ç‰‡å¾—åˆ°çš„ sub_arr å¹¶æ²¡æœ‰ç‹¬ç«‹æ‹·è´æ•°æ®ï¼Œå®ƒä¸åŸæ•°ç»„å…±äº«å†…å­˜ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›å¯¹æå–å‡ºçš„å­æ•°ç»„è¿›è¡Œæ“ä½œä½†ä¸å½±å“åŸæ•°æ®ï¼Œå¯ä»¥åœ¨åˆ‡ç‰‡æ—¶åŠ ä¸Š .copy() æ¥ç”Ÿæˆå‰¯æœ¬ã€‚</p>
<h2>å…­ã€æ•°æ®ç±»å‹ä¸è½¬æ¢</h2>
<p>NumPy æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ˆdtypeï¼‰ï¼Œä¸ä»…æœ‰å¸¸è§çš„æ•°å€¼ç±»å‹ï¼ˆintã€floatï¼‰ï¼Œè¿˜æœ‰å¸ƒå°”å‹ã€å­—ç¬¦ä¸²ï¼Œç”šè‡³æ—¥æœŸæ—¶é—´å’Œå¤åˆç±»å‹ã€‚çµæ´»åœ°è¿ç”¨æ•°æ®ç±»å‹æœ‰æ—¶èƒ½æé«˜æ•ˆç‡æˆ–æ–¹ä¾¿åœ°å¤„ç†ç‰¹æ®Šæ•°æ®ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†å‡ ç±»ä»‹ç»ã€‚</p>
<h3>1. åŸºæœ¬æ•°å€¼ç±»å‹åŠ astype è½¬æ¢</h3>
<p>åœ¨ NumPy ä¸­ï¼Œæ•´æ•°é»˜è®¤æ˜¯int64ï¼Œæµ®ç‚¹æ•°é»˜è®¤æ˜¯float64ï¼ˆé™¤éæ˜¾å¼æŒ‡å®š dtypeï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ .astype() æ–¹æ³•åœ¨ä¸åŒç±»å‹ä¹‹é—´è½¬æ¢ï¼š</p>
<blockquote><code>x = np.array([1, 2, 3], dtype=np.int64)</code><br>
<code>print(x.dtype)           # int64</code><br>
<code>y = x.astype(np.float32) </code><br>
<code>print(y, y.dtype)        # [1. 2. 3.] float32 -&gt; å°†æ•´æ•°è½¬ä¸º32ä½æµ®ç‚¹</code></blockquote><p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ•´å‹æ•°ç»„ x è½¬æ¢ä¸ºäº†æµ®ç‚¹å‹æ•°ç»„ yã€‚astype ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ x ä¿æŒä¸å˜ã€‚NumPy ä¼šå°½å¯èƒ½åœ°æ‰§è¡Œå®‰å…¨è½¬æ¢ï¼Œä¾‹å¦‚æ•´æ•°è½¬æµ®ç‚¹æ˜¯å…è®¸çš„ã€‚ä½†å¦‚æœæŠŠæµ®ç‚¹è½¬æ¢ä¸ºæ•´æ•°ï¼ŒNumPy é»˜è®¤ä¼šæˆªæ–­å°æ•°éƒ¨åˆ†ï¼ˆä¸æ˜¯å››èˆäº”å…¥ï¼‰ï¼Œè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚</p>
<h3>2. å¸ƒå°”ç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹</h3>
<p>NumPy ç”¨ bool ç±»å‹è¡¨ç¤ºå¸ƒå°”å€¼ï¼ŒTrue åœ¨å†…éƒ¨ä¼šå­˜å‚¨ä¸º1ï¼ŒFalse ä¸º0ã€‚å¸ƒå°”æ•°ç»„ç»å¸¸ç”¨äºä½œä¸ºæ©ç ç­›é€‰æ•°æ®ã€‚å¸ƒå°”å‹çš„å­˜å‚¨æ¯”è¾ƒèŠ‚çœï¼Œæ¯ä¸ªå…ƒç´ é€šå¸¸å ç”¨1ä¸ªå­—èŠ‚ã€‚</p>
<p>NumPy çš„å­—ç¬¦ä¸²ç±»å‹ï¼ˆé€šå¸¸æ˜¾ç¤ºä¸º &lt;U<n>ï¼‰è¡¨ç¤ºå®šé•¿çš„ Unicode å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ &lt;U è¡¨ç¤ºUnicodeå­—ç¬¦ä¸²ï¼Œnè¡¨ç¤ºå­—ç¬¦é•¿åº¦ä¸Šé™ã€‚NumPy ä¼šæ ¹æ®æ•°ç»„ä¸­æœ€é•¿çš„å­—ç¬¦ä¸²é•¿åº¦æ¥ç¡®å®š n çš„å¤§å°ï¼Œæ‰€æœ‰å…ƒç´ éƒ½ä¼šè¢«æˆªæ–­æˆ–å¡«å……åˆ°è¿™ä¸ªé•¿åº¦ã€‚éœ€è¦æ³¨æ„ï¼ŒNumPy å­—ç¬¦ä¸²dtypeä¸»è¦é€‚ç”¨äºç®€å•çš„å›ºå®šé•¿åº¦æ–‡æœ¬å¤„ç†ï¼Œå¯¹äºæ›´çµæ´»çš„å­—ç¬¦ä¸²æ“ä½œï¼Œé€šå¸¸è¿˜æ˜¯ä½¿ç”¨Pythonçš„å­—ç¬¦ä¸²æˆ–pandasçš„å­—ç¬¦ä¸²åŠŸèƒ½ã€‚</p>
<p>æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆ›å»ºå¸ƒå°”æ•°ç»„å’Œå­—ç¬¦ä¸²æ•°ç»„ï¼Œè§‚å¯Ÿå®ƒä»¬çš„ dtype å’Œå†…å­˜å ç”¨ï¼š</p>
<blockquote><code>bool_arr = np.zeros(5, dtype=bool)</code><br>
<code>print(bool_arr, bool_arr.dtype, bool_arr.itemsize)  </code><br>
<code># [False False False False False] bool 1  -&gt; 5ä¸ªFalseï¼Œç±»å‹boolï¼Œæ¯ä¸ªå 1å­—èŠ‚str_arr = np.array([&#039;NumPy&#039;, &#039;æ•°æ®åˆ†æ&#039;, &#039;Python3.9&#039;])</code><br>
<code>print(str_arr.dtype, str_arr.itemsize, str_arr.nbytes)  </code><br>
<code># &lt;U6 24 72 -&gt; dtypeä¸º&lt;U6ï¼Œæ¯ä¸ªå…ƒç´ å›ºå®š6ä¸ªå­—ç¬¦(24å­—èŠ‚)ï¼Œæ€»æ•°ç»„å 72å­—èŠ‚(3*24)</code></blockquote><p>ä¸Šé¢çš„ bool_arr æ˜¯é•¿åº¦5çš„å¸ƒå°”æ•°ç»„ï¼Œæ‰“å°å¯è§å…ƒç´ å€¼ä¸º Falseï¼Œdtype ä¸º boolï¼Œæ¯ä¸ªå…ƒç´  itemsize ä¸º1å­—èŠ‚ã€‚str_arr æ˜¯åŒ…å«ä¸‰ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ï¼šâ€˜NumPyâ€™ é•¿åº¦5ï¼Œâ€˜æ•°æ®åˆ†æâ€™ é•¿åº¦4ï¼ˆä¸¤ä¸ªæ±‰å­—é•¿åº¦ä¸º2ï¼Œæ¯ä¸ªæ±‰å­—ç®—ä¸€ä¸ªå­—ç¬¦ï¼‰ï¼Œâ€˜Python3.9â€™ é•¿åº¦8ã€‚ä½†æ˜¯ NumPy ä¸ºæ•´ä¸ªæ•°ç»„ç»Ÿä¸€åˆ†é…äº†é•¿åº¦6ï¼ˆèƒ½å¤Ÿå®¹çº³æœ€é•¿çš„8å­—ç¬¦å—ï¼Ÿè¿™é‡Œæ±‰å­—ä¸¤ä¸ªå¯èƒ½å 2å­—ç¬¦ä½ç½®ï¼Œå„å®ç°ä¸åŒï¼Œä½†dtypeç»™å‡º&lt;U6å¯èƒ½åŸºäºæœ€é•¿unicode code pointsæ•°ï¼‰ã€‚ç»“æœ dtype ä¸º &lt;U6ï¼Œè¡¨ç¤ºæ¯ä¸ªå…ƒç´ å›ºå®šä¸º6ä¸ªå­—ç¬¦ã€‚itemsize ä¸º24ï¼Œæ„å‘³ç€æ¯ä¸ªå…ƒç´ ç”¨24å­—èŠ‚ï¼ˆ6ä¸ªUnicodeå­—ç¬¦ï¼Œæ¯å­—ç¬¦4å­—èŠ‚ï¼‰å­˜å‚¨ï¼Œæ€» nbytes ä¸º72å­—èŠ‚ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºçŸ­å­—ç¬¦ä¸²æ¥è¯´ï¼Œè¿™ç§å®šé•¿å­˜å‚¨ä¼šæœ‰äº›æµªè´¹ç©ºé—´ã€‚</p>
<h3>3. æ—¶é—´æ—¥æœŸç±»å‹</h3>
<p>NumPy å¼•å…¥äº†ä¸“é—¨çš„æ—¥æœŸæ—¶é—´ç±»å‹ datetime64 å’Œæ—¶é—´é—´éš”ç±»å‹ timedelta64 æ¥æ–¹ä¾¿åœ°è¿›è¡Œæ—¶é—´ç›¸å…³çš„æ•°æ®è¿ç®—ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå­—ç¬¦ä¸²è¡¨ç¤ºçš„æ—¥æœŸè½¬æ¢ä¸º datetime64ï¼š</p>
<blockquote><code>dates = np.array([&#039;2023&#039;, &#039;2024-01-01&#039;, &#039;2025-03-07 15:30:21&#039;])</code><br>
<code>print(dates.dtype)            # &lt;U19 (å­—ç¬¦ä¸²ç±»å‹)</code><br>
<code>dates = dates.astype(&#039;datetime64[s]&#039;)</code><br>
<code>print(dates, dates.dtype)</code><br>
<code># [&#039;2023-01-01T00:00:00&#039; &#039;2024-01-01T00:00:00&#039; &#039;2025-03-07T15:30:21&#039;] datetime64[s]</code><br>
<code>print(dates.astype(&#039;int64&#039;))</code><br>
<code># [1672531200 1704067200 1741361421]  -&gt; è½¬æ¢ä¸ºUnixæ—¶é—´æˆ³(ç§’)</code></blockquote><p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªæ—¥æœŸå­—ç¬¦ä¸²ï¼š&#39;2023&#39;ï¼ˆåªæœ‰å¹´ä»½ï¼‰ã€&#39;2024-01-01&#39;ï¼ˆå¹´æœˆæ—¥ï¼‰ã€&#39;2025-03-07 15:30:21&#39;ï¼ˆå®Œæ•´æ—¥æœŸæ—¶é—´ï¼‰ã€‚è½¬æ¢ä¸º datetime64[s] åï¼ŒNumPy å°†å®ƒä»¬ç»Ÿä¸€è§£é‡Šä¸ºç§’çº§åˆ«çš„æ—¶é—´ç‚¹ï¼šç¼ºçœçš„æ—¥æœŸéƒ¨åˆ†è‡ªåŠ¨è¡¥ä¸º 01-01ï¼Œæ—¶é—´è¡¥ä¸ºåˆå¤œã€‚æ‰“å°ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œ&#39;2023&#39; å˜ä¸ºäº† &#39;2023-01-01T00:00:00&#39;ã€‚æ¥ç€ï¼Œæˆ‘ä»¬åˆå°† datetime64 æ•°ç»„è½¬æ¢ä¸º int64ï¼Œç»“æœå˜æˆäº†å¯¹åº”çš„ Unix æ—¶é—´æˆ³ï¼ˆä»1970-01-01èµ·çš„ç§’æ•°ï¼‰ã€‚è¿™åœ¨éœ€è¦è®¡ç®—ä¸¤ä¸ªæ—¥æœŸå·®æˆ–åšæ—¶é—´æ’åºæ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<h3>4. ç»“æ„åŒ–æ•°æ®ç±»å‹ï¼ˆå¤åˆç±»å‹ï¼‰</h3>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸€ä¸ªæ•°ç»„ä¸­å­˜æ”¾ä¸åŒç±»å‹çš„å­—æ®µï¼Œæ¯”å¦‚ä¸€å¼ è¡¨æ ¼æ•°æ®åŒ…å«å§“åï¼ˆå­—ç¬¦ä¸²ï¼‰ã€å¹´é¾„ï¼ˆæ•´æ•°ï¼‰ã€æˆç»©åˆ—è¡¨ï¼ˆæ•´æ•°åˆ—è¡¨ï¼‰ç­‰ã€‚NumPy çš„ç»“æ„åŒ–æ•°ç»„å…è®¸æˆ‘ä»¬è‡ªå®šä¹‰è¿™æ ·å¤åˆçš„æ•°æ®ç±»å‹ã€‚å¯ä»¥å°†ç»“æ„åŒ–dtypeç†è§£ä¸ºâ€œå…ƒç´ ä¸ºå…ƒç»„çš„æ•°ç»„â€ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«å¤šä¸ªä¸åŒç±»å‹çš„å€¼ï¼Œç±»ä¼¼äºæ•°æ®åº“æˆ–è¡¨æ ¼çš„ä¸€è¡Œã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ dtype å‚æ•°æ¥å®šä¹‰ç»“æ„åŒ–ç±»å‹ã€‚æ¯”å¦‚ï¼Œå®šä¹‰ä¸€ä¸ª dtype åŒ…å«å§“å(name)ã€ä¸‰ä¸ªç§‘ç›®æˆç»©(scores)å’Œå¹´é¾„(age)ä¸‰ä¸ªå­—æ®µï¼š</p>
<blockquote><code>data = [</code><br>
<code>    (&#039;å¼ ä¸‰&#039;, [85, 92, 78], 21),</code><br>
<code>    (&#039;æå››&#039;, [75, 85, 89], 19),</code><br>
<code>    (&#039;ç‹äº”&#039;, [90, 88, 95], 20)</code><br>
<code>]</code><br>
<code>dtype = {</code><br>
<code>    &#039;names&#039;:   (&#039;name&#039;,   &#039;scores&#039;,    &#039;age&#039;),</code><br>
<code>    &#039;formats&#039;: (&#039;U2&#039;,     &#039;3int32&#039;,    &#039;int32&#039;)</code><br>
<code>}</code><br>
<code>arr = np.array(data, dtype=dtype)</code><br>
<code>print(arr[0])          # (&#039;å¼ ä¸‰&#039;, [85, 92, 78], 21)</code><br>
<code>print(arr[&#039;name&#039;])     # [&#039;å¼ ä¸‰&#039; &#039;æå››&#039; &#039;ç‹äº”&#039;]</code><br>
<code>print(arr[&#039;age&#039;].mean())   # 20.0 -&gt; å¹´é¾„å­—æ®µçš„å¹³å‡å€¼</code></blockquote><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ (å§“å, [ä¸‰é—¨è¯¾æˆç»©], å¹´é¾„) çš„å…ƒç»„ã€‚ç„¶åé€šè¿‡ dtype å­—å…¸æŒ‡å®šæ¯ä¸ªå­—æ®µçš„åç§°å’Œç±»å‹ï¼šå§“åä¸º2ä½Unicodeå­—ç¬¦ä¸²(&#39;U2&#39;)ï¼Œæˆç»©ä¸º3ä¸ª32ä½æ•´æ•°ç»„æˆçš„æ•°ç»„(&#39;3int32&#39;)ï¼Œå¹´é¾„ä¸º32ä½æ•´æ•°ã€‚np.array æ ¹æ®è¿™ä¸ªdtypeåˆ›å»ºäº†ç»“æ„åŒ–æ•°ç»„ arrã€‚</p>
<p>æ‰“å° arr[0] å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªå…ƒç´ æ˜¾ç¤ºä¸ºä¸€ä¸ªå¤åˆçš„å…ƒç»„ã€‚æˆ‘ä»¬å¯ä»¥åƒå­—å…¸ä¸€æ ·é€šè¿‡å­—æ®µåè®¿é—®æ•°æ®ï¼Œæ¯”å¦‚ arr[&#39;name&#39;] ä¼šæå–æ‰€æœ‰å…ƒç´ çš„å§“åå­—æ®µç»„æˆæ–°çš„æ•°ç»„ï¼Œarr[&#39;age&#39;] åˆ™æ˜¯æ‰€æœ‰å¹´é¾„çš„æ•°ç»„ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹å¹´é¾„å­—æ®µç›´æ¥è°ƒç”¨ .mean() æ¥è®¡ç®—å¹³å‡å¹´é¾„ã€‚ç»“æ„åŒ–æ•°ç»„è®©æˆ‘ä»¬å¯ä»¥åœ¨NumPyä¸­æ–¹ä¾¿åœ°å¤„ç†è¡¨æ ¼åŒ–çš„æ•°æ®ï¼Œä½†éœ€è¦æ³¨æ„å®ƒçš„å…ƒç´ æ˜¯å¤åˆç±»å‹ï¼ŒæŸäº›NumPyé€šç”¨å‡½æ•°å¹¶ä¸ç›´æ¥æ”¯æŒé€å­—æ®µæ“ä½œï¼Œåœ¨ä½¿ç”¨æ—¶è¦ä»”ç»†é€‰æ‹©å’Œå¤„ç†ã€‚</p>
<h2>ä¸ƒã€è¯»å–å¤–éƒ¨æ•°æ®ä¸ºæ•°ç»„</h2>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å°†å¤–éƒ¨æ•°æ®ï¼ˆä¾‹å¦‚æ–‡æœ¬æ–‡ä»¶ã€CSVæ–‡ä»¶ï¼‰è¯»å…¥ NumPy æ•°ç»„ä¸­ã€‚NumPy æä¾›äº†è¯¸å¦‚ np.loadtxtã€np.genfromtxt ç­‰æ–¹æ³•ç›´æ¥è¯»å–æ–‡ä»¶ï¼Œä½†è¿™é‡Œæˆ‘ä»¬å±•ç¤ºä¸€ä¸ªæ‰‹åŠ¨è¯»å–å¹¶è½¬æ¢çš„è¿‡ç¨‹ï¼Œä»¥ç†è§£æ•°æ®æ¸…æ´—åˆ°æ•°ç»„çš„æ­¥éª¤ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè‚¡ç¥¨æ•°æ®æ–‡ä»¶ aapl.csvï¼Œå…¶ä¸­æ¯è¡ŒåŒ…å«æ—¥æœŸå’Œå½“æ—¥è‚¡ç¥¨çš„å¼€ç›˜ä»·ã€æœ€é«˜ä»·ã€æœ€ä½ä»·ã€æ”¶ç›˜ä»·å’Œæˆäº¤é‡ï¼Œæ¯”å¦‚ï¼š</p>
<blockquote><code>2021-01-04,133.52,133.6116,126.76,129.41,143301900</code><br>
<code>2021-01-05,128.89,131.74,128.43,131.01,97664900</code><br>
<code>...</code></blockquote><p>æˆ‘ä»¬å¯ä»¥é€è¡Œè¯»å–æ–‡ä»¶ï¼Œå°†æ¯è¡Œæ•°æ®è§£æåå­˜å…¥ NumPy æ•°ç»„ï¼š</p>
<blockquote><code>f = open(&#039;aapl.csv&#039;)</code><br>
<code>data_list = []</code><br>
<code>for line in f:</code><br>
<code>    # å»é™¤æ¢è¡Œç¬¦å¹¶æŒ‰é€—å·åˆ†å‰²</code><br>
<code>    date, open_, high, low, close, volume = line.strip().split(&#039;,&#039;)</code><br>
<code>    # å°†æ¯è¡Œæ•°æ®è½¬æ¢æˆå¯¹åº”ç±»å‹çš„tupleåæ·»åŠ åˆ°åˆ—è¡¨</code><br>
<code>    data_list.append((date, float(open_), float(high), float(low), float(close), int(volume)))</code><br>
<code>f.close()</code><br>
<code># å®šä¹‰ç»“æ„åŒ–dtypeï¼Œä¸æ–‡ä»¶åˆ—ä¸€ä¸€å¯¹åº”</code><br>
<code>dtype = [(&#039;date&#039;, &#039;U10&#039;), (&#039;open&#039;, &#039;f4&#039;), (&#039;high&#039;, &#039;f4&#039;), (&#039;low&#039;, &#039;f4&#039;), (&#039;close&#039;, &#039;f4&#039;), (&#039;volume&#039;, &#039;u8&#039;)]</code><br>
<code>data = np.array(data_list, dtype=dtype)</code><br>
<code>print(data[&#039;high&#039;].max())   # 145.09  -&gt; æœ€é«˜ä»·ï¼ˆç¤ºä¾‹è¾“å‡ºï¼‰</code></blockquote><p>è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰“å¼€æ–‡ä»¶åé€è¡Œè¯»å–ã€‚å¯¹äºæ¯ä¸€è¡Œï¼Œç”¨ strip().split(&#39;,&#39;) æ‹†åˆ†å‡ºå„å­—æ®µï¼Œç„¶åæ„é€ å‡ºå¯¹åº”ç±»å‹çš„å…ƒç»„ã€‚ä¾‹å¦‚æ—¥æœŸä¿æŒå­—ç¬¦ä¸²ï¼Œä»·æ ¼ç”¨ float è½¬æ¢ï¼Œæˆäº¤é‡ç”¨ int è½¬æ¢ã€‚å°†æ‰€æœ‰å…ƒç»„æ”¶é›†åˆ°åˆ—è¡¨åï¼Œé€šè¿‡ np.array(..., dtype=è‡ªå®šä¹‰dtype) ä¸€æ¬¡æ€§è½¬æ¢ä¸ºç»“æ„åŒ–çš„ NumPy æ•°ç»„ã€‚è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº† dtype åŒ…å«6ä¸ªå­—æ®µï¼Œå¯¹åº”æ—¥æœŸï¼ˆ10ä½ä»¥å†…å­—ç¬¦ä¸²ï¼‰ï¼Œå¼€ç›˜ã€æœ€é«˜ã€æœ€ä½ã€æ”¶ç›˜ä»·ï¼ˆ32ä½æµ®ç‚¹ï¼‰ï¼Œä»¥åŠæˆäº¤é‡ï¼ˆæ— ç¬¦å·64ä½æ•´æ•°ï¼‰ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬æ‰“å°äº† data[&#39;high&#39;].max()ï¼Œå³åˆ©ç”¨ NumPy æ•°ç»„çš„ä¾¿æ·æ€§ï¼Œç›´æ¥å¯¹ æœ€é«˜ä»· ä¸€åˆ—æ±‚æœ€å¤§å€¼ã€‚è¿™å°†è¾“å‡ºæ•´ä¸ªæ•°æ®ä¸­è‚¡ç¥¨çš„å†å²æœ€é«˜ä»·ï¼ˆè¿™é‡Œå‡è®¾ä¸º 145.09ï¼Œä»…ä¸ºç¤ºä¾‹ï¼‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å¯¹ç»“æ„åŒ–æ•°ç»„çš„ä»»æ„ä¸€åˆ—è¿›è¡Œç»Ÿè®¡è®¡ç®—ã€‚</p>
<blockquote>
<p>æç¤ºï¼š å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ np.loadtxt æˆ– np.genfromtxt æ¥è¯»å–CSVç­‰æ–‡æœ¬æ•°æ®ä¸ºæ•°ç»„ï¼Œå¹¶æŒ‡å®šåˆ†éš”ç¬¦å’Œdtypeï¼Œä»è€Œå‡å°‘æ‰‹åŠ¨è§£æçš„ä»£ç ã€‚ä¸è¿‡ï¼Œä¸Šè¿°ä¾‹å­æœ‰åŠ©äºç†è§£æ•°æ®è¯»å…¥å’ŒdtypeæŒ‡å®šçš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<h2>å…«ã€æ•°ç»„å½¢çŠ¶å˜æ¢</h2>
<p>å¤šç»´æ•°ç»„çš„å½¢çŠ¶ï¼ˆshapeï¼‰å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ”¹å˜ï¼Œä¾‹å¦‚æ”¹å˜ç»´åº¦çš„æ’åˆ—ç»„åˆï¼Œæˆ–å¢åŠ /å‡å°‘ç»´åº¦ã€‚NumPy æä¾›çš„æ“ä½œä¸»è¦æœ‰ reshapeã€flatten/ravel ä»¥åŠ resize ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒæ“ä½œæœ‰ä¸åŒçš„å†…å­˜æœºåˆ¶ï¼šæœ‰çš„ä¼šè¿”å›åŸæ•°ç»„çš„è§†å›¾ï¼Œæœ‰çš„ä¼šäº§ç”Ÿæ–°çš„æ•°ç»„ã€‚</p>
<h3>1. reshapeï¼šè§†å›¾å˜ç»´</h3>
<p>ndarray.reshape(new_shape) å¯ä»¥è¿”å›ä¸€ä¸ªæ”¹å˜äº†å½¢çŠ¶çš„æ–°æ•°ç»„ï¼ˆè§†å›¾ï¼‰ã€‚åœ¨ä¸è¿åå†…å­˜è¿ç»­æ€§è§„åˆ™çš„å‰æä¸‹ï¼Œreshape ä¸ä¼šå¤åˆ¶åŸæ•°æ®ï¼Œå› æ­¤ä¿®æ”¹ reshape åçš„æ•°ç»„ä¹Ÿä¼šå½±å“åŸæ•°ç»„ã€‚</p>
<blockquote><code>a = np.arange(12)               # åˆ›å»ºåŒ…å«0~11çš„ä¸€ç»´æ•°ç»„ï¼Œå…±12ä¸ªå…ƒç´ </code><br>
<code>b = a.reshape(3, 4)             # å°†aè§†å›¾reshapeä¸º3è¡Œ4åˆ—çš„äºŒç»´æ•°ç»„</code><br>
<code>b[0, 0] = 99                    # ä¿®æ”¹bä¸­çš„å…ƒç´ </code><br>
<code>print(a)                        # [99  1  2  3  4  5  6  7  8  9 10 11]</code><br>
<code>print(b)                        # [[99  1  2  3]</code><br>
<code>#                                [ 4  5  6  7]</code><br>
<code>#                                [ 8  9 10 11]]</code></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°†ä¸€ç»´æ•°ç»„ a é€šè¿‡ reshape(3,4) å¾—åˆ°äºŒç»´æ•°ç»„ bã€‚å½“æˆ‘ä»¬ä¿®æ”¹ b[0,0] ä¸º 99 åï¼Œå†æŸ¥çœ‹åŸæ•°ç»„ aï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¹Ÿå˜ä¸ºäº† 99ã€‚è¯´æ˜ a å’Œ b å®é™…ä¸Šå…±äº«åº•å±‚çš„æ•°æ®å†…å­˜ï¼Œåªæ˜¯è§†å›¾ä¸åŒã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼Œå¦‚æœ a åœ¨å†…å­˜ä¸­ä¸æ˜¯è¿ç»­å­˜å‚¨ï¼ˆæ¯”å¦‚å¯¹éè¿ç»­åˆ‡ç‰‡è°ƒç”¨reshapeï¼‰ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè§¦å‘å¤åˆ¶è¡Œä¸ºæˆ–æŠ¥é”™ã€‚ä½†å¯¹äºåƒä¸Šä¾‹è¿™æ ·ç”±è¿ç»­æ•°ç»„å¾—åˆ°çš„æ–°å½¢çŠ¶ï¼Œreshape æ˜¯é«˜æ•ˆä¸”å®‰å…¨çš„ã€‚</p>
<h3>2. flattenï¼šå¤åˆ¶å˜ç»´</h3>
<p>å¦‚æœå¸Œæœ›è·å¾—æ•°ç»„çš„ä¸€ç»´æ‹·è´ï¼Œå¯ä»¥ä½¿ç”¨ flatten() æ–¹æ³•ã€‚å®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼ˆæ·±æ‹·è´ï¼‰ï¼Œä¸åŸæ•°ç»„ä¸å†å…±äº«æ•°æ®ã€‚</p>
<blockquote><code>c = a.flatten()                # å°†æ•°ç»„aå±•å¼€ä¸ºä¸€ç»´å¹¶å¤åˆ¶</code><br>
<code>c[0] = 0</code><br>
<code>print(a)                       # [99  1  2  3  4  5  6  7  8  9 10 11] åŸæ•°ç»„aä¸å—å½±å“</code><br>
<code>print(c)                       # [0 1 2 3 4 5 6 7 8 9 10 11] æ–°æ•°ç»„cçš„ä¿®æ”¹ä¸å½±å“a</code></blockquote><p>æˆ‘ä»¬å¯¹ a.flatten() å¾—åˆ°çš„æ–°æ•°ç»„ c ä¿®æ”¹äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º0ï¼Œå¯ä»¥çœ‹åˆ°åŸæ•°ç»„ a ä»ç„¶ä¿æŒåŸæ ·ï¼ˆä»¥99å¼€å¤´ï¼‰ï¼Œå¹¶æ²¡æœ‰å˜ã€‚è¿™è¯æ˜ flatten è¿”å›çš„æ˜¯æ•°æ®çš„å‰¯æœ¬ã€‚ç±»ä¼¼åœ°ï¼Œnp.ravel() åˆ™å°½å¯èƒ½è¿”å›è§†å›¾ï¼ˆä¸ reshape(-1,) ç±»ä¼¼ï¼‰ï¼Œåªæœ‰åœ¨æ— æ³•è§†å›¾åŒ–å±•å¼€æ—¶æ‰ä¼šå¤åˆ¶ã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿç”¨ arr.reshape(-1) è¾¾åˆ°å±•å¹³æ•ˆæœï¼Œè¿™ç§æ–¹å¼ç­‰ä»·äº ravelã€‚</p>
<h3>3. resizeï¼šå°±åœ°å˜ç»´</h3>
<p>ndarray.resize(new_shape) æ–¹æ³•ä¼šç›´æ¥åœ¨åŸæ•°ç»„ä¸Šæ”¹å˜å…¶å½¢çŠ¶ã€‚ä¸ reshape ä¸åŒï¼Œresize æ˜¯å°±åœ°æ“ä½œï¼Œä¼šä¿®æ”¹åŸæ•°ç»„æœ¬èº«ã€‚å¦‚æœæ–°å°ºå¯¸æ¯”åŸæ¥çš„æ€»å…ƒç´ æ•°å°‘ï¼Œåé¢çš„å…ƒç´ ä¼šè¢«æˆªæ–­ï¼›å¦‚æœæ–°å°ºå¯¸æ›´å¤§ï¼Œåˆ™ä¼šç”¨0å¡«å……æ–°å¢çš„ä½ç½®ã€‚</p>
<blockquote><code>a.resize(3, 3)                 # å°†æ•°ç»„aç›´æ¥æ”¹ä¸º3x3å½¢çŠ¶</code><br>
<code>print(a)</code><br>
<code># [[99  1  2]</code><br>
<code>#  [ 3  4  5]</code><br>
<code>#  [ 6  7  8]]</code></blockquote><p>æˆ‘ä»¬å¯¹ a è°ƒç”¨äº† resize(3,3)ã€‚åŸå…ˆ a æœ‰12ä¸ªå…ƒç´ ï¼Œè°ƒæ•´ä¸º3x3ååªèƒ½å®¹çº³9ä¸ªå…ƒç´ ï¼Œå› æ­¤æœ€åçš„ [9,10,11] ä¸‰ä¸ªå€¼è¢«èˆå¼ƒäº†ã€‚resize ä¿®æ”¹äº†åŸæ•°ç»„æœ¬èº«çš„ shapeï¼Œç°åœ¨ a å˜æˆäº†3è¡Œ3åˆ—çš„æ–°æ•°ç»„ã€‚å¦‚æœæˆ‘ä»¬æ‰“å° a å¯ä»¥çœ‹åˆ°ï¼Œå®ƒåŒ…å«äº†åŸæ¥å‰9ä¸ªå…ƒç´ ï¼ˆåŒ…æ‹¬ä¹‹å‰ä¿®æ”¹çš„99ï¼‰ï¼Œå…¶ä½™è¢«ä¸¢å¼ƒã€‚</p>
<p>éœ€è°¨æ…ä½¿ç”¨ resizeï¼Œå› ä¸ºå®ƒä¼šç ´ååŸæ•°ç»„çš„æ•°æ®ã€‚å¦‚æœåªæ˜¯æƒ³å¾—åˆ°ç‰¹å®šå½¢çŠ¶çš„æ•°æ®å‰¯æœ¬ï¼Œä¼˜å…ˆè€ƒè™‘ reshape è¿”å›æ–°è§†å›¾ï¼Œæˆ–è€… np.copy åå† reshapeï¼Œä»¥å…æ— æ„ä¸­ä¿®æ”¹åŸå§‹æ•°æ®ã€‚</p>
<h2>ä¹ã€å¸ƒå°”ç´¢å¼•ä¸ä½ç½®ç´¢å¼•</h2>
<p>åœ¨å‰é¢ç¬¬ä¸‰èŠ‚æˆ‘ä»¬å·²ç»çœ‹è¿‡å¸ƒå°”æ•°ç»„çš„ç”¨æ³•ï¼Œç°åœ¨æ¥è¯¦ç»†ä»‹ç»å¸ƒå°”ç´¢å¼•å’Œä½ç½®ç´¢å¼•ã€‚è¿™ä¸¤è€…éƒ½æ˜¯ NumPy ä¸­å¼ºå¤§çš„ç´¢å¼•æœºåˆ¶ï¼Œå¯ç”¨äºä»æ•°ç»„ä¸­ç­›é€‰å‡ºæˆ‘ä»¬éœ€è¦çš„å…ƒç´ æˆ–é‡æ’æ•°ç»„é¡ºåºã€‚</p>
<h3>1. å¸ƒå°”ç´¢å¼•ï¼ˆBoolean Indexingï¼‰</h3>
<p>å¸ƒå°”ç´¢å¼•æ˜¯æŒ‡ä½¿ç”¨ä¸€ä¸ªå¸ƒå°”æ•°ç»„æ¥ç´¢å¼•å¦ä¸€ä¸ªæ•°ç»„ã€‚å¸ƒå°”æ•°ç»„ä¸­ä¸º True çš„ä½ç½®ï¼Œä¼šåœ¨ç»“æœä¸­ä¿ç•™ä¸‹æ¥ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª 1 åˆ° 9 çš„æ•°ç»„ï¼Œç°åœ¨æƒ³ç­›é€‰å‡ºå…¶ä¸­æ˜¯ 3 çš„å€æ•°çš„å…ƒç´ ï¼š</p>
<blockquote><code>ary = np.arange(1, 10)</code><br>
<code>print(ary % 3 == 0)           # [False False  True False False  True False False  True]</code><br>
<code>print(ary[ary % 3 == 0])      # [3 6 9] -&gt; ç­›é€‰å‡º3çš„å€æ•°</code></blockquote><p>ary % 3 == 0 ä¼šå¾—åˆ°ä¸€ä¸ªå’Œ ary ç­‰é•¿çš„å¸ƒå°”æ•°ç»„ï¼Œåªæœ‰å½“å…ƒç´ æ˜¯3çš„å€æ•°æ—¶å¯¹åº”ä½ç½®ä¸º Trueã€‚å°†è¿™ä¸ªå¸ƒå°”æ•°ç»„ä½œä¸ºç´¢å¼•ä¼ ç»™ aryï¼Œå°±è·å¾—äº†æ‰€æœ‰ True å¯¹åº”ä½ç½®ä¸Šçš„å…ƒç´  [3, 6, 9]ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ„é€ è‡ªå·±çš„å¸ƒå°”åˆ—è¡¨æ¥æ‰‹åŠ¨é€‰æ‹©å…ƒç´ ï¼š</p>
<blockquote><code>mask = [True, False, True, False, False, True, False, True, False]</code><br>
<code>print(ary[mask])              # [1 3 6 8] -&gt; True æ‰€åœ¨ä½ç½®çš„å…ƒç´ è¢«é€‰å‡º</code></blockquote><p>ä¸Šé¢ mask åˆ—è¡¨é•¿åº¦å¿…é¡»å’Œ ary ç›¸åŒï¼Œå…¶ä¸­ True çš„ä½ç½®æœ‰0,2,5,7ï¼ˆå¯¹åº”å…ƒç´ 1,3,6,8ï¼‰è¢«ç­›é€‰å‡ºæ¥ã€‚</p>
<p>å¸ƒå°”ç´¢å¼•å¸¸ç”¨çš„ä¸€ä¸ªåœºæ™¯æ˜¯ç›´æ¥å¯¹æ•°ç»„æ–½åŠ æ¡ä»¶ç­›é€‰ï¼Œå¦‚ä¸Šä¾‹æ‰€ç¤ºã€‚è€Œå¯¹äºæ›´å¤æ‚çš„æ¡ä»¶ï¼Œå¯ä»¥ç»“åˆä½è¿ç®—ç¬¦é€æ­¥æ„é€ ã€‚ä¾‹å¦‚ç­›é€‰åŒæ—¶æ˜¯3å’Œ7çš„å€æ•°çš„å…ƒç´ ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<blockquote><code>cond = (ary % 3 == 0) &amp; (ary % 7 == 0)</code><br>
<code>print(cond)                   # [False False False False False False False False False]</code><br>
<code>print(ary[cond])              # [] -&gt; 1~9ä¸­æ²¡æœ‰åŒæ—¶æ»¡è¶³3å’Œ7å€æ•°æ¡ä»¶çš„æ•°å­—</code></blockquote><p>è¿™é‡Œ &amp; è¡¨ç¤ºé€ä½ä¸è¿ç®—ï¼Œç›¸å½“äºé€»è¾‘ä¸Šçš„â€œä¸”â€ã€‚ç”±äº1åˆ°9ä¸­ä¸å­˜åœ¨æ—¢æ˜¯3åˆæ˜¯7çš„å€æ•°çš„æ•°ï¼Œç»“æœä¸ºç©ºæ•°ç»„ã€‚å¦‚æœæ¢ä¸€ä¸ªèŒƒå›´ï¼Œæ¯”å¦‚1åˆ°100ï¼Œå°±å¯ä»¥æ‰¾åˆ°21,42,63,84è¿™æ ·çš„å€¼äº†ã€‚</p>
<h3>2. ä½ç½®ç´¢å¼•</h3>
<p>ä½ç½®ç´¢å¼•æ˜¯ä½¿ç”¨æ•´æ•°æ•°ç»„ï¼ˆæˆ–åˆ—è¡¨ï¼‰æ¥æŒ‡å®šæƒ³è¦çš„ç´¢å¼•ä½ç½®ã€‚é€šè¿‡ä½ç½®ç´¢å¼•ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°æ’åˆ—åŸæ•°ç»„æˆ–è€…æŠ½å–ä»»æ„æŒ‡å®šä½ç½®çš„å…ƒç´ ç»„æˆæ–°æ•°ç»„ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<blockquote><code>idx = [3, 2, 0, 1]            # å®šä¹‰ä¸€ä¸ªç´¢å¼•é¡ºåº</code><br>
<code>arr = np.arange(1, 6)         # [1 2 3 4 5]</code><br>
<code>print(arr[idx])               # [4 3 1 2] -&gt; æŒ‰idxé¡ºåºé‡æ–°æ’åˆ—å¾—åˆ°çš„æ–°æ•°ç»„</code></blockquote><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç´¢å¼•åˆ—è¡¨ [3,2,0,1] æ¥ç´¢å¼•æ•°ç»„ [1,2,3,4,5]ï¼Œç»“æœå°±æ˜¯æŒ‰ç…§ç»™å®šé¡ºåºå–å‡ºå¯¹åº”å…ƒç´ ï¼šç¬¬3å·å…ƒç´ (å€¼4)ã€ç¬¬2å·å…ƒç´ (å€¼3)ã€ç¬¬0å·å…ƒç´ (å€¼1)ã€ç¬¬1å·å…ƒç´ (å€¼2)ï¼Œç»„åˆæˆ [4, 3, 1, 2]ã€‚é€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥å®ç°å¯¹æ•°ç»„çš„ä»»æ„é‡æ’ã€‚</p>
<p>ä½ç½®ç´¢å¼•ä¹Ÿæ”¯æŒé‡å¤å–ç›¸åŒä½ç½®ã€‚ä¾‹å¦‚ï¼š</p>
<blockquote><code>idx2 = [0, 0, 1, 1]</code><br>
<code>print(arr[idx2])              # [1 1 2 2] -&gt; 0å’Œ1ç´¢å¼•å„å‡ºç°ä¸¤æ¬¡</code></blockquote><p>ç»“æœ [1, 1, 2, 2] ä¸­ï¼ŒåŸæ•°ç»„ç¬¬0å…ƒç´ 1å’Œç¬¬1å…ƒç´ 2å„è¢«å–äº†ä¸¤æ¬¡ã€‚å¯è§ï¼Œç´¢å¼•å¾—åˆ°çš„æ–°æ•°ç»„å’ŒåŸæ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ— å…³ï¼Œè€Œå–å†³äºç´¢å¼•åˆ—è¡¨çš„é•¿åº¦ã€‚</p>
<h3>3. åˆ©ç”¨å¸ƒå°”ç´¢å¼•ä¿®æ”¹å€¼</h3>
<p>å¸ƒå°”ç´¢å¼•ä¸ä½†å¯ä»¥ç”¨äºç­›é€‰æ•°æ®ï¼Œè¿˜å¯ä»¥ç”¨äºç›´æ¥ä¿®æ”¹æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªçŸ©é˜µï¼Œæ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä½å­¦ç”Ÿçš„æˆç»©ï¼Œç°åœ¨å¸Œæœ›æŠŠåŠæ ¼åˆ†ï¼ˆ&gt;=60ï¼‰çš„æ ‡è®°ä¸º1ï¼Œä¸åŠæ ¼çš„æ ‡è®°ä¸º0ï¼š</p>
<blockquote><code>scores = np.array([[66.6, 54.2, 88.8],</code><br>
<code>                   [98.7, 45.6, 12.3],</code><br>
<code>                   [56.7, 89.0, 33.3]])</code><br>
<code>mask = scores &gt;= 60</code><br>
<code>scores[mask] = 1</code><br>
<code>scores[~mask] = 0</code><br>
<code>print(scores)</code><br>
<code># [[1. 0. 1.]</code><br>
<code>#  [1. 0. 0.]</code><br>
<code>#  [0. 1. 0.]]</code></blockquote><p>è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆç”¨ scores &gt;= 60 å¾—åˆ°äº†ä¸€ä¸ªåŒå½¢çŠ¶çš„å¸ƒå°”çŸ©é˜µ maskï¼Œè¡¨ç¤ºæ¯ä¸ªåˆ†æ•°æ˜¯å¦åŠæ ¼ã€‚ç„¶ååˆ©ç”¨å¸ƒå°”ç´¢å¼•ï¼Œç›´æ¥å¯¹åŸæ•°ç»„èµ‹å€¼ï¼šscores[mask] = 1 å°†æ‰€æœ‰åŠæ ¼çš„ä½ç½®è®¾ä¸º1ï¼Œscores[<del>mask] = 0 å°†ä¸åŠæ ¼çš„ä½ç½®ï¼ˆ</del>mask ä¸ºmaskå–åï¼‰è®¾ä¸º0ã€‚æœ€ç»ˆ scores æ•°ç»„ä¸­çš„å€¼å…¨éƒ½å˜æˆäº†0æˆ–1ï¼Œå®ç°äº†æˆ‘ä»¬æƒ³è¦çš„æ ‡è®°åŠŸèƒ½ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼Œåƒ scores[mask] = 1 è¿™æ ·çš„æ“ä½œä¼šä½œç”¨äºåŸæ•°ç»„ï¼Œå› æ­¤åŠ¡å¿…è¦ç¡®å®šè¿™æ ·åšæ˜¯å®‰å…¨ä¸”ç¬¦åˆé¢„æœŸçš„ã€‚å¦‚æœåªæƒ³å¾—åˆ°ä¸€ä¸ªæ ‡è®°çŸ©é˜µè€Œä¸ä¿®æ”¹åŸæ•°æ®ï¼Œå¯ä»¥å…ˆç”¨ scores.copy() å¤åˆ¶ä¸€ä»½å†æ“ä½œï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ astype ç”Ÿæˆï¼Œå¦‚ (scores &gt;= 60).astype(int)ï¼Œè¿™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„0/1æ•°ç»„ï¼Œä¸å½±å“åŸæ¥çš„ scoresã€‚</p>
<h2>åã€æ•°ç»„çš„ç»„åˆä¸æ‹†åˆ†</h2>
<p>å½“æˆ‘ä»¬æœ‰å¤šä¸ªæ•°ç»„æ—¶ï¼Œå¸¸å¸¸éœ€è¦å°†å®ƒä»¬åˆå¹¶åœ¨ä¸€èµ·ï¼Œæˆ–è€…å°†ä¸€ä¸ªå¤§æ•°ç»„æ‹†åˆ†æˆå¤šä¸ªå°æ•°ç»„ã€‚NumPy ä¸ºæ­¤æä¾›äº†å¤šç§æ–¹ä¾¿çš„å‡½æ•°ã€‚è¿™é‡Œæˆ‘ä»¬ä»‹ç»æŒ‰è¡Œï¼ˆå‚ç›´ï¼‰ã€æŒ‰åˆ—ï¼ˆæ°´å¹³ï¼‰çš„ç»„åˆä¸æ‹†åˆ†ï¼Œä»¥åŠç®€å•æåŠæ›´é«˜ç»´åº¦çš„æƒ…å†µã€‚</p>
<h3>1. æ•°ç»„çš„ç»„åˆ (æ‹¼æ¥)</h3>
<ul>
<li>å‚ç›´ç»„åˆï¼šä½¿ç”¨ np.vstack((a, b, ...)) å¯ä»¥æ²¿ç€è¡Œæ–¹å‘å°†æ•°ç»„å †å èµ·æ¥ã€‚è¦æ±‚å¾…ç»„åˆæ•°ç»„åˆ—æ•°ç›¸åŒã€‚ç­‰ä»·çš„æ–¹æ³•æ˜¯ np.concatenate((a,b), axis=0) å…¶ä¸­ axis=0 è¡¨ç¤ºæŒ‰è¡Œæ‹¼æ¥ã€‚</li>
<li>æ°´å¹³ç»„åˆï¼šä½¿ç”¨ np.hstack((a, b, ...)) æ²¿ç€åˆ—æ–¹å‘æ‹¼æ¥æ•°ç»„ï¼Œè¦æ±‚è¡Œæ•°ç›¸åŒã€‚ç­‰ä»·äº np.concatenate((a,b), axis=1)ã€‚</li>
<li>æ·±åº¦ç»„åˆï¼šä½¿ç”¨ np.dstack((a, b, ...)) å¯ä»¥åœ¨ç¬¬ä¸‰ç»´åº¦ä¸Šå †å æ•°ç»„ï¼Œè¦æ±‚å¾…ç»„åˆæ•°ç»„å½¢çŠ¶ç›¸åŒã€‚ç»“æœæ•°ç»„ç»´åº¦ä¼šåŠ ä¸€ï¼ˆä¾‹å¦‚ä¸¤ä¸ª2x2çŸ©é˜µæ·±åº¦ç»„åˆå¾—åˆ° shape=(2,2,2) çš„ä¸‰ç»´æ•°ç»„ï¼‰ã€‚</li>
<li>ä¸è§„åˆ™ç»„åˆï¼šå¦‚æœç»„åˆçš„æ•°ç»„åœ¨ç›®æ ‡è½´é•¿åº¦ä¸åŒï¼Œå¯ä»¥ç”¨ np.concatenate æˆ– np.stack ç­‰ä¸€èˆ¬æ‹¼æ¥å‡½æ•°è‡ªè¡ŒæŒ‡å®š axisï¼ˆæˆ–ä½¿ç”¨ np.pad è¡¥é½åç»„åˆï¼‰ã€‚np.stack å’Œ np.concatenate çš„åŒºåˆ«åœ¨äºï¼Œstack ä¼šå¢åŠ ä¸€ä¸ªæ–°ç»´åº¦ï¼ˆæ¯”å¦‚åœ¨æ–°è½´å åŠ å½¢æˆæ›´é«˜ç»´æ•°ç»„ï¼‰ï¼Œè€Œ concatenate æ˜¯åœ¨å·²æœ‰è½´ä¸Šæ‹¼æ¥ã€‚
ä¸‹é¢ä»¥å‚ç›´å’Œæ°´å¹³ç»„åˆä¸ºä¾‹ï¼š</li>
</ul>
<blockquote><code>a = np.array([[1, 2],</code><br>
<code>              [3, 4]])</code><br>
<code>b = np.array([[5, 6],</code><br>
<code>              [7, 8]])</code><br>
<code>v = np.vstack((a, b))</code><br>
<code>h = np.hstack((a, b))</code><br>
<code>d = np.dstack((a, b))</code><br>
<code>print(v)</code><br>
<code># ... (8 more lines)</code></blockquote>
<p><em>Full code available in the <a href="https://github.com/geyuxu">GitHub repository</a>.</em></p><p>è¿™é‡Œ a å’Œ b éƒ½æ˜¯ 2x2 çŸ©é˜µã€‚vstack åœ¨è¡Œä¸Šå †å ï¼Œç»“æœ v æ˜¯ 4x2 çŸ©é˜µï¼›hstack åœ¨åˆ—ä¸Šæ‹¼æ¥ï¼Œç»“æœ h æ˜¯ 2x4 çŸ©é˜µã€‚dstack åˆ™æŠŠä¸¤ä¸ªçŸ©é˜µæ²¿ç¬¬ä¸‰ç»´ç»„åˆæˆä¸€ä¸ªä¸‰ç»´æ•°ç»„ï¼ˆ2è¡Œ2åˆ—2å±‚ï¼‰ï¼Œæˆ‘ä»¬æ‰“å°äº†å…¶å½¢çŠ¶ (2, 2, 2)ã€‚å¦‚æœæ‰“å° d æœ¬èº«ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå…¶å®ç›¸å½“äºæŠŠ a å’Œ b å½“ä½œä¸¤å±‚â€œå â€åœ¨ä¸€èµ·ã€‚</p>
<h3>2. æ•°ç»„çš„æ‹†åˆ† (åˆ†å‰²)</h3>
<p>ä¸ç»„åˆç›¸åï¼ŒNumPy æä¾›äº†å¯¹åº”çš„æ‹†åˆ†å‡½æ•°ï¼š</p>
<ul>
<li>å‚ç›´æ‹†åˆ†ï¼šnp.vsplit(array, sections) å°†æ•°ç»„åœ¨è¡Œæ–¹å‘æ‹†åˆ†ä¸ºè‹¥å¹²éƒ¨åˆ†ã€‚é€šå¸¸ sections æ˜¯ä¸€ä¸ªå¯ä»¥æ•´é™¤è¡Œæ•°çš„æ•´æ•°ï¼Œè¡¨ç¤ºç­‰åˆ†æ•°é‡ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç´¢å¼•åˆ—è¡¨ï¼Œè¡¨ç¤ºæ²¿è½´åˆ‡å‰²çš„ä½ç½®ã€‚ç±»ä¼¼åœ°å¯ä»¥ä½¿ç”¨ np.split(array, sections, axis=0) è¾¾åˆ°åŒæ ·æ•ˆæœã€‚</li>
<li>æ°´å¹³æ‹†åˆ†ï¼šnp.hsplit(array, sections) åœ¨åˆ—æ–¹å‘æ‹†åˆ†æ•°ç»„ï¼Œè¦æ±‚åˆ—æ•°å¯ç­‰åˆ†ï¼Œæˆ–æä¾›åˆ—ç´¢å¼•åˆ—è¡¨ã€‚ç­‰ä»·äº np.split(array, sections, axis=1)ã€‚</li>
<li>æ·±åº¦æ‹†åˆ†ï¼šnp.dsplit(array, sections) åœ¨ç¬¬ä¸‰ç»´ä¸Šæ‹†åˆ†ä¸‰ç»´æ•°ç»„ã€‚åŒç†ä½¿ç”¨ axis=2 çš„ split ä¹Ÿè¡Œã€‚
ä¾‹å­ï¼šå°†ä¸€ä¸ª 2x6 çš„æ•°ç»„æ°´å¹³æ‹†åˆ†ä¸ºä¸‰ä¸ª 2x2 çš„å°æ•°ç»„ï¼Œä»¥åŠå°†å…¶å‚ç›´æ‹†åˆ†ä¸ºä¸¤å—ï¼š</li>
</ul>
<blockquote><code>c = np.arange(1, 13).reshape(2, 6)</code><br>
<code>print(c)</code><br>
<code># [[ 1  2  3  4  5  6]</code><br>
<code>#  [ 7  8  9 10 11 12]]</code><br>
<code>print(np.hsplit(c, 3))</code><br>
<code># [array([[1, 2],</code><br>
<code>#        [7, 8]]), array([[3, 4],</code><br>
<code>#        [9, 10]]), array([[ 5,  6],</code><br>
<code>#        [11, 12]])]</code><br>
<code>print(np.vsplit(c, 2))</code><br>
<code># [array([[1, 2, 3, 4, 5, 6]]), array([[ 7,  8,  9, 10, 11, 12]])]</code></blockquote><p>æˆ‘ä»¬åˆ›å»ºäº† c ä¸º 2x6 çŸ©é˜µï¼Œå†…å®¹æ˜¯1åˆ°12ã€‚np.hsplit(c, 3) å°†å…¶æŒ‰åˆ—åˆ‡æˆ3ä»½ï¼Œæ¯ä»½2åˆ—ï¼Œç»“æœæ˜¯åŒ…å«ä¸‰ä¸ª 2x2 æ•°ç»„çš„åˆ—è¡¨ï¼ˆå¯ä»¥çœ‹åˆ°è¾“å‡ºè¢«åˆ†æˆäº†ä¸‰éƒ¨åˆ†ï¼‰ã€‚np.vsplit(c, 2) åˆ™å°†çŸ©é˜µæŒ‰è¡Œä¸€åˆ†ä¸ºäºŒï¼Œå¾—åˆ°ä¸¤ä¸ª 1x6 çš„è¡Œå‘é‡ã€‚ä½¿ç”¨ np.split å‡½æ•°ä¹Ÿå¯ä»¥å®ç°åŒæ ·æ•ˆæœï¼Œåªéœ€æŒ‡å®šè½´å‚æ•°ã€‚</p>
<p>å¦‚æœæƒ³æŒ‰ä¸å‡ç­‰çš„éƒ¨åˆ†æ‹†åˆ†ï¼Œæ¯”å¦‚å°†ä¸Šé¢çš„ c æŒ‰åˆ—æ‹†æˆå‰ä¸¤åˆ—å’Œå…¶ä½™åˆ—ä¸¤éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•åˆ—è¡¨å‚æ•°ï¼šnp.hsplit(c, [2])ï¼ˆåœ¨åˆ—ç´¢å¼•2å¤„åˆ‡å¼€ï¼‰ã€‚ç»„åˆä¸æ‹†åˆ†æ“ä½œå¯ä»¥çµæ´»åœ°å¯¹æ•°ç»„è¿›è¡Œç»“æ„è°ƒæ•´ï¼Œå¯¹äºå¤„ç†åˆ†å—æ•°æ®æˆ–å°†ç»“æœåˆ†ç»„éå¸¸æœ‰ç”¨ã€‚</p>
<h2>åä¸€ã€å…¶ä»–å¸¸ç”¨å±æ€§å’Œæ–¹æ³•</h2>
<p>æœ€åä»‹ç»å‡ ä¸ª ndarray å¯¹è±¡çš„å…¶å®ƒæœ‰ç”¨å±æ€§å’Œæ–¹æ³•ï¼š</p>
<ul>
<li>å®éƒ¨å’Œè™šéƒ¨ (.real, .imag)ï¼šå¯¹äºå¤æ•°ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡ .real å’Œ .imag å±æ€§è®¿é—®å®ƒçš„å®éƒ¨å’Œè™šéƒ¨éƒ¨åˆ†ã€‚</li>
<li>è½¬ç½® (.T)ï¼šäºŒç»´æ•°ç»„çš„ .T å±æ€§å¯ä»¥è·å–å®ƒçš„è½¬ç½®ï¼ˆè¡Œåˆ—äº’æ¢ï¼‰ã€‚æ›´é«˜ç»´æ•°ç»„çš„ .transpose() æ–¹æ³•ä¹Ÿå¯ä»¥æŒ‰æŒ‡å®šè½´é¡ºåºè½¬ç½®ã€‚</li>
<li>å¹³å±•è¿­ä»£ (.flat)ï¼š.flat å±æ€§æä¾›äº†ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¯ä»¥ç”¨æ¥é€å…ƒç´ éå†æ•°ç»„ï¼ˆä¾æ¬¡æŒ‰è¡Œå±•å¼€ï¼‰ã€‚</li>
<li>è½¬åˆ—è¡¨ (.tolist())ï¼šå°†æ•°ç»„è½¬æ¢ä¸ºåµŒå¥—çš„ Python åˆ—è¡¨ï¼Œå¸¸ç”¨äºå°†ç»“æœæ•°æ®ä¼ é€’ç»™ä¸æ”¯æŒ ndarray çš„æ¥å£ã€‚
ä¸‹é¢é€šè¿‡ä¸€ä¸ªåŒ…å«å¤æ•°çš„æ•°ç»„æ¥æ¼”ç¤ºè¿™äº›å±æ€§ï¼š</li>
</ul>
<blockquote><code>A = np.array([[1+1j, 2+4j, 3+7j],</code><br>
<code>              [4+2j, 5+5j, 6+8j],</code><br>
<code>              [7+3j, 8+6j, 9+9j]])</code><br>
<code>print(A.real)</code><br>
<code># [[1. 2. 3.]</code><br>
<code>#  [4. 5. 6.]</code><br>
<code>#  [7. 8. 9.]]</code><br>
<code>print(A.imag)</code><br>
<code># ... (9 more lines)</code></blockquote>
<p><em>Full code available in the <a href="https://github.com/geyuxu">GitHub repository</a>.</em></p><p>åœ¨è¿™ä¸ª 3x3 å¤æ•°çŸ©é˜µ A ä¸­ï¼š</p>
<ul>
<li>A.real æå–äº†å®éƒ¨ç»„æˆä¸€ä¸ªæ–°çš„æµ®ç‚¹æ•°ç»„ï¼ŒA.imag åˆ™æå–è™šéƒ¨ã€‚</li>
<li>A.T ç»™å‡ºäº†çŸ©é˜µçš„è½¬ç½®ï¼Œè¡Œåˆ—å¯¹è°ƒäº†ã€‚</li>
<li>[x for x in A.flat] ä½¿ç”¨ flat è¿­ä»£å™¨å°†æ‰€æœ‰å…ƒç´ æŒ‰è¡Œå±•å¹³æˆä¸€ç»´å¹¶æ”¶é›†åˆ°åˆ—è¡¨ä¸­ï¼Œç»“æœå°±æ˜¯åŒ…å«9ä¸ªå¤æ•°çš„ Python åˆ—è¡¨ã€‚</li>
<li>A.tolist() åˆ™ç›´æ¥å¾—åˆ°ä¸€ä¸ªä¸‰å±‚åµŒå¥—åˆ—è¡¨ï¼Œä¸åŸçŸ©é˜µç»“æ„å¯¹åº”ï¼Œæ¯ä¸ªå…ƒç´ è¿˜æ˜¯ Python å†…ç½®çš„å¤æ•°ç±»å‹ã€‚
è¿™äº›å±æ€§å’Œæ–¹æ³•ä½¿æˆ‘ä»¬å¯¹ ndarray çš„æ“ä½œæ›´åŠ ä¾¿æ·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦æŠŠ NumPy æ•°ç»„ä¼ ç»™çº¯ Python ä»£ç å¤„ç†ï¼Œå¯ä»¥ç”¨ .tolist() è½¬æ¢ã€‚å¦‚æœéœ€è¦é€å…ƒç´ åœ°å¤„ç†æ•°ç»„ï¼ˆå°½ç®¡ä¸€èˆ¬åº”é¿å… Python å±‚é¢çš„å¾ªç¯ï¼‰ï¼Œ.flat æä¾›äº†æ–¹ä¾¿çš„éå†æ‰‹æ®µã€‚è€Œå¯¹å¤æ•°æ•°ç»„è¿›è¡Œè¿ç®—æ—¶ï¼Œ.real å’Œ .imag åˆ™å¯ä»¥è½»æ¾åœ°åˆ†ç¦»å‡ºå®éƒ¨å’Œè™šéƒ¨è¿›è¡Œåˆ†æã€‚</li>
</ul>

    </article>
    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/prismjs@1/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script>
<script>
Prism.highlightAll();
document.querySelectorAll('article pre').forEach(pre => {
    const code = pre.querySelector('code');
    if (!code) return;
    const toolbar = document.createElement('div');
    toolbar.className = 'code-toolbar';
    const btn = document.createElement('button');
    btn.className = 'copy-btn';
    btn.textContent = 'Copy';
    btn.onclick = () => {
        navigator.clipboard.writeText(code.textContent).then(() => {
            btn.textContent = 'Copied!';
            btn.classList.add('copied');
            setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
        });
    };
    toolbar.appendChild(btn);
    pre.parentNode.insertBefore(toolbar, pre);
});
</script>
</body>
</html>