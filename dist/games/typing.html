<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed | Yuxu Ge</title>
    <style>
        :root { --black: #111; --off-white: #f4f4f4; --vermilion: #C41E3A; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--off-white); }
        a { color: var(--vermilion); text-decoration: none; }
        a:hover { opacity: 0.75; }
        .layout { min-height: 100vh; }
        .sidebar { position: fixed; top: 0; left: 0; width: 320px; height: 100vh; background: var(--black); color: var(--off-white); padding: 3rem 2rem; display: flex; flex-direction: column; justify-content: space-between; }
        .sidebar-top { display: flex; flex-direction: column; align-items: center; text-align: center; }
        .avatar { display: block; width: 120px; height: 120px; border-radius: 50%; border: 3px solid var(--vermilion); margin-bottom: 1.5rem; overflow: hidden; }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
        .sidebar h1 { font-size: 1.8rem; font-weight: 700; color: var(--off-white); }
        .title-role { font-size: 0.9rem; color: #888; margin-top: 0.25rem; }
        .contact-block { margin-top: 2.5rem; width: 100%; }
        .social-links { display: flex; flex-direction: column; align-items: center; gap: 0.75rem; }
        .social-links a { display: flex; align-items: center; gap: 0.75rem; width: 160px; color: var(--off-white); opacity: 0.7; padding: 0.5rem 0.75rem; border-radius: 4px; font-size: 0.9rem; }
        .social-links a:hover { color: var(--vermilion); opacity: 1; }
        .social-links svg { width: 20px; height: 20px; }
        .social-links .orcid-link { font-size: 0.68rem; gap: 0.5rem; white-space: nowrap; }
        .sidebar-footer { text-align: center; font-size: 0.75rem; color: #555; }
        .content { margin-left: 320px; padding: 2rem 3rem; min-height: 100vh; display: flex; flex-direction: column; align-items: center; background: linear-gradient(135deg, #434343 0%, #000000 100%); }
        .back-link { display: inline-flex; font-size: 0.85rem; margin-bottom: 1rem; color: #aaa; align-self: flex-start; }
        .back-link:hover { color: #fff; }
        .game-title { font-size: 2.5rem; color: #ffd700; margin-bottom: 1rem; }
        .stats { display: flex; gap: 2rem; margin-bottom: 1.5rem; }
        .stat-box { background: rgba(255,255,255,0.1); padding: 1rem 1.5rem; border-radius: 15px; text-align: center; color: #fff; }
        .stat-label { font-size: 0.75rem; opacity: 0.7; margin-bottom: 0.25rem; }
        .stat-value { font-size: 2rem; font-weight: 700; color: #ffd700; }
        .text-display { background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 15px; max-width: 700px; width: 100%; margin-bottom: 1.5rem; }
        .text-content { font-size: 1.5rem; line-height: 1.8; color: #888; font-family: 'Courier New', monospace; }
        .text-content .correct { color: #2ecc71; }
        .text-content .incorrect { color: #e74c3c; background: rgba(231,76,60,0.2); }
        .text-content .current { background: #ffd700; color: #000; }
        .input-area { width: 100%; max-width: 700px; }
        .input-area input { width: 100%; padding: 1rem; font-size: 1.25rem; font-family: 'Courier New', monospace; border: 2px solid #ffd700; border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff; outline: none; }
        .input-area input:focus { background: rgba(255,255,255,0.15); }
        .time-select { margin-top: 1rem; display: flex; gap: 0.5rem; }
        .time-select button { padding: 0.5rem 1rem; font-size: 0.9rem; border: none; border-radius: 20px; cursor: pointer; background: rgba(255,255,255,0.2); color: #fff; }
        .time-select button.active { background: #ffd700; color: #000; }
        .controls { margin-top: 1rem; }
        button.main-btn { padding: 0.75rem 2rem; font-size: 1rem; background: #ffd700; color: #000; border: none; border-radius: 25px; cursor: pointer; font-weight: 700; }
        button.main-btn:hover { background: #ffed4a; }
        .message { margin-top: 1rem; font-size: 1.25rem; font-weight: 600; color: #fff; min-height: 1.5rem; }
        .instructions { margin-top: 1.5rem; color: #888; font-size: 0.9rem; text-align: center; }
        @media (max-width: 900px) {
            .sidebar { position: relative; width: 100%; height: auto; padding: 2rem 1.5rem 1rem; }
            .social-links { flex-direction: row; flex-wrap: wrap; justify-content: center; }
            .social-links a { width: auto; padding: 0.5rem; font-size: 0; gap: 0; }
            .social-links svg { width: 24px; height: 24px; }
            .content { margin-left: 0; padding: 1.5rem 1rem; }
            .text-content { font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <div class="layout">
        <aside class="sidebar" id="sidebar-content"></aside>
        <script src="/components/sidebar.js"></script>
        <main class="content">
            <a href="/games/" class="back-link">‚Üê Back to Games</a>
            <h1 class="game-title">Typing Speed</h1>
            <div class="stats">
                <div class="stat-box"><div class="stat-label">WPM</div><div class="stat-value" id="wpm">0</div></div>
                <div class="stat-box"><div class="stat-label">Accuracy</div><div class="stat-value" id="accuracy">100%</div></div>
                <div class="stat-box"><div class="stat-label">Time</div><div class="stat-value" id="time">60</div></div>
            </div>
            <div class="text-display">
                <div class="text-content" id="text-content"></div>
            </div>
            <div class="input-area">
                <input type="text" id="input" placeholder="Start typing..." autocomplete="off" autofocus>
            </div>
            <div class="time-select">
                <button onclick="setTime(30)">30s</button>
                <button class="active" onclick="setTime(60)">60s</button>
                <button onclick="setTime(120)">120s</button>
            </div>
            <div class="controls">
                <button class="main-btn" onclick="startGame()">Restart</button>
            </div>
            <div class="message" id="message"></div>
            <div class="instructions">
                Type the text above as quickly and accurately as possible!
            </div>
        </main>
    </div>
    <script>
        const TEXTS = [
            "The quick brown fox jumps over the lazy dog. Pack my box with five dozen liquor jugs. How vexingly quick daft zebras jump!",
            "Programming is the art of telling a computer what to do. Good code is its own best documentation. First solve the problem then write the code.",
            "JavaScript is the programming language of the web. It can run in browsers and servers. TypeScript adds static typing to JavaScript.",
            "Practice makes perfect. The more you type, the faster you become. Accuracy is just as important as speed when typing.",
            "Artificial intelligence and machine learning are transforming how we interact with technology. The future is exciting and full of possibilities."
        ];
        let text = '', typed = '', startTime = null, timerInterval = null, gameTime = 60, timeLeft = 60, gameOver = false;
        let correctChars = 0, totalChars = 0;

        function setTime(t) {
            gameTime = t;
            document.querySelectorAll('.time-select button').forEach((btn, i) => {
                btn.classList.toggle('active', [30, 60, 120][i] === t);
            });
            startGame();
        }

        function startGame() {
            text = TEXTS[Math.floor(Math.random() * TEXTS.length)];
            typed = '';
            startTime = null;
            timeLeft = gameTime;
            gameOver = false;
            correctChars = 0;
            totalChars = 0;
            clearInterval(timerInterval);
            document.getElementById('input').value = '';
            document.getElementById('input').disabled = false;
            document.getElementById('input').focus();
            document.getElementById('wpm').textContent = '0';
            document.getElementById('accuracy').textContent = '100%';
            document.getElementById('time').textContent = gameTime;
            document.getElementById('message').textContent = '';
            render();
        }

        function render() {
            const content = document.getElementById('text-content');
            let html = '';
            for (let i = 0; i < text.length; i++) {
                if (i < typed.length) {
                    if (typed[i] === text[i]) {
                        html += `<span class="correct">${text[i]}</span>`;
                    } else {
                        html += `<span class="incorrect">${text[i]}</span>`;
                    }
                } else if (i === typed.length) {
                    html += `<span class="current">${text[i]}</span>`;
                } else {
                    html += text[i];
                }
            }
            content.innerHTML = html;
        }

        function updateStats() {
            const elapsed = (Date.now() - startTime) / 1000 / 60; // minutes
            const words = correctChars / 5;
            const wpm = Math.round(words / elapsed) || 0;
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
            document.getElementById('wpm').textContent = wpm;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        function endGame() {
            gameOver = true;
            clearInterval(timerInterval);
            document.getElementById('input').disabled = true;
            const wpm = document.getElementById('wpm').textContent;
            const accuracy = document.getElementById('accuracy').textContent;
            document.getElementById('message').textContent = `Done! ${wpm} WPM with ${accuracy} accuracy`;
        }

        document.getElementById('input').addEventListener('input', e => {
            if (gameOver) return;
            if (!startTime) {
                startTime = Date.now();
                timerInterval = setInterval(() => {
                    timeLeft--;
                    document.getElementById('time').textContent = timeLeft;
                    if (timeLeft <= 0) endGame();
                }, 1000);
            }
            typed = e.target.value;
            totalChars = typed.length;
            correctChars = 0;
            for (let i = 0; i < typed.length && i < text.length; i++) {
                if (typed[i] === text[i]) correctChars++;
            }
            render();
            updateStats();
            if (typed === text) endGame();
        });

        startGame();
    </script>
</body>
</html>
