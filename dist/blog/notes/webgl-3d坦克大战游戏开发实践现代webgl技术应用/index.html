<!DOCTYPE html><html lang="zh"> <head><!-- Global Metadata --><meta charset="utf-8"><!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">--><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"><link rel="shortcut icon" href="/favicon.png" type="image/png"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Ge Yuxu • AI &#38; Engineering" href="https://geyuxu.com/rss.xml"><meta name="generator" content="Astro v5.5.6"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://geyuxu.com/blog/notes/webgl-3d%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5%E7%8E%B0%E4%BB%A3webgl%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8/"><!-- Primary Meta Tags --><title>WebGL 3D坦克大战游戏开发实践：现代WebGL技术应用</title><meta name="title" content="WebGL 3D坦克大战游戏开发实践：现代WebGL技术应用"><meta name="description"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://geyuxu.com/blog/notes/webgl-3d%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5%E7%8E%B0%E4%BB%A3webgl%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8/"><meta property="og:title" content="WebGL 3D坦克大战游戏开发实践：现代WebGL技术应用"><meta property="og:description"><meta property="og:image" content="https://geyuxu.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://geyuxu.com/blog/notes/webgl-3d%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5%E7%8E%B0%E4%BB%A3webgl%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8/"><meta property="twitter:title" content="WebGL 3D坦克大战游戏开发实践：现代WebGL技术应用"><meta property="twitter:description"><meta property="twitter:image" content="https://geyuxu.com/blog-placeholder-1.jpg"><script src="/js/jquery-3.7.1.min.js"></script><script src="/js/copy-code-button.js" defer></script><!-- Dify Chatbot Configuration --><script>
 window.difyChatbotConfig = {
  token: 'VgrjCAto93bjE0MW',
  systemVariables: {
    // user_id: 'YOU CAN DEFINE USER ID HERE',
    // conversation_id: 'YOU CAN DEFINE CONVERSATION ID HERE, IT MUST BE A VALID UUID',
  },
  userVariables: {
    // avatar_url: 'YOU CAN DEFINE USER AVATAR URL HERE',
    // name: 'YOU CAN DEFINE USER NAME HERE',
  },
 }
</script><!-- Dify Chatbot Script --><script src="https://udify.app/embed.min.js" id="VgrjCAto93bjE0MW" defer>
</script><!-- Dify Chatbot Custom Styles --><script is:global>
	window.addEventListener('DOMContentLoaded', () => {
		$('.toc ol').css({
		'list-style': 'none',   // 隐藏 1. 2. 3.
		'margin': 0,
		'padding-left': 0,       // 可按需调整
		});
		$('.toc ol > li').css({
		'list-style': 'none',   // 隐藏 1. 2. 3.
		'padding-left': 10
		});
        $('.sidebar').append($('.toc'));
      });
	</script><link rel="stylesheet" href="/_astro/assets-slug_.BFPovWfH.css">
<style>a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}header[data-astro-cid-3ef6ksr2]{margin:0;padding:0 1em;background:#fff;box-shadow:0 2px 8px rgba(var(--black),5%)}h2[data-astro-cid-3ef6ksr2]{margin:0;font-size:1em}h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2],h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none}nav[data-astro-cid-3ef6ksr2]{display:flex;align-items:center;justify-content:space-between}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{padding:1em .5em;color:var(--black);border-bottom:4px solid transparent;text-decoration:none}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none;border-bottom-color:var(--accent)}.social-links[data-astro-cid-3ef6ksr2],.social-links[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{display:flex}@media (max-width: 720px){.social-links[data-astro-cid-3ef6ksr2]{display:none}}footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}
.statement[data-astro-cid-uffxixac]{font-size:10px;color:gray}@media (max-width: 640px){.statement[data-astro-cid-uffxixac]{font-size:6px;color:gray}}
</style></head> <body> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <!--<h2><a href="/">{SITE_TITLE}</a></h2>--> <h2 data-astro-cid-3ef6ksr2><a style="padding-left:0;color:blue;" href="/" data-astro-cid-3ef6ksr2>Ge Yuxu<br data-astro-cid-3ef6ksr2>AI & Engineering</a></h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Home </a>  <a href="/blog/1" class="active" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Blog </a>  <a href="/series" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Series </a>  <a href="/projects" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Projects </a>  </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://github.com/geyuxu" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Ge Yuxu's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="https://www.linkedin.com/in/geyuxu/" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Ge Yuxu's LinkedIn profile</span> <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" data-astro-cid-3ef6ksr2> <path fill="currentColor" d="M20.447 20.452H17.2v-5.569c0-1.328-.025-3.039-1.852-3.039-1.853 0-2.136 1.447-2.136 2.942v5.666h-3.248V9h3.122v1.561h.045c.435-.823 1.498-1.688 3.083-1.688 3.295 0 3.903 2.17 3.903 4.989v6.59zM5.337 7.433a1.882 1.882 0 110-3.764 1.882 1.882 0 010 3.764zm1.626 13.019H3.708V9h3.255v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.226.792 24 1.771 24h20.451C23.2 24 24 23.226 24 22.271V1.729C24 .774 23.2 0 22.222 0z" data-astro-cid-3ef6ksr2></path> </svg> </a> <a href="mailto:ngzerone@hotmail.com" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Send email to Ge Yuxu</span> <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" data-astro-cid-3ef6ksr2> <path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" data-astro-cid-3ef6ksr2></path> </svg> </a> </div> </nav> <!-- Microsoft Clarity --> <script type="text/javascript">
		(function(c,l,a,r,i,t,y){
			c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
			t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
			y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
		})(window, document, "clarity", "script", "rc2w96osp6");
	</script> </header>  <main class="page"> <!-- 左侧栏 --> <aside class="sidebar"> <div class="meta"> <b>WebGL 3D坦克大战游戏开发实践：现代WebGL技术应用</b> <p><time datetime="2025-07-21T00:00:00.000Z"> 2025/07/21 08:00:00 </time></p> <p style="font-size:.85rem;color:var(--gray);">更新：<time datetime="2025-07-21T00:00:00.000Z"> 2025/07/21 08:00:00 </time></p>  </div> <hr> <br> </aside> <!-- 右侧正文区域（flex 居中） --> <div class="content-wrapper"> <article class="prose">  <nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#项目概述">项目概述</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#技术架构">技术架构</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#核心技术栈">核心技术栈</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#系统架构设计">系统架构设计</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#渲染引擎实现">渲染引擎实现</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#webgl渲染管道">WebGL渲染管道</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#着色器系统">着色器系统</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#物理系统设计">物理系统设计</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#碰撞检测系统">碰撞检测系统</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#ai系统实现">AI系统实现</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#敌方坦克ai">敌方坦克AI</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#游戏系统集成">游戏系统集成</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#主游戏循环">主游戏循环</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#性能优化策略">性能优化策略</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#1-渲染优化">1. 渲染优化</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#2-物理优化">2. 物理优化</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#3-ai优化">3. AI优化</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#项目特色与创新">项目特色与创新</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#1-现代webgl技术应用">1. 现代WebGL技术应用</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#2-完整的游戏架构">2. 完整的游戏架构</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#3-智能ai系统">3. 智能AI系统</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#4-沉浸式游戏体验">4. 沉浸式游戏体验</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#技术收获与思考">技术收获与思考</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#webgl深度应用">WebGL深度应用</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#游戏引擎架构">游戏引擎架构</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#性能优化实践">性能优化实践</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#未来发展方向">未来发展方向</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#总结">总结</a></li></ol></nav><h2 id="项目概述"><a aria-hidden="true" tabindex="-1" href="#项目概述"><span class="icon icon-link"></span></a>项目概述</h2>
<p>开发了一款基于 <strong>WebGL 技术</strong>的3D坦克大战游戏，采用现代Web技术实现了完整的3D游戏体验。项目集成了自定义渲染引擎、物理系统、AI对战系统、音效系统和用户界面，展示了WebGL在复杂游戏开发中的强大能力。</p>
<h2 id="技术架构"><a aria-hidden="true" tabindex="-1" href="#技术架构"><span class="icon icon-link"></span></a>技术架构</h2>
<h3 id="核心技术栈"><a aria-hidden="true" tabindex="-1" href="#核心技术栈"><span class="icon icon-link"></span></a>核心技术栈</h3>
<ul>
<li><strong>WebGL 2.0</strong>: 3D图形渲染</li>
<li><strong>GLSL</strong>: 着色器编程语言</li>
<li><strong>JavaScript ES6+</strong>: 游戏逻辑实现</li>
<li><strong>Web Audio API</strong>: 音效系统</li>
<li><strong>Canvas 2D API</strong>: UI界面绘制</li>
<li><strong>WebGL Matrix</strong>: 3D数学计算库</li>
</ul>
<h3 id="系统架构设计"><a aria-hidden="true" tabindex="-1" href="#系统架构设计"><span class="icon icon-link"></span></a>系统架构设计</h3>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>WebGL 3D Tank Game</span></span>
<span class="line"><span>├── 渲染引擎 (Rendering Engine)</span></span>
<span class="line"><span>│   ├── 着色器管理 (Shader Manager)</span></span>
<span class="line"><span>│   ├── 纹理系统 (Texture System)</span></span>
<span class="line"><span>│   ├── 模型加载器 (Model Loader)</span></span>
<span class="line"><span>│   └── 场景渲染器 (Scene Renderer)</span></span>
<span class="line"><span>├── 物理系统 (Physics Engine)</span></span>
<span class="line"><span>│   ├── 碰撞检测 (Collision Detection)</span></span>
<span class="line"><span>│   ├── 刚体动力学 (Rigid Body Dynamics)</span></span>
<span class="line"><span>│   └── 空间分割 (Spatial Partitioning)</span></span>
<span class="line"><span>├── AI系统 (AI Engine)</span></span>
<span class="line"><span>│   ├── 路径规划 (Pathfinding)</span></span>
<span class="line"><span>│   ├── 行为树 (Behavior Tree)</span></span>
<span class="line"><span>│   └── 决策系统 (Decision System)</span></span>
<span class="line"><span>├── 音效系统 (Audio System)</span></span>
<span class="line"><span>├── 用户界面 (User Interface)</span></span>
<span class="line"><span>└── 游戏循环 (Game Loop)</span></span></code></pre>
<h2 id="渲染引擎实现"><a aria-hidden="true" tabindex="-1" href="#渲染引擎实现"><span class="icon icon-link"></span></a>渲染引擎实现</h2>
<h3 id="webgl渲染管道"><a aria-hidden="true" tabindex="-1" href="#webgl渲染管道"><span class="icon icon-link"></span></a>WebGL渲染管道</h3>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> RenderEngine</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">    constructor</span><span style="color:#24292E">(</span><span style="color:#E36209">canvas</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.canvas </span><span style="color:#D73A49">=</span><span style="color:#24292E"> canvas;</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.gl </span><span style="color:#D73A49">=</span><span style="color:#24292E"> canvas.</span><span style="color:#6F42C1">getContext</span><span style="color:#24292E">(</span><span style="color:#032F62">'webgl2'</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.shaderPrograms </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Map</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.textures </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Map</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.models </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Map</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">initWebGL</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">loadShaders</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">setupBuffers</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    initWebGL</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> gl</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.gl;</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 启用深度测试</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">enable</span><span style="color:#24292E">(gl.</span><span style="color:#005CC5">DEPTH_TEST</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">depthFunc</span><span style="color:#24292E">(gl.</span><span style="color:#005CC5">LEQUAL</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 启用背面剔除</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">enable</span><span style="color:#24292E">(gl.</span><span style="color:#005CC5">CULL_FACE</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">cullFace</span><span style="color:#24292E">(gl.</span><span style="color:#005CC5">BACK</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 设置视口</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">viewport</span><span style="color:#24292E">(</span><span style="color:#005CC5">0</span><span style="color:#24292E">, </span><span style="color:#005CC5">0</span><span style="color:#24292E">, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.canvas.width, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.canvas.height);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 清除颜色设置</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">clearColor</span><span style="color:#24292E">(</span><span style="color:#005CC5">0.2</span><span style="color:#24292E">, </span><span style="color:#005CC5">0.3</span><span style="color:#24292E">, </span><span style="color:#005CC5">0.3</span><span style="color:#24292E">, </span><span style="color:#005CC5">1.0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 编译着色器</span></span>
<span class="line"><span style="color:#6F42C1">    compileShader</span><span style="color:#24292E">(</span><span style="color:#E36209">source</span><span style="color:#24292E">, </span><span style="color:#E36209">type</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> gl</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.gl;</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> shader</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> gl.</span><span style="color:#6F42C1">createShader</span><span style="color:#24292E">(type);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">shaderSource</span><span style="color:#24292E">(shader, source);</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">compileShader</span><span style="color:#24292E">(shader);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">gl.</span><span style="color:#6F42C1">getShaderParameter</span><span style="color:#24292E">(shader, gl.</span><span style="color:#005CC5">COMPILE_STATUS</span><span style="color:#24292E">)) {</span></span>
<span class="line"><span style="color:#24292E">            console.</span><span style="color:#6F42C1">error</span><span style="color:#24292E">(</span><span style="color:#032F62">'着色器编译错误:'</span><span style="color:#24292E">, gl.</span><span style="color:#6F42C1">getShaderInfoLog</span><span style="color:#24292E">(shader));</span></span>
<span class="line"><span style="color:#24292E">            gl.</span><span style="color:#6F42C1">deleteShader</span><span style="color:#24292E">(shader);</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#005CC5"> null</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> shader;</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 创建着色器程序</span></span>
<span class="line"><span style="color:#6F42C1">    createShaderProgram</span><span style="color:#24292E">(</span><span style="color:#E36209">vertexSource</span><span style="color:#24292E">, </span><span style="color:#E36209">fragmentSource</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> gl</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.gl;</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> vertexShader</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">compileShader</span><span style="color:#24292E">(vertexSource, gl.</span><span style="color:#005CC5">VERTEX_SHADER</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> fragmentShader</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">compileShader</span><span style="color:#24292E">(fragmentSource, gl.</span><span style="color:#005CC5">FRAGMENT_SHADER</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> program</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> gl.</span><span style="color:#6F42C1">createProgram</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">attachShader</span><span style="color:#24292E">(program, vertexShader);</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">attachShader</span><span style="color:#24292E">(program, fragmentShader);</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">linkProgram</span><span style="color:#24292E">(program);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">gl.</span><span style="color:#6F42C1">getProgramParameter</span><span style="color:#24292E">(program, gl.</span><span style="color:#005CC5">LINK_STATUS</span><span style="color:#24292E">)) {</span></span>
<span class="line"><span style="color:#24292E">            console.</span><span style="color:#6F42C1">error</span><span style="color:#24292E">(</span><span style="color:#032F62">'着色器程序链接错误:'</span><span style="color:#24292E">, gl.</span><span style="color:#6F42C1">getProgramInfoLog</span><span style="color:#24292E">(program));</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#005CC5"> null</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> program;</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 渲染场景</span></span>
<span class="line"><span style="color:#6F42C1">    render</span><span style="color:#24292E">(</span><span style="color:#E36209">scene</span><span style="color:#24292E">, </span><span style="color:#E36209">camera</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> gl</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.gl;</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 清除缓冲区</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">clear</span><span style="color:#24292E">(gl.</span><span style="color:#005CC5">COLOR_BUFFER_BIT</span><span style="color:#D73A49"> |</span><span style="color:#24292E"> gl.</span><span style="color:#005CC5">DEPTH_BUFFER_BIT</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 计算视图矩阵和投影矩阵</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> viewMatrix</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> camera.</span><span style="color:#6F42C1">getViewMatrix</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> projMatrix</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> camera.</span><span style="color:#6F42C1">getProjectionMatrix</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 渲染所有游戏对象</span></span>
<span class="line"><span style="color:#24292E">        scene.objects.</span><span style="color:#6F42C1">forEach</span><span style="color:#24292E">(</span><span style="color:#E36209">obj</span><span style="color:#D73A49"> =></span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#005CC5">            this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">renderObject</span><span style="color:#24292E">(obj, viewMatrix, projMatrix);</span></span>
<span class="line"><span style="color:#24292E">        });</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    renderObject</span><span style="color:#24292E">(</span><span style="color:#E36209">object</span><span style="color:#24292E">, </span><span style="color:#E36209">viewMatrix</span><span style="color:#24292E">, </span><span style="color:#E36209">projMatrix</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> gl</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.gl;</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> program</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.shaderPrograms.</span><span style="color:#6F42C1">get</span><span style="color:#24292E">(object.material.shader);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">useProgram</span><span style="color:#24292E">(program);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 设置矩阵uniform</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> modelMatrix</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> object.</span><span style="color:#6F42C1">getModelMatrix</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> mvpMatrix</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> mat4.</span><span style="color:#6F42C1">multiply</span><span style="color:#24292E">(projMatrix, viewMatrix, modelMatrix);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">uniformMatrix4fv</span><span style="color:#24292E">(gl.</span><span style="color:#6F42C1">getUniformLocation</span><span style="color:#24292E">(program, </span><span style="color:#032F62">'u_mvpMatrix'</span><span style="color:#24292E">), </span><span style="color:#005CC5">false</span><span style="color:#24292E">, mvpMatrix);</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">uniformMatrix4fv</span><span style="color:#24292E">(gl.</span><span style="color:#6F42C1">getUniformLocation</span><span style="color:#24292E">(program, </span><span style="color:#032F62">'u_modelMatrix'</span><span style="color:#24292E">), </span><span style="color:#005CC5">false</span><span style="color:#24292E">, modelMatrix);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 绑定纹理</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (object.material.diffuseTexture) {</span></span>
<span class="line"><span style="color:#24292E">            gl.</span><span style="color:#6F42C1">activeTexture</span><span style="color:#24292E">(gl.</span><span style="color:#005CC5">TEXTURE0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">            gl.</span><span style="color:#6F42C1">bindTexture</span><span style="color:#24292E">(gl.</span><span style="color:#005CC5">TEXTURE_2D</span><span style="color:#24292E">, object.material.diffuseTexture);</span></span>
<span class="line"><span style="color:#24292E">            gl.</span><span style="color:#6F42C1">uniform1i</span><span style="color:#24292E">(gl.</span><span style="color:#6F42C1">getUniformLocation</span><span style="color:#24292E">(program, </span><span style="color:#032F62">'u_diffuseTexture'</span><span style="color:#24292E">), </span><span style="color:#005CC5">0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 绑定顶点数据并绘制</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">bindVertexData</span><span style="color:#24292E">(object.mesh);</span></span>
<span class="line"><span style="color:#24292E">        gl.</span><span style="color:#6F42C1">drawElements</span><span style="color:#24292E">(gl.</span><span style="color:#005CC5">TRIANGLES</span><span style="color:#24292E">, object.mesh.indices.</span><span style="color:#005CC5">length</span><span style="color:#24292E">, gl.</span><span style="color:#005CC5">UNSIGNED_SHORT</span><span style="color:#24292E">, </span><span style="color:#005CC5">0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h3 id="着色器系统"><a aria-hidden="true" tabindex="-1" href="#着色器系统"><span class="icon icon-link"></span></a>着色器系统</h3>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="glsl"><code><span class="line"><span style="color:#6A737D">// 顶点着色器 (vertex shader)</span></span>
<span class="line"><span style="color:#24292E">#version </span><span style="color:#005CC5">300</span><span style="color:#24292E"> es</span></span>
<span class="line"><span style="color:#24292E">precision highp </span><span style="color:#D73A49">float</span><span style="color:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">in</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> a_position;</span></span>
<span class="line"><span style="color:#D73A49">in</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> a_normal;</span></span>
<span class="line"><span style="color:#D73A49">in</span><span style="color:#D73A49"> vec2</span><span style="color:#24292E"> a_texCoord;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">uniform</span><span style="color:#D73A49"> mat4</span><span style="color:#24292E"> u_mvpMatrix;</span></span>
<span class="line"><span style="color:#D73A49">uniform</span><span style="color:#D73A49"> mat4</span><span style="color:#24292E"> u_modelMatrix;</span></span>
<span class="line"><span style="color:#D73A49">uniform</span><span style="color:#D73A49"> mat4</span><span style="color:#24292E"> u_normalMatrix;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">out</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> v_worldPos;</span></span>
<span class="line"><span style="color:#D73A49">out</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> v_normal;</span></span>
<span class="line"><span style="color:#D73A49">out</span><span style="color:#D73A49"> vec2</span><span style="color:#24292E"> v_texCoord;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">void</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#24292E">    vec4 worldPos </span><span style="color:#D73A49">=</span><span style="color:#24292E"> u_modelMatrix </span><span style="color:#D73A49">*</span><span style="color:#6F42C1"> vec4</span><span style="color:#24292E">(a_position, </span><span style="color:#005CC5">1.0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    v_worldPos </span><span style="color:#D73A49">=</span><span style="color:#24292E"> worldPos.xyz;</span></span>
<span class="line"><span style="color:#24292E">    </span></span>
<span class="line"><span style="color:#24292E">    v_normal </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> normalize</span><span style="color:#24292E">((u_normalMatrix </span><span style="color:#D73A49">*</span><span style="color:#6F42C1"> vec4</span><span style="color:#24292E">(a_normal, </span><span style="color:#005CC5">0.0</span><span style="color:#24292E">)).xyz);</span></span>
<span class="line"><span style="color:#24292E">    v_texCoord </span><span style="color:#D73A49">=</span><span style="color:#24292E"> a_texCoord;</span></span>
<span class="line"><span style="color:#24292E">    </span></span>
<span class="line"><span style="color:#24292E">    gl_Position </span><span style="color:#D73A49">=</span><span style="color:#24292E"> u_mvpMatrix </span><span style="color:#D73A49">*</span><span style="color:#6F42C1"> vec4</span><span style="color:#24292E">(a_position, </span><span style="color:#005CC5">1.0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="glsl"><code><span class="line"><span style="color:#6A737D">// 片段着色器 (fragment shader)</span></span>
<span class="line"><span style="color:#24292E">#version </span><span style="color:#005CC5">300</span><span style="color:#24292E"> es</span></span>
<span class="line"><span style="color:#24292E">precision highp </span><span style="color:#D73A49">float</span><span style="color:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">in</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> v_worldPos;</span></span>
<span class="line"><span style="color:#D73A49">in</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> v_normal;</span></span>
<span class="line"><span style="color:#D73A49">in</span><span style="color:#D73A49"> vec2</span><span style="color:#24292E"> v_texCoord;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">uniform</span><span style="color:#D73A49"> sampler2D</span><span style="color:#24292E"> u_diffuseTexture;</span></span>
<span class="line"><span style="color:#D73A49">uniform</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> u_lightPos;</span></span>
<span class="line"><span style="color:#D73A49">uniform</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> u_lightColor;</span></span>
<span class="line"><span style="color:#D73A49">uniform</span><span style="color:#D73A49"> vec3</span><span style="color:#24292E"> u_viewPos;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">out</span><span style="color:#D73A49"> vec4</span><span style="color:#24292E"> fragColor;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">void</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6A737D">    // 采样纹理</span></span>
<span class="line"><span style="color:#24292E">    vec3 texColor </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> texture</span><span style="color:#24292E">(u_diffuseTexture, v_texCoord).rgb;</span></span>
<span class="line"><span style="color:#24292E">    </span></span>
<span class="line"><span style="color:#6A737D">    // 计算光照</span></span>
<span class="line"><span style="color:#24292E">    vec3 lightDir </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> normalize</span><span style="color:#24292E">(u_lightPos </span><span style="color:#D73A49">-</span><span style="color:#24292E"> v_worldPos);</span></span>
<span class="line"><span style="color:#24292E">    vec3 normal </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> normalize</span><span style="color:#24292E">(v_normal);</span></span>
<span class="line"><span style="color:#24292E">    </span></span>
<span class="line"><span style="color:#6A737D">    // 环境光</span></span>
<span class="line"><span style="color:#D73A49">    float</span><span style="color:#24292E"> ambientStrength </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 0.3</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">    vec3 ambient </span><span style="color:#D73A49">=</span><span style="color:#24292E"> ambientStrength </span><span style="color:#D73A49">*</span><span style="color:#24292E"> u_lightColor;</span></span>
<span class="line"><span style="color:#24292E">    </span></span>
<span class="line"><span style="color:#6A737D">    // 漫反射</span></span>
<span class="line"><span style="color:#D73A49">    float</span><span style="color:#24292E"> diff </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> max</span><span style="color:#24292E">(</span><span style="color:#6F42C1">dot</span><span style="color:#24292E">(normal, lightDir), </span><span style="color:#005CC5">0.0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    vec3 diffuse </span><span style="color:#D73A49">=</span><span style="color:#24292E"> diff </span><span style="color:#D73A49">*</span><span style="color:#24292E"> u_lightColor;</span></span>
<span class="line"><span style="color:#24292E">    </span></span>
<span class="line"><span style="color:#6A737D">    // 镜面反射</span></span>
<span class="line"><span style="color:#D73A49">    float</span><span style="color:#24292E"> specularStrength </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 0.8</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">    vec3 viewDir </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> normalize</span><span style="color:#24292E">(u_viewPos </span><span style="color:#D73A49">-</span><span style="color:#24292E"> v_worldPos);</span></span>
<span class="line"><span style="color:#24292E">    vec3 reflectDir </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> reflect</span><span style="color:#24292E">(</span><span style="color:#D73A49">-</span><span style="color:#24292E">lightDir, normal);</span></span>
<span class="line"><span style="color:#D73A49">    float</span><span style="color:#24292E"> spec </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> pow</span><span style="color:#24292E">(</span><span style="color:#6F42C1">max</span><span style="color:#24292E">(</span><span style="color:#6F42C1">dot</span><span style="color:#24292E">(viewDir, reflectDir), </span><span style="color:#005CC5">0.0</span><span style="color:#24292E">), </span><span style="color:#005CC5">64.0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    vec3 specular </span><span style="color:#D73A49">=</span><span style="color:#24292E"> specularStrength </span><span style="color:#D73A49">*</span><span style="color:#24292E"> spec </span><span style="color:#D73A49">*</span><span style="color:#24292E"> u_lightColor;</span></span>
<span class="line"><span style="color:#24292E">    </span></span>
<span class="line"><span style="color:#24292E">    vec3 result </span><span style="color:#D73A49">=</span><span style="color:#24292E"> (ambient </span><span style="color:#D73A49">+</span><span style="color:#24292E"> diffuse </span><span style="color:#D73A49">+</span><span style="color:#24292E"> specular) </span><span style="color:#D73A49">*</span><span style="color:#24292E"> texColor;</span></span>
<span class="line"><span style="color:#24292E">    fragColor </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> vec4</span><span style="color:#24292E">(result, </span><span style="color:#005CC5">1.0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h2 id="物理系统设计"><a aria-hidden="true" tabindex="-1" href="#物理系统设计"><span class="icon icon-link"></span></a>物理系统设计</h2>
<h3 id="碰撞检测系统"><a aria-hidden="true" tabindex="-1" href="#碰撞检测系统"><span class="icon icon-link"></span></a>碰撞检测系统</h3>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> PhysicsEngine</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">    constructor</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.bodies </span><span style="color:#D73A49">=</span><span style="color:#24292E"> [];</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.gravity </span><span style="color:#D73A49">=</span><span style="color:#24292E"> { x: </span><span style="color:#005CC5">0</span><span style="color:#24292E">, y: </span><span style="color:#D73A49">-</span><span style="color:#005CC5">9.81</span><span style="color:#24292E">, z: </span><span style="color:#005CC5">0</span><span style="color:#24292E"> };</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.spatialGrid </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> SpatialGrid</span><span style="color:#24292E">(</span><span style="color:#005CC5">50</span><span style="color:#24292E">); </span><span style="color:#6A737D">// 50x50网格</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 碰撞检测</span></span>
<span class="line"><span style="color:#6F42C1">    checkCollisions</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6A737D">        // 使用空间分割优化碰撞检测</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> potentialPairs</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.spatialGrid.</span><span style="color:#6F42C1">getPotentialCollisions</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#24292E">        potentialPairs.</span><span style="color:#6F42C1">forEach</span><span style="color:#24292E">(</span><span style="color:#E36209">pair</span><span style="color:#D73A49"> =></span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#24292E"> [</span><span style="color:#005CC5">bodyA</span><span style="color:#24292E">, </span><span style="color:#005CC5">bodyB</span><span style="color:#24292E">] </span><span style="color:#D73A49">=</span><span style="color:#24292E"> pair;</span></span>
<span class="line"><span style="color:#24292E">            </span></span>
<span class="line"><span style="color:#D73A49">            if</span><span style="color:#24292E"> (</span><span style="color:#005CC5">this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">detectCollision</span><span style="color:#24292E">(bodyA, bodyB)) {</span></span>
<span class="line"><span style="color:#005CC5">                this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">resolveCollision</span><span style="color:#24292E">(bodyA, bodyB);</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        });</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // AABB碰撞检测</span></span>
<span class="line"><span style="color:#6F42C1">    detectAABBCollision</span><span style="color:#24292E">(</span><span style="color:#E36209">boxA</span><span style="color:#24292E">, </span><span style="color:#E36209">boxB</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> (</span></span>
<span class="line"><span style="color:#24292E">            boxA.min.x </span><span style="color:#D73A49">&#x3C;=</span><span style="color:#24292E"> boxB.max.x </span><span style="color:#D73A49">&#x26;&#x26;</span><span style="color:#24292E"> boxA.max.x </span><span style="color:#D73A49">>=</span><span style="color:#24292E"> boxB.min.x </span><span style="color:#D73A49">&#x26;&#x26;</span></span>
<span class="line"><span style="color:#24292E">            boxA.min.y </span><span style="color:#D73A49">&#x3C;=</span><span style="color:#24292E"> boxB.max.y </span><span style="color:#D73A49">&#x26;&#x26;</span><span style="color:#24292E"> boxA.max.y </span><span style="color:#D73A49">>=</span><span style="color:#24292E"> boxB.min.y </span><span style="color:#D73A49">&#x26;&#x26;</span></span>
<span class="line"><span style="color:#24292E">            boxA.min.z </span><span style="color:#D73A49">&#x3C;=</span><span style="color:#24292E"> boxB.max.z </span><span style="color:#D73A49">&#x26;&#x26;</span><span style="color:#24292E"> boxA.max.z </span><span style="color:#D73A49">>=</span><span style="color:#24292E"> boxB.min.z</span></span>
<span class="line"><span style="color:#24292E">        );</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 球体碰撞检测</span></span>
<span class="line"><span style="color:#6F42C1">    detectSphereCollision</span><span style="color:#24292E">(</span><span style="color:#E36209">sphereA</span><span style="color:#24292E">, </span><span style="color:#E36209">sphereB</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> distance</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">distance</span><span style="color:#24292E">(sphereA.center, sphereB.center);</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> distance </span><span style="color:#D73A49">&#x3C;=</span><span style="color:#24292E"> (sphereA.radius </span><span style="color:#D73A49">+</span><span style="color:#24292E"> sphereB.radius);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 碰撞响应</span></span>
<span class="line"><span style="color:#6F42C1">    resolveCollision</span><span style="color:#24292E">(</span><span style="color:#E36209">bodyA</span><span style="color:#24292E">, </span><span style="color:#E36209">bodyB</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#6A737D">        // 计算碰撞法向量</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> normal</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">normalize</span><span style="color:#24292E">(vec3.</span><span style="color:#6F42C1">subtract</span><span style="color:#24292E">(bodyB.position, bodyA.position));</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 计算相对速度</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> relativeVelocity</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">subtract</span><span style="color:#24292E">(bodyB.velocity, bodyA.velocity);</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> velocityAlongNormal</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">dot</span><span style="color:#24292E">(relativeVelocity, normal);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 如果物体正在分离，不处理碰撞</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (velocityAlongNormal </span><span style="color:#D73A49">></span><span style="color:#005CC5"> 0</span><span style="color:#24292E">) </span><span style="color:#D73A49">return</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 计算恢复系数</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> restitution</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> Math.</span><span style="color:#6F42C1">min</span><span style="color:#24292E">(bodyA.restitution, bodyB.restitution);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 计算冲量</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> impulse</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> -</span><span style="color:#24292E">(</span><span style="color:#005CC5">1</span><span style="color:#D73A49"> +</span><span style="color:#24292E"> restitution) </span><span style="color:#D73A49">*</span><span style="color:#24292E"> velocityAlongNormal;</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> impulseVector</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">scale</span><span style="color:#24292E">(normal, impulse);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 应用冲量</span></span>
<span class="line"><span style="color:#24292E">        bodyA.velocity </span><span style="color:#D73A49">=</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">subtract</span><span style="color:#24292E">(bodyA.velocity, vec3.</span><span style="color:#6F42C1">scale</span><span style="color:#24292E">(impulseVector, </span><span style="color:#005CC5">1</span><span style="color:#D73A49"> /</span><span style="color:#24292E"> bodyA.mass));</span></span>
<span class="line"><span style="color:#24292E">        bodyB.velocity </span><span style="color:#D73A49">=</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">add</span><span style="color:#24292E">(bodyB.velocity, vec3.</span><span style="color:#6F42C1">scale</span><span style="color:#24292E">(impulseVector, </span><span style="color:#005CC5">1</span><span style="color:#D73A49"> /</span><span style="color:#24292E"> bodyB.mass));</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 物理更新</span></span>
<span class="line"><span style="color:#6F42C1">    update</span><span style="color:#24292E">(</span><span style="color:#E36209">deltaTime</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.bodies.</span><span style="color:#6F42C1">forEach</span><span style="color:#24292E">(</span><span style="color:#E36209">body</span><span style="color:#D73A49"> =></span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6A737D">            // 应用重力</span></span>
<span class="line"><span style="color:#D73A49">            if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">body.isStatic) {</span></span>
<span class="line"><span style="color:#24292E">                body.velocity </span><span style="color:#D73A49">=</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">add</span><span style="color:#24292E">(body.velocity, vec3.</span><span style="color:#6F42C1">scale</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.gravity, deltaTime));</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">            </span></span>
<span class="line"><span style="color:#6A737D">            // 更新位置</span></span>
<span class="line"><span style="color:#24292E">            body.position </span><span style="color:#D73A49">=</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">add</span><span style="color:#24292E">(body.position, vec3.</span><span style="color:#6F42C1">scale</span><span style="color:#24292E">(body.velocity, deltaTime));</span></span>
<span class="line"><span style="color:#24292E">            </span></span>
<span class="line"><span style="color:#6A737D">            // 更新包围盒</span></span>
<span class="line"><span style="color:#24292E">            body.</span><span style="color:#6F42C1">updateBoundingBox</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        });</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 检测碰撞</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">checkCollisions</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h2 id="ai系统实现"><a aria-hidden="true" tabindex="-1" href="#ai系统实现"><span class="icon icon-link"></span></a>AI系统实现</h2>
<h3 id="敌方坦克ai"><a aria-hidden="true" tabindex="-1" href="#敌方坦克ai"><span class="icon icon-link"></span></a>敌方坦克AI</h3>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> TankAI</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">    constructor</span><span style="color:#24292E">(</span><span style="color:#E36209">tank</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.tank </span><span style="color:#D73A49">=</span><span style="color:#24292E"> tank;</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.state </span><span style="color:#D73A49">=</span><span style="color:#032F62"> 'patrol'</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.target </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.pathfinder </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Pathfinder</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.behaviorTree </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> BehaviorTree</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">setupBehaviorTree</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    setupBehaviorTree</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6A737D">        // 构建行为树</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> root</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Selector</span><span style="color:#24292E">([</span></span>
<span class="line"><span style="color:#D73A49">            new</span><span style="color:#6F42C1"> Sequence</span><span style="color:#24292E">([</span></span>
<span class="line"><span style="color:#D73A49">                new</span><span style="color:#6F42C1"> Condition</span><span style="color:#24292E">(() </span><span style="color:#D73A49">=></span><span style="color:#005CC5"> this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">hasTarget</span><span style="color:#24292E">()),</span></span>
<span class="line"><span style="color:#D73A49">                new</span><span style="color:#6F42C1"> Selector</span><span style="color:#24292E">([</span></span>
<span class="line"><span style="color:#D73A49">                    new</span><span style="color:#6F42C1"> Action</span><span style="color:#24292E">(() </span><span style="color:#D73A49">=></span><span style="color:#005CC5"> this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">attack</span><span style="color:#24292E">()),</span></span>
<span class="line"><span style="color:#D73A49">                    new</span><span style="color:#6F42C1"> Action</span><span style="color:#24292E">(() </span><span style="color:#D73A49">=></span><span style="color:#005CC5"> this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">chase</span><span style="color:#24292E">())</span></span>
<span class="line"><span style="color:#24292E">                ])</span></span>
<span class="line"><span style="color:#24292E">            ]),</span></span>
<span class="line"><span style="color:#D73A49">            new</span><span style="color:#6F42C1"> Action</span><span style="color:#24292E">(() </span><span style="color:#D73A49">=></span><span style="color:#005CC5"> this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">patrol</span><span style="color:#24292E">())</span></span>
<span class="line"><span style="color:#24292E">        ]);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.behaviorTree.</span><span style="color:#6F42C1">setRoot</span><span style="color:#24292E">(root);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    update</span><span style="color:#24292E">(</span><span style="color:#E36209">deltaTime</span><span style="color:#24292E">, </span><span style="color:#E36209">gameState</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#6A737D">        // 更新感知系统</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">updatePerception</span><span style="color:#24292E">(gameState);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 执行行为树</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.behaviorTree.</span><span style="color:#6F42C1">execute</span><span style="color:#24292E">(deltaTime);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 更新坦克控制</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">updateTankControls</span><span style="color:#24292E">(deltaTime);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    updatePerception</span><span style="color:#24292E">(</span><span style="color:#E36209">gameState</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> playerTank</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> gameState.playerTank;</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> distance</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">distance</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.tank.position, playerTank.position);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 视野检测</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (distance </span><span style="color:#D73A49">&#x3C;=</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.tank.viewDistance) {</span></span>
<span class="line"><span style="color:#6A737D">            // 检查是否在视野角度内</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#005CC5"> dirToPlayer</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">normalize</span><span style="color:#24292E">(vec3.</span><span style="color:#6F42C1">subtract</span><span style="color:#24292E">(playerTank.position, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.tank.position));</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#005CC5"> angle</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">angle</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.tank.forward, dirToPlayer);</span></span>
<span class="line"><span style="color:#24292E">            </span></span>
<span class="line"><span style="color:#D73A49">            if</span><span style="color:#24292E"> (angle </span><span style="color:#D73A49">&#x3C;=</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.tank.viewAngle) {</span></span>
<span class="line"><span style="color:#6A737D">                // 射线检测遮挡</span></span>
<span class="line"><span style="color:#D73A49">                if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#005CC5">this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">isObstructed</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.tank.position, playerTank.position, gameState.obstacles)) {</span></span>
<span class="line"><span style="color:#005CC5">                    this</span><span style="color:#24292E">.target </span><span style="color:#D73A49">=</span><span style="color:#24292E"> playerTank;</span></span>
<span class="line"><span style="color:#24292E">                }</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    attack</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#005CC5">this</span><span style="color:#24292E">.target) </span><span style="color:#D73A49">return</span><span style="color:#005CC5"> false</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 瞄准目标</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> dirToTarget</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">normalize</span><span style="color:#24292E">(vec3.</span><span style="color:#6F42C1">subtract</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.target.position, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.tank.position));</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.tank.turretRotation </span><span style="color:#D73A49">=</span><span style="color:#24292E"> Math.</span><span style="color:#6F42C1">atan2</span><span style="color:#24292E">(dirToTarget.x, dirToTarget.z);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 射击</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#005CC5">this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">isAimed</span><span style="color:#24292E">() </span><span style="color:#D73A49">&#x26;&#x26;</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.tank.</span><span style="color:#6F42C1">canFire</span><span style="color:#24292E">()) {</span></span>
<span class="line"><span style="color:#005CC5">            this</span><span style="color:#24292E">.tank.</span><span style="color:#6F42C1">fire</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#005CC5"> true</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#005CC5"> false</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    chase</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#005CC5">this</span><span style="color:#24292E">.target) </span><span style="color:#D73A49">return</span><span style="color:#005CC5"> false</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 使用A*算法规划路径</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> path</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.pathfinder.</span><span style="color:#6F42C1">findPath</span><span style="color:#24292E">(</span></span>
<span class="line"><span style="color:#005CC5">            this</span><span style="color:#24292E">.tank.position, </span></span>
<span class="line"><span style="color:#005CC5">            this</span><span style="color:#24292E">.target.position, </span></span>
<span class="line"><span style="color:#24292E">            gameState.obstacles</span></span>
<span class="line"><span style="color:#24292E">        );</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (path.</span><span style="color:#005CC5">length</span><span style="color:#D73A49"> ></span><span style="color:#005CC5"> 1</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#005CC5"> nextWaypoint</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> path[</span><span style="color:#005CC5">1</span><span style="color:#24292E">];</span></span>
<span class="line"><span style="color:#005CC5">            this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">moveTowards</span><span style="color:#24292E">(nextWaypoint);</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#005CC5"> true</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#005CC5"> false</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    patrol</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6A737D">        // 巡逻行为</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#005CC5">this</span><span style="color:#24292E">.patrolTarget </span><span style="color:#D73A49">||</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">distance</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.tank.position, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.patrolTarget) </span><span style="color:#D73A49">&#x3C;</span><span style="color:#005CC5"> 2.0</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">            this</span><span style="color:#24292E">.patrolTarget </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">getRandomPatrolPoint</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">moveTowards</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.patrolTarget);</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#005CC5"> true</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    moveTowards</span><span style="color:#24292E">(</span><span style="color:#E36209">target</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> direction</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> vec3.</span><span style="color:#6F42C1">normalize</span><span style="color:#24292E">(vec3.</span><span style="color:#6F42C1">subtract</span><span style="color:#24292E">(target, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.tank.position));</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 转向目标</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> targetRotation</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> Math.</span><span style="color:#6F42C1">atan2</span><span style="color:#24292E">(direction.x, direction.z);</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.tank.rotation </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">lerp</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.tank.rotation, targetRotation, </span><span style="color:#005CC5">0.1</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 前进</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.tank.</span><span style="color:#6F42C1">moveForward</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h2 id="游戏系统集成"><a aria-hidden="true" tabindex="-1" href="#游戏系统集成"><span class="icon icon-link"></span></a>游戏系统集成</h2>
<h3 id="主游戏循环"><a aria-hidden="true" tabindex="-1" href="#主游戏循环"><span class="icon icon-link"></span></a>主游戏循环</h3>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> TankWarGame</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">    constructor</span><span style="color:#24292E">(</span><span style="color:#E36209">canvas</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.canvas </span><span style="color:#D73A49">=</span><span style="color:#24292E"> canvas;</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.renderEngine </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> RenderEngine</span><span style="color:#24292E">(canvas);</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.physicsEngine </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> PhysicsEngine</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.audioSystem </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> AudioSystem</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.inputManager </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> InputManager</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.scene </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Scene</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.camera </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Camera</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.gameState </span><span style="color:#D73A49">=</span><span style="color:#032F62"> 'playing'</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.playerTank </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Tank</span><span style="color:#24292E">(TankType.</span><span style="color:#005CC5">PLAYER</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.enemyTanks </span><span style="color:#D73A49">=</span><span style="color:#24292E"> [];</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">initGame</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">startGameLoop</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    initGame</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6A737D">        // 创建地形</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">createTerrain</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 创建敌方坦克</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">spawnEnemyTanks</span><span style="color:#24292E">(</span><span style="color:#005CC5">5</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 设置相机跟随</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.camera.</span><span style="color:#6F42C1">setTarget</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.playerTank);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 加载音效</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.audioSystem.</span><span style="color:#6F42C1">loadSounds</span><span style="color:#24292E">({</span></span>
<span class="line"><span style="color:#24292E">            fire: </span><span style="color:#032F62">'sounds/tank_fire.ogg'</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">            explosion: </span><span style="color:#032F62">'sounds/explosion.ogg'</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">            engine: </span><span style="color:#032F62">'sounds/tank_engine.ogg'</span></span>
<span class="line"><span style="color:#24292E">        });</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    startGameLoop</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">        let</span><span style="color:#24292E"> lastTime </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 0</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#6F42C1"> gameLoop</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> (</span><span style="color:#E36209">currentTime</span><span style="color:#24292E">) </span><span style="color:#D73A49">=></span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">            const</span><span style="color:#005CC5"> deltaTime</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> (currentTime </span><span style="color:#D73A49">-</span><span style="color:#24292E"> lastTime) </span><span style="color:#D73A49">/</span><span style="color:#005CC5"> 1000.0</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">            lastTime </span><span style="color:#D73A49">=</span><span style="color:#24292E"> currentTime;</span></span>
<span class="line"><span style="color:#24292E">            </span></span>
<span class="line"><span style="color:#005CC5">            this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">update</span><span style="color:#24292E">(deltaTime);</span></span>
<span class="line"><span style="color:#005CC5">            this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">render</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">            </span></span>
<span class="line"><span style="color:#6F42C1">            requestAnimationFrame</span><span style="color:#24292E">(gameLoop);</span></span>
<span class="line"><span style="color:#24292E">        };</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6F42C1">        requestAnimationFrame</span><span style="color:#24292E">(gameLoop);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    update</span><span style="color:#24292E">(</span><span style="color:#E36209">deltaTime</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#6A737D">        // 更新输入</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.inputManager.</span><span style="color:#6F42C1">update</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 更新玩家坦克</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">updatePlayerTank</span><span style="color:#24292E">(deltaTime);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 更新敌方坦克AI</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.enemyTanks.</span><span style="color:#6F42C1">forEach</span><span style="color:#24292E">(</span><span style="color:#E36209">tank</span><span style="color:#D73A49"> =></span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            tank.ai.</span><span style="color:#6F42C1">update</span><span style="color:#24292E">(deltaTime, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">getGameState</span><span style="color:#24292E">());</span></span>
<span class="line"><span style="color:#24292E">        });</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 更新物理系统</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.physicsEngine.</span><span style="color:#6F42C1">update</span><span style="color:#24292E">(deltaTime);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 更新相机</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.camera.</span><span style="color:#6F42C1">update</span><span style="color:#24292E">(deltaTime);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 检查游戏结束条件</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">checkGameOver</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    render</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6A737D">        // 渲染3D场景</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.renderEngine.</span><span style="color:#6F42C1">render</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.scene, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.camera);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 渲染UI</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">renderUI</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    renderUI</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">        const</span><span style="color:#005CC5"> ctx</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> this</span><span style="color:#24292E">.canvas.</span><span style="color:#6F42C1">getContext</span><span style="color:#24292E">(</span><span style="color:#032F62">'2d'</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 绘制血量条</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">drawHealthBar</span><span style="color:#24292E">(ctx, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.playerTank.health);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 绘制弹药数</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">drawAmmoCounter</span><span style="color:#24292E">(ctx, </span><span style="color:#005CC5">this</span><span style="color:#24292E">.playerTank.ammo);</span></span>
<span class="line"><span style="color:#24292E">        </span></span>
<span class="line"><span style="color:#6A737D">        // 绘制小地图</span></span>
<span class="line"><span style="color:#005CC5">        this</span><span style="color:#24292E">.</span><span style="color:#6F42C1">drawMiniMap</span><span style="color:#24292E">(ctx);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h2 id="性能优化策略"><a aria-hidden="true" tabindex="-1" href="#性能优化策略"><span class="icon icon-link"></span></a>性能优化策略</h2>
<h3 id="1-渲染优化"><a aria-hidden="true" tabindex="-1" href="#1-渲染优化"><span class="icon icon-link"></span></a>1. 渲染优化</h3>
<ul>
<li><strong>视锥剔除</strong>: 只渲染相机视野内的对象</li>
<li><strong>LOD系统</strong>: 根据距离使用不同详细度的模型</li>
<li><strong>实例化渲染</strong>: 批量渲染相同的对象</li>
<li><strong>纹理合并</strong>: 减少纹理切换</li>
</ul>
<h3 id="2-物理优化"><a aria-hidden="true" tabindex="-1" href="#2-物理优化"><span class="icon icon-link"></span></a>2. 物理优化</h3>
<ul>
<li><strong>空间分割</strong>: 使用空间网格加速碰撞检测</li>
<li><strong>睡眠系统</strong>: 静止物体不参与物理计算</li>
<li><strong>简化碰撞体</strong>: 使用简单形状代替复杂模型</li>
</ul>
<h3 id="3-ai优化"><a aria-hidden="true" tabindex="-1" href="#3-ai优化"><span class="icon icon-link"></span></a>3. AI优化</h3>
<ul>
<li><strong>行为缓存</strong>: 缓存AI决策结果</li>
<li><strong>分帧更新</strong>: AI在不同帧更新，分散计算负载</li>
<li><strong>层次化决策</strong>: 粗略决策 + 精细调整</li>
</ul>
<h2 id="项目特色与创新"><a aria-hidden="true" tabindex="-1" href="#项目特色与创新"><span class="icon icon-link"></span></a>项目特色与创新</h2>
<h3 id="1-现代webgl技术应用"><a aria-hidden="true" tabindex="-1" href="#1-现代webgl技术应用"><span class="icon icon-link"></span></a>1. 现代WebGL技术应用</h3>
<ul>
<li>使用WebGL 2.0的高级特性</li>
<li>自定义着色器实现复杂光照效果</li>
<li>PBR(物理基础渲染)材质系统</li>
</ul>
<h3 id="2-完整的游戏架构"><a aria-hidden="true" tabindex="-1" href="#2-完整的游戏架构"><span class="icon icon-link"></span></a>2. 完整的游戏架构</h3>
<ul>
<li>模块化的引擎设计</li>
<li>可扩展的组件系统</li>
<li>数据驱动的游戏逻辑</li>
</ul>
<h3 id="3-智能ai系统"><a aria-hidden="true" tabindex="-1" href="#3-智能ai系统"><span class="icon icon-link"></span></a>3. 智能AI系统</h3>
<ul>
<li>行为树驱动的AI逻辑</li>
<li>A*路径规划算法</li>
<li>真实的感知和决策系统</li>
</ul>
<h3 id="4-沉浸式游戏体验"><a aria-hidden="true" tabindex="-1" href="#4-沉浸式游戏体验"><span class="icon icon-link"></span></a>4. 沉浸式游戏体验</h3>
<ul>
<li>真实的物理模拟</li>
<li>立体声音效系统</li>
<li>流畅的相机控制</li>
</ul>
<h2 id="技术收获与思考"><a aria-hidden="true" tabindex="-1" href="#技术收获与思考"><span class="icon icon-link"></span></a>技术收获与思考</h2>
<h3 id="webgl深度应用"><a aria-hidden="true" tabindex="-1" href="#webgl深度应用"><span class="icon icon-link"></span></a>WebGL深度应用</h3>
<ul>
<li>掌握了现代3D图形编程技术</li>
<li>理解了GPU渲染管线的工作原理</li>
<li>学会了着色器编程和优化技巧</li>
</ul>
<h3 id="游戏引擎架构"><a aria-hidden="true" tabindex="-1" href="#游戏引擎架构"><span class="icon icon-link"></span></a>游戏引擎架构</h3>
<ul>
<li>设计了可扩展的引擎架构</li>
<li>实现了高效的系统间通信</li>
<li>建立了完整的资源管理体系</li>
</ul>
<h3 id="性能优化实践"><a aria-hidden="true" tabindex="-1" href="#性能优化实践"><span class="icon icon-link"></span></a>性能优化实践</h3>
<ul>
<li>学会了多种性能分析方法</li>
<li>实施了有效的优化策略</li>
<li>平衡了功能复杂度与性能表现</li>
</ul>
<h2 id="未来发展方向"><a aria-hidden="true" tabindex="-1" href="#未来发展方向"><span class="icon icon-link"></span></a>未来发展方向</h2>
<ol>
<li><strong>多人在线</strong>: WebSocket实现实时对战</li>
<li><strong>地形编辑器</strong>: 可视化关卡编辑工具</li>
<li><strong>粒子系统</strong>: 更丰富的视觉效果</li>
<li><strong>VR支持</strong>: WebXR实现虚拟现实体验</li>
<li><strong>移动端适配</strong>: 触屏操作和性能优化</li>
</ol>
<h2 id="总结"><a aria-hidden="true" tabindex="-1" href="#总结"><span class="icon icon-link"></span></a>总结</h2>
<p>这个WebGL 3D坦克大战游戏项目成功展示了现代Web技术在复杂3D游戏开发中的应用潜力。通过自研引擎架构、智能AI系统和精细的性能优化，实现了媲美原生游戏的体验效果。</p>
<p>项目不仅是技术能力的体现，更是对现代游戏开发工程实践的完整演练，为后续更复杂的3D应用开发积累了宝贵经验。</p> <html lang="en" data-astro-cid-uffxixac> <head><!-- Global Metadata --><meta charset="utf-8"><!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">--><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"><link rel="shortcut icon" href="/favicon.png" type="image/png"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Ge Yuxu • AI &#38; Engineering" href="https://geyuxu.com/rss.xml"><meta name="generator" content="Astro v5.5.6"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://geyuxu.com/blog/notes/webgl-3d%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5%E7%8E%B0%E4%BB%A3webgl%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8/"><!-- Primary Meta Tags --><title>Ge Yuxu • AI &amp; Engineering</title><meta name="title" content="Ge Yuxu • AI &#38; Engineering"><meta name="description" content="Welcome to my blog!"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://geyuxu.com/blog/notes/webgl-3d%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5%E7%8E%B0%E4%BB%A3webgl%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8/"><meta property="og:title" content="Ge Yuxu • AI &#38; Engineering"><meta property="og:description" content="Welcome to my blog!"><meta property="og:image" content="https://geyuxu.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://geyuxu.com/blog/notes/webgl-3d%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5%E7%8E%B0%E4%BB%A3webgl%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8/"><meta property="twitter:title" content="Ge Yuxu • AI &#38; Engineering"><meta property="twitter:description" content="Welcome to my blog!"><meta property="twitter:image" content="https://geyuxu.com/blog-placeholder-1.jpg"><script src="/js/jquery-3.7.1.min.js"></script><script src="/js/copy-code-button.js" defer></script><!-- Dify Chatbot Configuration --><script>
 window.difyChatbotConfig = {
  token: 'VgrjCAto93bjE0MW',
  systemVariables: {
    // user_id: 'YOU CAN DEFINE USER ID HERE',
    // conversation_id: 'YOU CAN DEFINE CONVERSATION ID HERE, IT MUST BE A VALID UUID',
  },
  userVariables: {
    // avatar_url: 'YOU CAN DEFINE USER AVATAR URL HERE',
    // name: 'YOU CAN DEFINE USER NAME HERE',
  },
 }
</script><!-- Dify Chatbot Script --><script src="https://udify.app/embed.min.js" id="VgrjCAto93bjE0MW" defer>
</script><!-- Dify Chatbot Custom Styles --></head> <body data-astro-cid-uffxixac>  <div class="statement" data-astro-cid-uffxixac> <blockquote data-astro-cid-uffxixac> <p data-astro-cid-uffxixac><strong data-astro-cid-uffxixac>脱敏说明</strong>：本文所有出现的表名、字段名、接口地址、变量名、IP地址及示例数据等均非真实，仅用于阐述技术思路与实现步骤，示例代码亦非公司真实代码。示例方案亦非公司真实完整方案，仅为本人记忆总结，用于技术学习探讨。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;文中所示任何标识符并不对应实际生产环境中的名称或编号。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;示例&nbsp;SQL、脚本、代码及数据等均为演示用途，不含真实业务数据，也不具备直接运行或复现的完整上下文。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;读者若需在实际项目中参考本文方案，请结合自身业务场景及数据安全规范，使用符合内部命名和权限控制的配置。</p> <p data-astro-cid-uffxixac><strong data-astro-cid-uffxixac>Data Desensitization Notice</strong>: All table names, field names, API endpoints, variable names, IP addresses, and sample data appearing in this article are fictitious and intended solely to illustrate technical concepts and implementation steps. The sample code is not actual company code. The proposed solutions are not complete or actual company solutions but are summarized from the author's memory for technical learning and discussion.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;Any identifiers shown in the text do not correspond to names or numbers in any actual production environment.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;Sample SQL, scripts, code, and data are for demonstration purposes only, do not contain real business data, and lack the full context required for direct execution or reproduction.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;Readers who wish to reference the solutions in this article for actual projects should adapt them to their own business scenarios and data security standards, using configurations that comply with internal naming and access control policies.</p> <p data-astro-cid-uffxixac><strong data-astro-cid-uffxixac>版权声明</strong>：本文版权归原作者所有，未经作者事先书面许可，任何单位或个人不得以任何方式复制、转载、摘编或用于商业用途。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;若需非商业性引用或转载本文内容，请务必注明出处并保持内容完整。<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;对因商业使用、篡改或不当引用本文内容所产生的法律纠纷，作者保留追究法律责任的权利。</p> <p data-astro-cid-uffxixac><strong data-astro-cid-uffxixac>Copyright Notice</strong>: The copyright of this article belongs to the original author. Without prior written permission from the author, no entity or individual may copy, reproduce, excerpt, or use it for commercial purposes in any way.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;For non-commercial citation or reproduction of this content, attribution must be given, and the integrity of the content must be maintained.<br data-astro-cid-uffxixac>
&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;The author reserves the right to pursue legal action against any legal disputes arising from the commercial use, alteration, or improper citation of this article's content.</p> <p data-astro-cid-uffxixac><em data-astro-cid-uffxixac>Copyright&nbsp;©&nbsp;1989–Present&nbsp;Ge&nbsp;Yuxu.&nbsp;All&nbsp;Rights&nbsp;Reserved.</em></p> </blockquote> </div></body></html>  </article> </div> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 All rights reserved.
</footer>  </body></html>