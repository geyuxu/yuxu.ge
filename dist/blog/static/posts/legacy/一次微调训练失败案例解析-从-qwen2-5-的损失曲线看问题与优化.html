<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸€æ¬¡å¾®è°ƒè®­ç»ƒå¤±è´¥æ¡ˆä¾‹è§£æï¼šä» Qwen2.5 çš„æŸå¤±æ›²çº¿çœ‹é—®é¢˜ä¸ä¼˜åŒ– | Yuxu Ge</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <style>
        :root {
            --black: #111;
            --dark-grey: #444;
            --off-white: #f4f4f4;
            --vermilion: #C41E3A;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--black);
            background-color: var(--off-white);
        }

        a {
            color: var(--vermilion);
            text-decoration: none;
        }

        a:hover {
            opacity: 0.75;
        }

        .layout {
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 320px;
            height: 100vh;
            background: var(--black);
            color: var(--off-white);
            padding: 3rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .sidebar-top {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .avatar {
            display: block;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid var(--vermilion);
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: transform 0.2s ease;
        }

        .avatar:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .name-block {
            margin-bottom: 0.5rem;
        }

        h1 {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--off-white);
        }

        .title-role {
            font-size: 0.9rem;
            color: #888;
            margin-top: 0.25rem;
            font-weight: 400;
        }

        .contact-block {
            margin-top: 2.5rem;
            width: 100%;
        }

        .social-links {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            width: 160px;
            color: var(--off-white);
            opacity: 0.7;
            padding: 0.5rem 0.75rem;
            border-radius: 4px;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .social-links a:hover {
            color: var(--vermilion);
            opacity: 1;
            background: rgba(255, 255, 255, 0.05);
        }

        .social-links svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .social-links .orcid-link {
            font-size: 0.68rem;
            gap: 0.5rem;
            white-space: nowrap;
        }

        .sidebar-footer {
            text-align: center;
            font-size: 0.75rem;
            color: #555;
        }

        /* Content */
        .content {
            margin-left: 320px;
            padding: 3rem 4rem;
            max-width: calc(100vw - 320px - 8rem);
        }

        .back-link {
            display: inline-block;
            font-size: 0.85rem;
            margin-bottom: 2rem;
            color: var(--dark-grey);
        }

        .back-link:hover {
            color: var(--vermilion);
        }

        /* Article */
        article h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            line-height: 1.3;
            color: var(--black);
        }

        article h2 {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 2rem 0 1rem;
            color: var(--black);
        }

        article h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 1.5rem 0 0.75rem;
            color: var(--black);
        }

        article p {
            margin-bottom: 1rem;
            color: var(--dark-grey);
        }

        article ul,
        article ol {
            margin: 1rem 0 1rem 1.5rem;
            color: var(--dark-grey);
        }

        article li {
            margin-bottom: 0.5rem;
        }

        article strong {
            color: var(--black);
        }

        article code {
            font-family: "SF Mono", Monaco, monospace;
            font-size: 0.9em;
            background: #e8e8e8;
            padding: 0.15em 0.4em;
            border-radius: 3px;
        }

        article pre {
            margin: 1rem 0;
            border-radius: 6px;
            overflow-x: auto;
            background: #2d2d2d;
            padding: 1rem;
        }

        article pre code {
            background: none;
            padding: 0;
            font-size: 0.75em;
            white-space: pre !important;
            counter-reset: line;
            display: block;
            color: #ccc;
        }

        article pre code .line {
            counter-increment: line;
        }

        article pre code .line::before {
            content: counter(line);
            display: inline-block;
            width: 2.5em;
            margin-right: 1em;
            text-align: right;
            color: #666;
            user-select: none;
        }

        .code-toolbar {
            display: flex;
            justify-content: flex-start;
            padding: 0.35rem 0.5rem;
            background: #3a3a3a;
            border-radius: 6px 6px 0 0;
        }

        .code-toolbar+pre {
            margin-top: 0;
            border-radius: 0 0 6px 6px;
        }

        .copy-btn {
            padding: 0.2rem 0.5rem;
            font-size: 0.7rem;
            background: #555;
            color: #fff;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover,
        .copy-btn:active {
            background: #777;
        }

        .copy-btn.copied {
            background: #2a2;
        }

        article blockquote {
            border-left: 3px solid var(--vermilion);
            padding-left: 1rem;
            margin: 1rem 0;
            color: #666;
            font-style: italic;
        }

        article hr {
            border: none;
            border-top: 1px solid #ddd;
            margin: 2rem 0;
        }

        article table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        article th,
        article td {
            border: 1px solid #ddd;
            padding: 0.5rem 0.75rem;
            text-align: left;
        }

        article th {
            background: #e8e8e8;
            font-weight: 600;
        }

        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 1.5rem 0;
            border-radius: 6px;
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: #888;
        }

        .error {
            color: var(--vermilion);
        }

        /* Language Selector */
        .lang-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding: 0.75rem 1rem;
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.85rem;
        }

        .lang-selector-label {
            color: #666;
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .lang-selector-label svg {
            width: 16px;
            height: 16px;
        }

        .lang-select {
            padding: 0.4rem 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            font-size: 0.85rem;
            cursor: pointer;
            min-width: 140px;
        }

        .lang-select:focus {
            outline: none;
            border-color: var(--vermilion);
        }

        .lang-status {
            font-size: 0.8rem;
            color: #888;
            margin-left: auto;
        }

        .lang-status.translating {
            color: var(--vermilion);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .lang-status.translating::before {
            content: '';
            width: 14px;
            height: 14px;
            border: 2px solid #f0f0f0;
            border-top-color: var(--vermilion);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .lang-status.cached {
            color: #4CAF50;
        }

        .lang-original-btn {
            padding: 0.35rem 0.6rem;
            font-size: 0.75rem;
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            color: #666;
            transition: all 0.2s;
        }

        .lang-original-btn:hover {
            background: #e0e0e0;
            color: #333;
        }

        @media (max-width: 600px) {
            .lang-selector {
                flex-wrap: wrap;
            }
            .lang-status {
                width: 100%;
                margin-left: 0;
                margin-top: 0.5rem;
            }
        }

        /* KaTeX math styles */
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            padding: 0.5rem 0;
        }

        .katex {
            font-size: 1.1em;
        }

        /* Jupyter Notebook Styles */
        .notebook-container {
            margin-top: 1rem;
        }

        .notebook-download {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            margin-bottom: 1.5rem;
            background: var(--black);
            color: var(--off-white);
            border-radius: 4px;
            font-size: 0.85rem;
            transition: opacity 0.2s;
        }

        .notebook-download:hover {
            opacity: 0.8;
            color: var(--off-white);
        }

        .notebook-download svg {
            width: 16px;
            height: 16px;
        }

        .nb-cell {
            margin-bottom: 1.5rem;
        }

        .nb-cell-code .nb-source {
            background: #2d2d2d;
            border-radius: 6px;
            overflow-x: auto;
        }

        .nb-cell-code .nb-source pre {
            margin: 0;
            padding: 1rem;
            color: #ccc;
            font-family: "SF Mono", Monaco, monospace;
            font-size: 0.85em;
        }

        .nb-cell-code .nb-source code {
            background: none;
            padding: 0;
        }

        .nb-output {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 0.75rem;
            margin-top: 0.5rem;
        }

        .nb-output pre {
            margin: 0;
            padding: 0;
            background: transparent;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: "SF Mono", Monaco, monospace;
            font-size: 0.85em;
            color: #222;
        }

        .nb-output img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0.5rem 0;
        }

        .nb-output table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .nb-output th,
        .nb-output td {
            border: 1px solid #ddd;
            padding: 0.5rem;
            text-align: left;
        }

        .nb-output th {
            background: #e8e8e8;
            font-weight: 600;
        }

        .nb-cell-markdown {
            padding: 0;
        }

        .nb-cell-markdown h1:first-child {
            margin-top: 0;
        }

        /* Document Download Button */
        .doc-download {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            margin-bottom: 1.5rem;
            background: var(--black);
            color: var(--off-white);
            border-radius: 4px;
            font-size: 0.85rem;
            transition: opacity 0.2s;
        }

        .doc-download:hover {
            opacity: 0.8;
            color: var(--off-white);
        }

        .doc-download svg {
            width: 16px;
            height: 16px;
        }

        /* PDF Viewer */
        .pdf-container {
            margin-top: 1rem;
        }

        .pdf-viewer {
            width: 100%;
            height: 80vh;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #f5f5f5;
        }

        /* Text File Display */
        .text-container {
            margin-top: 1rem;
        }

        .text-content {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 1.5rem;
            font-family: "SF Mono", Monaco, monospace;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--dark-grey);
            max-height: 80vh;
            overflow-y: auto;
        }

        /* Word Document Display */
        .word-container {
            margin-top: 1rem;
        }

        .word-content {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 2rem;
            line-height: 1.8;
            color: var(--dark-grey);
        }

        .word-content p {
            margin-bottom: 1rem;
        }

        .word-content h1,
        .word-content h2,
        .word-content h3 {
            color: var(--black);
            margin: 1.5rem 0 1rem;
        }

        .word-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .word-content th,
        .word-content td {
            border: 1px solid #ddd;
            padding: 0.5rem;
        }

        .word-content img {
            max-width: 100%;
            height: auto;
        }

        /* Excel Display */
        .excel-container {
            margin-top: 1rem;
        }

        .excel-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .excel-tab {
            padding: 0.5rem 1rem;
            background: #e8e8e8;
            border: none;
            border-radius: 4px 4px 0 0;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .excel-tab.active {
            background: #4CAF50;
            color: white;
        }

        .excel-content {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            overflow-x: auto;
            max-height: 70vh;
            overflow-y: auto;
        }

        .excel-content table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .excel-content th,
        .excel-content td {
            border: 1px solid #ddd;
            padding: 0.4rem 0.6rem;
            text-align: left;
            white-space: nowrap;
        }

        .excel-content th {
            background: #f5f5f5;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .excel-content tr:nth-child(even) {
            background: #fafafa;
        }

        /* PowerPoint Display */
        .ppt-container {
            margin-top: 1rem;
        }

        .ppt-viewer {
            width: 100%;
            height: 80vh;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #f5f5f5;
        }

        /* CSV Display (uses excel styles) */
        .csv-container {
            margin-top: 1rem;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
                padding: 2rem 1.5rem 1rem;
            }

            .social-links {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }

            .social-links a,
            .social-links .orcid-link {
                width: auto;
                padding: 0.5rem;
                font-size: 0;
                gap: 0;
            }

            .social-links svg {
                width: 24px;
                height: 24px;
            }

            .social-links .hide-mobile {
                display: none;
            }

            .sidebar-footer {
                margin-top: 1rem;
            }

            .content {
                margin-left: 0;
                padding: 2rem 1rem;
            }
        }

        @media (max-width: 480px) {
            .sidebar {
                padding: 1.5rem 1rem 1rem;
            }

            .avatar {
                width: 80px;
                height: 80px;
            }

            h1 {
                font-size: 1.4rem;
            }

            article h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>

    <div class="layout">
        <aside class="sidebar" id="sidebar-content"></aside>
        <script src="/components/sidebar.js?v=20260128"></script>

        <main class="content">
            <a href="/blog/" class="back-link">â† Back to Blog</a>

            <!-- Language Selector -->
            <div class="lang-selector" id="lang-selector" style="display: none;">
                <span class="lang-selector-label">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
                    </svg>
                    Language
                </span>
                <select class="lang-select" id="lang-select">
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                    <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                    <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
                    <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                    <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                </select>
                <button class="lang-original-btn" id="lang-original-btn" style="display: none;">Show Original</button>
                <span class="lang-status" id="lang-status"></span>
            </div>

            <article>
<hr>
<h2>date: 2024-10-09
tags: [ai]
legacy: true</h2>
<h1>ä¸€æ¬¡å¾®è°ƒè®­ç»ƒå¤±è´¥æ¡ˆä¾‹è§£æï¼šä» Qwen2.5 çš„æŸå¤±æ›²çº¿çœ‹é—®é¢˜ä¸ä¼˜åŒ–</h1>
<h2>å¤±è´¥åŸå› åˆ†æ</h2>
<p>å¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä¸­æŸå¤±å‘æ•£çš„åŸå› å¯èƒ½æ¥è‡ªä¸¤ä¸ªæ–¹é¢ï¼šä¸€æ˜¯ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„å‚æ•°è®¾ç½®æˆ–ç®—æ³•é—®é¢˜ï¼ŒäºŒæ˜¯æ•°æ®æ–¹é¢çš„é—®é¢˜ã€‚ä¸‹é¢ä»è¿™ä¸¤æ–¹é¢åˆ†åˆ«åˆ†æå¸¸è§åŸå› ã€‚</p>
<h3>ä¼˜åŒ–ç›¸å…³åŸå› </h3>
<ul>
<li>å­¦ä¹ ç‡è¿‡é«˜ï¼šè¿‡å¤§çš„å­¦ä¹ ç‡æ˜¯è®­ç»ƒå‘æ•£æœ€å¸¸è§çš„åŸå› ä¹‹ä¸€ã€‚å½“å­¦ä¹ ç‡è®¾ç½®è¿‡å¤§æ—¶ï¼Œæ¯æ¬¡å‚æ•°æ›´æ–°å¹…åº¦è¿‡çŒ›ï¼Œå¯èƒ½â€œè·³å‡ºâ€äº†æŸå¤±å‡½æ•°çš„æœ€ä¼˜è§£åŒºåŸŸï¼Œå¯¼è‡´æŸå¤±ä¸é™åå‡ ã€‚ç®€å•æ¥è¯´ï¼Œæ¢¯åº¦æ›´æ–°æ­¥é•¿å¤ªå¤§ï¼Œæ¨¡å‹åœ¨æœ€ä¼˜ç‚¹é™„è¿‘ä¸æ˜¯éœ‡è¡å°±æ˜¯ç›´æ¥å‘æ•£ ã€‚æç«¯æƒ…å†µä¸‹ï¼Œè¿‡é«˜çš„å­¦ä¹ ç‡ä¼šå¼•å‘æ•°å€¼è®¡ç®—é—®é¢˜ï¼šä¾‹å¦‚æŸæ¬¡æ›´æ–°ä½¿å¾—æŸå±‚ç¥ç»å…ƒæ¿€æ´»å€¼è¿‡å¤§ï¼Œå¯¼è‡´åç»­è®¡ç®— exp(æ¿€æ´»å€¼) æº¢å‡ºä¸ºæ— ç©·å¤§ INFï¼Œåå‘ä¼ æ’­ä½¿æƒé‡å˜æˆ NaNï¼Œä¹‹åæŸå¤±å°±å½»åº•é£æ•£äº† ã€‚å› æ­¤ï¼Œå¦‚æœè®­ç»ƒä»æŸä¸ªè¿­ä»£å¼€å§‹æŸå¤±éª¤å¢ï¼Œå¾ˆå¯èƒ½æ˜¯å­¦ä¹ ç‡è¿‡å¤§å¼•èµ·çš„ã€‚</li>
<li>æ¢¯åº¦çˆ†ç‚¸ï¼šæ¢¯åº¦çˆ†ç‚¸æ˜¯æŒ‡åœ¨æ·±å±‚ç½‘ç»œä¸­åå‘ä¼ æ’­æ—¶æ¢¯åº¦å€¼æŒ‡æ•°çº§å¢å¤§ï¼Œä½¿å¾—å‚æ•°æ›´æ–°è¿‡å¤§ï¼Œæ¨¡å‹æ— æ³•æ­£å¸¸å­¦ä¹ ã€‚å³ä½¿å­¦ä¹ ç‡é€‚ä¸­ï¼Œå¦‚æœæ¨¡å‹ç»“æ„æˆ–åˆå§‹åŒ–ä¸å½“ï¼Œä¹Ÿå¯èƒ½å‡ºç°æ¢¯åº¦çˆ†ç‚¸ç°è±¡ï¼Œé€ æˆæŸå¤±é™¡å¢ ã€‚ä¾‹å¦‚ç½‘ç»œè¿‡æ·±ä¸”æœªé‡‡å–åˆé€‚çš„åˆå§‹åŒ–æˆ–æ­£åˆ™åŒ–æ—¶ï¼Œæ¢¯åº¦åœ¨å±‚é—´ç´¯ä¹˜å¯èƒ½å˜å¾—éå¸¸å¤§ï¼Œæœ€ç»ˆå¯¼è‡´æŸå¤±å‡½æ•°å‡ºç°æ–­å´–å¼ä¸Šæ¶¨ ã€‚å¦‚æœè®­ç»ƒä¸­æ²¡æœ‰å¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªç­‰æ§åˆ¶ï¼Œä¸€æ¬¡å¼‚å¸¸çš„æ¢¯åº¦çˆ†ç‚¸å°±èƒ½ä½¿æ¨¡å‹å‘æ•£ã€‚æ¢¯åº¦çˆ†ç‚¸å¾€å¾€å’Œå­¦ä¹ ç‡è¿‡é«˜æœ‰å…³è”ï¼ˆé«˜å­¦ä¹ ç‡æ”¾å¤§äº†æœ¬å°±åå¤§çš„æ¢¯åº¦ ï¼‰ï¼Œä½†ä¹Ÿå¯èƒ½ç”±æ¨¡å‹æœ¬èº«çš„æ•°å€¼ä¸ç¨³å®šæ€§å¼•èµ·ã€‚</li>
<li>BatchNorm ä¸ç¨³å®šï¼šæ‰¹é‡å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰ä¸€èˆ¬ç”¨äºç¨³å®šå’ŒåŠ é€Ÿè®­ç»ƒï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹åè€Œä¼šå¼•å…¥ä¸ç¨³å®šæ€§ã€‚å¦‚æœBatchNormå±‚ä½¿ç”¨ä¸å½“ï¼ˆä¾‹å¦‚æ‰¹å¤§å°è¿‡å°ã€æ•°æ®åˆ†å¸ƒå‰§çƒˆå˜åŒ–ç­‰ï¼‰ï¼Œå¯èƒ½å¯¼è‡´ç½‘ç»œè¾“å‡ºåˆ†å¸ƒæ³¢åŠ¨è¿‡å¤§ï¼Œå¹²æ‰°è®­ç»ƒè¿‡ç¨‹ã€‚å·²æœ‰ç ”ç©¶æŒ‡å‡ºï¼Œåœ¨æŸäº›ä»»åŠ¡ä¸­åŠ å…¥BatchNormä¼šä½¿è®­ç»ƒå˜å¾—ä¸ç¨³å®šç”šè‡³æœ€ç»ˆå‘æ•£  ã€‚ä¾‹å¦‚åœ¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œç­‰å¯¹åˆ†å¸ƒæ•æ„Ÿçš„åœºæ™¯ï¼ŒBatchNormå¯èƒ½ç ´åæ•°æ®åˆ†å¸ƒçš„ç‰¹æ€§ï¼Œä½¿å¾—æ¨¡å‹éš¾ä»¥æ”¶æ•› ã€‚å› æ­¤ï¼Œå¦‚æœæ¨¡å‹ä¸­å¤§é‡ä½¿ç”¨äº†BatchNormä¸”è®­ç»ƒå‡ºç°å‘æ•£ï¼Œéœ€è¦è€ƒè™‘BatchNormå±‚è‡ªèº«çš„å½±å“ï¼ˆä¾‹å¦‚è¿è¡Œå‡å€¼/æ–¹å·®ä¼°è®¡ä¸ç¨³å®š ï¼‰ã€‚æ€»çš„æ¥è¯´ï¼ŒBatchNorm è‹¥æœªæ­£ç¡®é…ç½®ï¼Œæœ‰å¯èƒ½æˆä¸ºè®­ç»ƒä¸ç¨³å®šçš„è¯±å› ã€‚</li>
</ul>
<h3>æ•°æ®ç›¸å…³åŸå› </h3>
<ul>
<li>æ•°æ®æ ¼å¼é”™è¯¯ï¼šæ•°æ®è¾“å…¥çš„æ ¼å¼è‹¥ä¸ç¬¦åˆæ¨¡å‹é¢„æœŸï¼Œä¼šå¯¼è‡´æ¨¡å‹å­¦ä¹ åˆ°é”™è¯¯çš„ä¸œè¥¿ï¼Œä¸¥é‡æ—¶ä½¿æŸå¤±å¼‚å¸¸æ³¢åŠ¨æˆ–å‘æ•£ã€‚ä¾‹å¦‚è¾“å…¥æ•°æ®åŒ…å«äº†éæ³•å€¼ï¼ˆNaN/Infï¼‰ï¼Œæˆ–è€…ç‰¹å¾çš„ç»´åº¦ã€å½’ä¸€åŒ–æ–¹å¼ä¸æ­£ç¡®ï¼Œéƒ½ä¼šå½±å“æŸå¤±è®¡ç®— ã€‚å¦‚æœè®­ç»ƒæ•°æ®æœ¬èº«å­˜åœ¨å¼‚å¸¸å€¼ï¼Œæ¯”å¦‚æ ‡ç­¾ç¼ºå¤±æˆ–æ— æ•ˆï¼Œæ¨¡å‹é¢„æµ‹ä¼šäº§ç”Ÿæ— æ•ˆç»“æœï¼Œè¿›è€Œå¯¼è‡´lossè®¡ç®—å‡ºInfæˆ–NaN ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒæŸäº›æ¡†æ¶ä¸‹å¦‚æœæä¾›çš„æ ‡ç­¾ç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œå¯èƒ½å‡ºç° log(0) è¿™æ ·çš„è®¡ç®—ä½¿æŸå¤±å˜ä¸ºæ— ç©·å¤§æˆ–NaN ã€‚å› æ­¤ï¼Œä»»ä½•æ•°æ®ç®¡é“ä¸­çš„æ ¼å¼æˆ–æ•°å€¼é”™è¯¯ï¼ˆåŒ…æ‹¬ç‰¹å¾å¤„ç†å’Œæ ‡ç­¾å¤„ç†ï¼‰éƒ½å¯èƒ½å¯¼è‡´è®­ç»ƒæŸå¤±çš„å¼‚å¸¸ä¸Šå‡ã€‚</li>
<li>æ ‡ç­¾é”™ä½æˆ–é”™è¯¯ï¼šå¦‚æœæ•°æ®é›†çš„æ ‡ç­¾ä¸è¾“å…¥æ²¡æœ‰æ­£ç¡®å¯¹é½ï¼Œæ¨¡å‹å®é™…ä¸Šå­¦ä¸åˆ°æ­£ç¡®çš„å¯¹åº”å…³ç³»ï¼ŒæŸå¤±è‡ªç„¶æ— æ³•æ­£å¸¸é™ä½ã€‚æ ‡ç­¾é”™ä½å¯èƒ½å‘ç”Ÿåœ¨æ•°æ®é¢„å¤„ç†æˆ–åŠ è½½é˜¶æ®µï¼Œä¾‹å¦‚åœ¨åºåˆ—å»ºæ¨¡ä»»åŠ¡ä¸­ï¼Œè¾“å…¥å’Œç›®æ ‡åºåˆ—å‡ºç°åç§»ï¼Œæˆ–è€…åœ¨ç›‘ç£è®­ç»ƒä¸­æ ·æœ¬å’Œæ ‡ç­¾æ··æ·†ã€‚è¿™ç±»é”™è¯¯ä¼šé€ æˆæ¨¡å‹çš„é¢„æµ‹ä¸çœŸå®æ ‡ç­¾æ¯«ä¸ç›¸å…³ï¼ŒæŸå¤±å¯èƒ½ç»´æŒé«˜ä½ç”šè‡³è¶Šè®­è¶Šé«˜ã€‚æ›´ä¸¥é‡çš„æ˜¯ï¼Œé”™è¯¯æ ‡ç­¾ç›¸å½“äºåœ¨å‘æ¨¡å‹çŒè¾“å™ªå£°ï¼Œä¼šå¯¹è®­ç»ƒé€ æˆæå¤§çš„ç ´åæ€§ ã€‚å› æ­¤ï¼Œè‹¥è®­ç»ƒè¿‡ç¨‹ä¸­æŸå¤±è¡¨ç°å¼‚å¸¸ï¼Œéœ€è¦æ£€æŸ¥æ ‡ç­¾æ˜¯å¦æ­£ç¡®åŒ¹é…åˆ°å¯¹åº”çš„è¾“å…¥ã€‚æ•°æ®æ ‡ç­¾é”™è¯¯æˆ–é”™ä½å¾€å¾€ä¼šå¯¼è‡´è®­ç»ƒæ— æ³•æ”¶æ•›ï¼Œç”šè‡³æ¯”éšæœºæ ‡ç­¾çš„æƒ…å†µæ›´ç³Ÿç³•ã€‚</li>
<li>æ ·æœ¬ä¸å‡è¡¡ï¼šè®­ç»ƒæ•°æ®ä¸­ä¸åŒç±»åˆ«æˆ–ä¸åŒç±»å‹çš„æ ·æœ¬åˆ†å¸ƒä¸¥é‡ä¸å‡è¡¡ï¼Œä¹Ÿå¯èƒ½å¼•å‘è®­ç»ƒå›°éš¾ã€‚æ¨¡å‹åœ¨è®­ç»ƒæ—¶ä¼šå€¾å‘äºä¼˜åŒ–æ€»ä½“æŸå¤±ï¼Œå å¤šæ•°çš„æ ·æœ¬ç±»åˆ«ä¸»å¯¼äº†æ¢¯åº¦æ–¹å‘ï¼Œå½“æŸä¸€è½®ç¢°å·§é‡åˆ°å°‘æ•°ç±»æ ·æœ¬æ—¶ï¼ŒæŸå¤±å¯èƒ½ä¼šé£™å‡ï¼Œå› ä¸ºæ¨¡å‹å°šæœªå……åˆ†å­¦ä¹ è¯¥ç±»æ ·æœ¬çš„ç‰¹å¾ã€‚è¿™ç§æ ·æœ¬ä¸å¹³è¡¡ä¼šå¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä¸­æŸå¤±éœ‡è¡ç”šè‡³ä¸Šå‡ã€‚è™½ç„¶æ ·æœ¬ä¸å‡è¡¡æ›´å¤šåœ°å½±å“æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ï¼Œä½†åœ¨æç«¯æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚æŸäº›ç½•è§æ ·æœ¬æŸå¤±å§‹ç»ˆå±…é«˜ä¸ä¸‹ï¼‰ï¼Œä¹Ÿä¼šæ‹–ç´¯æ€»ä½“è®­ç»ƒæŸå¤±çš„ä¸‹é™ã€‚å¯¹äºä¸å‡è¡¡æ•°æ®é›†ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦åšé¢å¤–å¤„ç†ï¼Œä»¥ä½¿æ¯ä¸ªç±»åˆ«å¯¹è®­ç»ƒçš„å½±å“ç›¸è¿‘ ã€‚æ€»ä¹‹ï¼Œå¦‚æœæ•°æ®åˆ†å¸ƒä¸åˆç†ï¼Œæ¨¡å‹å¯èƒ½éš¾ä»¥åŒæ—¶é¡¾åŠæ‰€æœ‰æ ·æœ¬ï¼Œä»è€Œè¡¨ç°ä¸ºæŸå¤±æ”¶æ•›ä¸ä½³ç”šè‡³åå¤å‡é«˜ã€‚</li>
</ul>
<h2>å·¥ç¨‹åº”å¯¹ç­–ç•¥</h2>
<p>é’ˆå¯¹ä¸Šè¿°è®­ç»ƒå¤±è´¥çš„å¯èƒ½åŸå› ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¼˜åŒ–å‚æ•°å’Œæ•°æ®å¤„ç†ä¸¤æ–¹é¢é‡‡å–ç›¸åº”çš„å·¥ç¨‹æªæ–½æ¥æ”¹è¿›ï¼š</p>
<ul>
<li>è°ƒä½å­¦ä¹ ç‡ï¼šé¦–å…ˆè€ƒè™‘å°†å­¦ä¹ ç‡é™ä½ä¸€ä¸ªé‡çº§æˆ–æ›´å¤šã€‚ç»éªŒä¸Šï¼Œå¦‚æœåœ¨è®­ç»ƒåˆæœŸï¼ˆæ¯”å¦‚å‰100ä¸ªè¿­ä»£ï¼‰å°±è§‚å¯Ÿåˆ°losså‡ºç°NaNæˆ–æš´æ¶¨ï¼Œå¾€å¾€æ˜¯å­¦ä¹ ç‡è¿‡é«˜æ‰€è‡´ï¼Œåº”åŠæ—¶å°†å­¦ä¹ ç‡è°ƒå° ã€‚é™ä½å­¦ä¹ ç‡å¯ä»¥å‡ç¼“æ¯æ¬¡å‚æ•°æ›´æ–°çš„å¹…åº¦ï¼Œé¿å…â€œè·³è¿‡â€æœ€ä¼˜ç‚¹ã€‚æœ‰æ—¶éœ€è¦å¤šæ¬¡å°è¯•ä¸åŒæ•°é‡çº§çš„å­¦ä¹ ç‡æ¥æ‰¾åˆ°æ¨¡å‹ç¨³å®šæ”¶æ•›çš„èŒƒå›´ã€‚å¦‚æœåŸä½¿ç”¨çš„æ˜¯å›ºå®šå­¦ä¹ ç‡ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨è‡ªé€‚åº”ä¼˜åŒ–ç®—æ³•ï¼ˆå¦‚ Adamã€AdaGrad ç­‰ï¼‰æ¥è‡ªåŠ¨è°ƒèŠ‚æœ‰æ•ˆå­¦ä¹ ç‡ï¼Œä»è€Œæé«˜è®­ç»ƒçš„ç¨³å®šæ€§ã€‚</li>
<li>ä½¿ç”¨æ¢¯åº¦è£å‰ªï¼šæ¢¯åº¦è£å‰ªï¼ˆGradient Clippingï¼‰æ˜¯ä¸€ç§é™åˆ¶æ¢¯åº¦æœ€å¤§èŒƒæ•°æˆ–æœ€å¤§å€¼çš„æ–¹æ³•ï¼Œå¸¸ç”¨äºé˜²æ­¢æ¢¯åº¦çˆ†ç‚¸ ã€‚åœ¨æ¯æ¬¡å‚æ•°æ›´æ–°å‰ï¼Œå¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªï¼ˆä¾‹å¦‚é™åˆ¶å…¶ L2 èŒƒæ•°ä¸è¶…è¿‡æŸä¸€é˜ˆå€¼ï¼‰ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ä¸€æ¬¡å¼‚å¸¸æ›´æ–°ç ´åæ•´ä¸ªæ¨¡å‹ ã€‚ç‰¹åˆ«æ˜¯è®­ç»ƒå¤§è§„æ¨¡æ¨¡å‹æˆ–æ·±å±‚ç½‘ç»œæ—¶ï¼Œæ¢¯åº¦è£å‰ªèƒ½æä¾›é¢å¤–çš„å®‰å…¨è¾¹é™…ã€‚å½“æ£€æµ‹åˆ°æ¢¯åº¦å‡ºç°å¼‚å¸¸å¢å¤§è¶‹åŠ¿æ—¶ï¼Œè£å‰ªæ“ä½œå¯ä»¥å°†å…¶æ‹‰å›åˆç†åŒºé—´ï¼Œä»è€Œé¿å…æŸå¤±å‡½æ•°æ¢¯åº¦çˆ†ç‚¸å¯¼è‡´çš„è®­ç»ƒå‘æ•£ã€‚</li>
<li>é‡‡ç”¨å­¦ä¹ ç‡ Warmupï¼šWarmupï¼ˆé¢„çƒ­ï¼‰ç­–ç•¥æŒ‡åœ¨è®­ç»ƒå¼€å§‹é˜¶æ®µä½¿ç”¨è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œç„¶åå†é€æ­¥æé«˜åˆ°é¢„è®¾å€¼ã€‚è¿™æ ·åšå¯ä»¥è®©æ¨¡å‹å…ˆä»¥å®‰å…¨çš„æ­¥é•¿å¼€å§‹å­¦ä¹ ï¼Œé¿å…ä¸€å¼€å§‹ç”±äºå­¦ä¹ ç‡è¿‡å¤§è€Œå‘æ•£ ã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‰è‹¥å¹²ä¸ªepochæˆ–ä¸€å®šæ•°é‡çš„stepå†…ï¼Œå°†å­¦ä¹ ç‡ä»ä¸€ä¸ªå¾ˆå°çš„å€¼çº¿æ€§æˆ–æŒ‡æ•°åœ°å¢åŠ åˆ°ç›®æ ‡å­¦ä¹ ç‡ï¼Œå†ç»§ç»­æ­£å¸¸çš„è®­ç»ƒè¿‡ç¨‹ã€‚Warmupèƒ½å¤Ÿå¹³æ»‘åœ°å¼•å¯¼æ¨¡å‹è¿›å…¥è®­ç»ƒçŠ¶æ€ï¼Œå°¤å…¶å¯¹éå¸¸æ·±çš„ç½‘ç»œæˆ–å¤§æ¨¡å‹æœ‰å¸®åŠ©â€”â€”é¢„çƒ­é˜¶æ®µé™åˆ¶äº†ç½‘ç»œåˆå§‹é˜¶æ®µå‚æ•°å‰§çƒˆå‘æ•£çš„ç¨‹åº¦ ã€‚å› æ­¤ï¼Œå¯¹äºåƒQwen2.5-1.5Bè¿™æ ·çš„å¤§æ¨¡å‹å¾®è°ƒï¼Œå¼•å…¥é€‚å½“çš„å­¦ä¹ ç‡warmupæœ‰åŠ©äºç¨³å®šè®­ç»ƒå¼€å±€ã€‚</li>
<li>æ£€æŸ¥æ•°æ®ç®¡é“ï¼šå½»åº•æ’æŸ¥æ•°æ®è¯»å–å’Œé¢„å¤„ç†æµç¨‹ï¼Œç¡®ä¿è¾“å…¥æ•°æ®å’Œæ ‡ç­¾çš„æ ¼å¼ä¸æ¨¡å‹è¦æ±‚ä¸€è‡´ã€‚éœ€è¦éªŒè¯æ•°æ®é›†ä¸­æ˜¯å¦å­˜åœ¨å¼‚å¸¸å€¼æˆ–é”™è¯¯æ ‡æ³¨ï¼Œä¾‹å¦‚ï¼šå›¾åƒæ•°æ®æ˜¯å¦æ­£ç¡®å½’ä¸€åŒ–ï¼Œæ–‡æœ¬æ•°æ®çš„tokenæ˜¯å¦æ­£ç¡®å¯¹é½æ ‡ç­¾ï¼Œåˆ†ç±»æ ‡ç­¾æ˜¯å¦åœ¨åˆæ³•èŒƒå›´å†…ç­‰ç­‰ã€‚ä»»ä½•è„æ•°æ®ï¼ˆNaN/Infï¼‰æˆ–æ ¼å¼ä¸ç¬¦éƒ½ä¼šå¯¹è®­ç»ƒé€ æˆå¹²æ‰° ã€‚å·¥ç¨‹ä¸Šï¼Œå¯ä»¥åœ¨è®­ç»ƒå‰å¯¹æ•°æ®é›†è¿›è¡Œä¸€æ¬¡å…¨é¢çš„æ¸…æ´—å’ŒéªŒè¯ï¼Œç§»é™¤æ˜æ˜¾å¼‚å¸¸çš„æ ·æœ¬ã€‚æ­¤å¤–ï¼Œå»ºè®®åœ¨è®­ç»ƒä»£ç ä¸­åŠ å…¥æ–­è¨€æˆ–æ—¥å¿—ç›‘æ§ï¼Œä¸€æ—¦è¯»å…¥çš„æ•°æ®å‡ºç°ä¸åˆç†å€¼ï¼Œèƒ½å¤ŸåŠæ—¶å‘ç°å¹¶çº æ­£ã€‚</li>
<li>éªŒè¯æ ‡ç­¾é…å¯¹ï¼šé’ˆå¯¹æ ‡ç­¾é”™ä½æˆ–ä¸æ­£ç¡®çš„é—®é¢˜ï¼Œå»ºè®®å–å°‘é‡æ ·æœ¬æ‰‹åŠ¨æ£€æŸ¥æ¨¡å‹è¾“å…¥ä¸æ ‡ç­¾æ˜¯å¦ä¸€ä¸€å¯¹åº”ã€‚å¯ä»¥æ‰“å°ä¸€äº›è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡ç­¾ï¼Œäººå·¥ç¡®ä¿å®ƒä»¬åŒ¹é…æ— è¯¯ã€‚å¦‚æœæ˜¯åºåˆ—ç”Ÿæˆæˆ–åºåˆ—æ ‡æ³¨ä»»åŠ¡ï¼Œè¦ç¡®è®¤å¯¹é½æ–¹å¼ç¬¦åˆé¢„æœŸï¼ˆä¾‹å¦‚offsetã€paddingå¤„ç†æ­£ç¡®ï¼‰ã€‚å½“å‘ç°æ ‡ç­¾æœ‰é”™è¯¯æ—¶ï¼Œåº”ç«‹å³ä¿®æ­£æ ‡æ³¨æˆ–æ¸…é™¤è¿™äº›æ ·æœ¬ï¼Œå› ä¸ºé”™è¯¯æ ‡ç­¾å¯¹è®­ç»ƒçš„ç ´åä½œç”¨å¾€å¾€éå¸¸å¤§ ã€‚åœ¨å®è·µä¸­ï¼Œä¹Ÿå¯ä»¥ç¼–å†™å•å…ƒæµ‹è¯•è®©æ¨¡å‹åªè®­ç»ƒä¸€ä¸ªbatchçš„æ•°æ®ï¼Œå¹¶è§‚å¯Ÿå…¶lossèƒ½å¦ä¸‹é™â€”â€”å¦‚æœè¿å•ä¸€batchéƒ½æ— æ³•æ”¶æ•›ï¼Œåæœ‰å…«ä¹æ˜¯æ•°æ®å’Œæ ‡ç­¾å­˜åœ¨å¯¹åº”é—®é¢˜ã€‚</li>
<li>å¹³è¡¡æ ·æœ¬åˆ†å¸ƒï¼šå¯¹äºæ ·æœ¬ç±»åˆ«ä¸å‡è¡¡å¼•èµ·çš„è®­ç»ƒä¸ç¨³å®šï¼Œå¯é‡‡ç”¨ä¸€äº›ç­–ç•¥æ¥ç¼“è§£å…¶å½±å“ã€‚ä¾‹å¦‚ï¼Œåœ¨é‡‡æ ·æ—¶å¯¹å°‘æ•°ç±»æ ·æœ¬è¿‡é‡‡æ ·ã€å¯¹å¤šæ•°ç±»æ¬ é‡‡æ ·ï¼Œæˆ–åœ¨æŸå¤±å‡½æ•°ä¸­å¼•å…¥ç±»åˆ«æƒé‡ï¼Œä½¿æ¨¡å‹åœ¨è®¡ç®—lossæ—¶æ›´åŠ å…³æ³¨å°‘æ•°ç±»ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨focal lossç­‰æ”¹è¿›çš„æŸå¤±å‡½æ•°ï¼Œè®©æ¨¡å‹æ›´å…³æ³¨éš¾åˆ†ç±»çš„æ ·æœ¬ï¼Œä»è€Œå‡å°å¤šæ•°ç±»ä¸»å¯¼æ¢¯åº¦çš„æƒ…å†µã€‚æ›´ç›´æ¥çš„åŠæ³•æ˜¯åœ¨æ•°æ®å±‚é¢è¿›è¡Œå¢å¼ºï¼Œå¢åŠ å°‘æ•°ç±»åˆ«çš„æ ·æœ¬æ•°é‡ã€‚å¦‚æœæ¡ä»¶å…è®¸ï¼Œç¡®ä¿å„ç±»åˆ«çš„æ ·æœ¬æ•°ç›®ç›¸å¯¹æ¥è¿‘ï¼Œä»¥å…æ¨¡å‹è¿‡åº¦åå‘æŸä¸€éƒ¨åˆ†æ•°æ® ã€‚é€šè¿‡è¿™äº›æªæ–½ï¼Œå‡è½»æ•°æ®ä¸å‡è¡¡å¯¹æ¨¡å‹ä¼˜åŒ–è½¨è¿¹çš„å¹²æ‰°ï¼Œä½¿è®­ç»ƒæŸå¤±æ›²çº¿æ›´åŠ å¹³ç¨³ã€‚</li>
<li>ç›‘æ§å¼‚å¸¸å€¼å¹¶åŠæ—¶åœæ­¢ï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åŠ å…¥å¯¹losså’Œæ¢¯åº¦çš„ç›‘æ§ä¹Ÿæ˜¯é‡è¦çš„å·¥ç¨‹æ‰‹æ®µã€‚å¯ä»¥å®šæœŸæ£€æŸ¥æ¢¯åº¦èŒƒæ•°å’Œlosså€¼ï¼Œä¸€æ—¦å‘ç°losså‡ºç°å¼‚å¸¸å·¨å¤§çš„å¢å¹…æˆ–è€…å˜ä¸ºNaN/Infï¼Œåº”å½“è§¦å‘æ—©åœæœºåˆ¶æˆ–ä¸­æ–­è®­ç»ƒè¿›è¡Œæ’æŸ¥ ã€‚ä¾‹å¦‚ï¼Œå¾ˆå¤šæ·±åº¦å­¦ä¹ æ¡†æ¶æ”¯æŒæ£€æµ‹åˆ°NaNæ—¶è‡ªåŠ¨åœæ­¢è®­ç»ƒï¼Œæˆ–è€…å¼€å‘è€…å¯ä»¥åœ¨è®­ç»ƒå¾ªç¯ä¸­æ‰‹åŠ¨ç›‘è§†ã€‚å¦‚æœå‘ç”Ÿå‘æ•£ï¼Œä¿å­˜å‡ºäº‹æ—¶åˆ»çš„æ¨¡å‹å¿«ç…§å’Œä¼˜åŒ–çŠ¶æ€ç”¨äºäº‹ååˆ†æã€‚æ£€æŸ¥æ¨¡å‹çš„æƒé‡å‚æ•°æ˜¯å¦å‡ºç°NaNæˆ–âˆä¹Ÿæ˜¯è¯Šæ–­æ‰‹æ®µä¹‹ä¸€ â€”â€”å¦‚æœæƒé‡ä¸­å·²ç»æœ‰äº†NaNï¼Œè¯´æ˜æ¢¯åº¦çˆ†ç‚¸ç­‰é—®é¢˜å·²ç»å‘ç”Ÿï¼Œéœ€è¦ä»æœ€è¿‘çš„æ­£å¸¸æ£€æŸ¥ç‚¹æ¢å¤è®­ç»ƒå¹¶é‡‡å–ä¸Šè¿°æªæ–½ï¼ˆé™å­¦ä¹ ç‡ç­‰ï¼‰ã€‚æ€»ä¹‹ï¼ŒåŠæ—¶å‘ç°å¹¶åœæ­¢èƒ½é˜²æ­¢æ¨¡å‹åœ¨é”™è¯¯çš„æ–¹å‘ä¸Šè¶Šèµ°è¶Šè¿œï¼Œå‡å°‘æ— æ•ˆçš„è®¡ç®—å¼€é”€ã€‚</li>
<li>è°ƒæ•´æ¨¡å‹åŠå…¶ä»–è¶…å‚ï¼šå¦‚æœç»è¿‡ä»¥ä¸Šæ’æŸ¥ä»æ— æ³•ç¨³å®šè®­ç»ƒï¼Œå¯èƒ½éœ€è¦å®¡è§†æ¨¡å‹æœ¬èº«çš„è®¾è®¡å’Œå…¶ä»–è¶…å‚æ•°ã€‚æ¯”å¦‚æ£€æŸ¥ç½‘ç»œå±‚çš„è®¾ç½®ï¼ˆè¿‡æ·±çš„ç½‘ç»œæ˜¯å¦åŠ äº†æ®‹å·®ç»“æ„æ¥ç¼“è§£æ¢¯åº¦é—®é¢˜ï¼‰ï¼Œé€‰æ‹©åˆé€‚çš„æ¿€æ´»å‡½æ•°å’Œåˆå§‹åŒ–æ–¹æ³•æ¥ä¿è¯æ•°å€¼ç¨³å®šã€‚å¯¹äºBatchNormå±‚å¯¼è‡´çš„ä¸ç¨³å®šï¼Œå¯ä»¥å°è¯•å¢å¤§æ‰¹é‡å¤§å°ä»¥è·å–æ›´ç¨³å®šçš„å‡å€¼/æ–¹å·®ä¼°è®¡ï¼Œæˆ–è€…ç¼©å°å…¶åŠ¨é‡ï¼Œç”šæˆ–åœ¨å¾®è°ƒè¿‡ç¨‹ä¸­å†»ç»“é¢„è®­ç»ƒçš„BNå‚æ•°ä¸æ›´æ–°ã€‚è‹¥é—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘æ›¿æ¢ä¸ºå¯¹å°æ‰¹é‡ä¸æ•æ„Ÿçš„å½’ä¸€åŒ–æ–¹æ³•ï¼ˆä¾‹å¦‚LayerNormæˆ–GroupNormï¼‰ã€‚æ­¤å¤–ï¼Œé€‚å½“é™ä½æ¢¯åº¦ç´¯ç§¯æ­¥æ•°ã€æ£€æŸ¥ä¼˜åŒ–å™¨çš„åŠ¨é‡å› å­ã€å…³é—­è¿‡å¼ºçš„æ­£åˆ™åŒ–ç­‰ï¼Œéƒ½å±äºå¯èƒ½çš„è°ƒå‚æ–¹å‘ã€‚åœ¨LLMå¾®è°ƒå®æˆ˜ä¸­ï¼Œæœ‰æ—¶éœ€è¦ç»¼åˆè°ƒæ•´å¤šä¸ªæ–¹é¢ï¼Œé€æ­¥é€¼è¿‘ç¨³å®šæ”¶æ•›çš„é…ç½®ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<p>é€šè¿‡å¯¹ä¸Šè¿°æ¡ˆä¾‹çš„æŸå¤±æ›²çº¿è¿›è¡Œåˆ†æï¼Œæˆ‘ä»¬ç¡®å®šè¯¥ Qwen2.5-1.5B æ¨¡å‹å¾®è°ƒè¿‡ç¨‹ä¸­å‡ºç°äº†è®­ç»ƒå¤±è´¥ï¼ˆæŸå¤±å‘æ•£ï¼‰ç°è±¡ã€‚åˆ¤æ–­ä¾æ®æ˜¯è®­ç»ƒæŸå¤±åœ¨è‹¥å¹²è½®åä¸ä»…æ²¡æœ‰ä¸‹é™ï¼Œåè€Œä»¥æŒ‡æ•°è¶‹åŠ¿ä¸Šå‡ï¼Œè¿™æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸¥é‡å¼‚å¸¸çš„æ ‡å¿—ã€‚é€ æˆè¿™ç§é—®é¢˜çš„åŸå› å¯èƒ½åŒ…æ‹¬å­¦ä¹ ç‡è®¾ç½®ä¸å½“ã€æ¢¯åº¦çˆ†ç‚¸æœªè¢«æŠ‘åˆ¶ã€BatchNorm å±‚å¼•å…¥çš„ä¸ç¨³å®šï¼Œä»¥åŠæ•°æ®æ ¼å¼å’Œæ ‡ç­¾é—®é¢˜ç­‰ã€‚é’ˆå¯¹æ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†å¤šæ–¹é¢çš„è§£å†³æ€è·¯ï¼šåœ¨ä¼˜åŒ–å±‚é¢é™ä½å­¦ä¹ ç‡ã€ä½¿ç”¨ warmup å’Œæ¢¯åº¦è£å‰ªæ¥ç¨³å¥è®­ç»ƒï¼›åœ¨æ•°æ®å±‚é¢æ ¡éªŒæ•°æ®ç®¡é“ã€ç¡®ä¿æ ‡ç­¾æ­£ç¡®ã€ç¼“è§£æ ·æœ¬ä¸å‡è¡¡ï¼›å¹¶é€šè¿‡ç›‘æ§æœºåˆ¶åŠæ—¶æ•è·å¼‚å¸¸ã€‚å®è·µç»éªŒè¡¨æ˜ï¼Œå¤§éƒ¨åˆ†è®­ç»ƒå‘æ•£çš„é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ä»”ç»†åœ°å®šä½åŸå› å¹¶è°ƒæ•´ç›¸åº”é…ç½®æ¥è§£å†³ã€‚åœ¨æœªæ¥çš„æ¨¡å‹è°ƒä¼˜ä¸­ï¼Œè®­ç»ƒå·¥ç¨‹å¸ˆåº”å½“å¯†åˆ‡å…³æ³¨æŸå¤±æ›²çº¿çš„èµ°åŠ¿ï¼Œä¸€æ—¦å‘ç°ç±»ä¼¼æœ¬æ¡ˆä¾‹çš„å¼‚å¸¸æ¨¡å¼ï¼ŒåŠæ—¶åº”ç”¨ä¸Šè¿°ç­–ç•¥è¿›è¡Œå¹²é¢„ã€‚é€šè¿‡ä¸æ–­åœ°å®éªŒå’Œè°ƒå‚ï¼Œæˆ‘ä»¬æœ‰æœ›å°†åƒQwen2.5è¿™æ ·çš„æ¨¡å‹å¾®è°ƒè®­ç»ƒé‡æ–°æ‹‰å›æ­£è½¨ï¼Œå®ç°æŸå¤±ç¨³æ­¥ä¸‹é™å’Œæ¨¡å‹æ€§èƒ½çš„æå‡ã€‚</p>

    </article>
    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/prismjs@1/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script>
<script>
Prism.highlightAll();
document.querySelectorAll('article pre').forEach(pre => {
    const code = pre.querySelector('code');
    if (!code) return;
    const toolbar = document.createElement('div');
    toolbar.className = 'code-toolbar';
    const btn = document.createElement('button');
    btn.className = 'copy-btn';
    btn.textContent = 'Copy';
    btn.onclick = () => {
        navigator.clipboard.writeText(code.textContent).then(() => {
            btn.textContent = 'Copied!';
            btn.classList.add('copied');
            setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
        });
    };
    toolbar.appendChild(btn);
    pre.parentNode.insertBefore(toolbar, pre);
});
</script>
</body>
</html>